{"version":3,"sources":["types/index.ts","components/common/CustomBackButton.tsx","Utils.ts","components/StatsRenderer.tsx","components/CharacterStatusBarTable.tsx","components/statusbar/CharacterStatsHeader.tsx","images/Biomorph.png","images/CreateCrew.png","images/Cyborg.png","images/icons/Add.png","images/icons/Crew.png","images/icons/Captain.png","images/icons/Minus.png","images/icons/Delete.png","images/icons/Info.png","images/icons/Save.png","images/icons/SavePdf.png","images/icons/Treasury.png","images/ImportCrew.png","images/Mystic.png","images/PostGame.png","images/Psionicist.png","images/resources/Stargrave_Reference-1.png","images/resources/Stargrave_Reference-2.png","images/RoboticsExpert.png","images/Rogue.png","images/soldiers/ArmouredTrooper.png","images/soldiers/Burner.png","images/soldiers/Casecracker.png","images/soldiers/Chiseler.png","images/soldiers/Codebreaker.png","images/soldiers/Commando.png","images/soldiers/Grenadier.png","images/soldiers/GuardDog.png","images/soldiers/Gunner.png","images/soldiers/Hacker.png","images/soldiers/Medic.png","images/soldiers/Pathfinder.png","images/soldiers/Recruit.png","images/soldiers/Runner.png","images/soldiers/Sentry.png","images/soldiers/Sniper.png","images/soldiers/Trooper.png","images/Starship.png","images/Tekker.png","images/Unknown.png","images/UseSample.png","images/Veteran.png","images/index.ts","redux/actions.ts","pages/Creation/CharacterBackground.tsx","UseComponentVisible.tsx","components/dropdowns/GearDropdown.tsx","pages/PostGame/PhysicalLoot.tsx","pages/Creation/CharacterGearSelection.tsx","components/InputComponent.tsx","components/NameComponent.tsx","pages/Creation/CharacterName.tsx","components/common/Carousel.tsx","pages/Creation/CharacterNonCorePowerSelection.tsx","pages/Creation/CharacterPowerImprovements.tsx","pages/Creation/CharacterPowerSelection.tsx","pages/Creation/CharacterStatsImprovements.tsx","components/common/BackButton.tsx","pages/Creation/SetShipNamePage.tsx","components/CharacterTileGearAndPowers.tsx","components/CharacterTileHeader.tsx","components/SoldierComponent.tsx","components/statusbar/CrewSizeComponent.tsx","components/statusbar/TreasuryComponent.tsx","components/SoldierSelection.tsx","pages/Creation/SoldierSelectionPage.tsx","components/CharacterInjuries.tsx","components/CharacterComponent.tsx","components/statusbar/AdvanceComponent.tsx","components/statusbar/FileComponent.tsx","components/statusbar/Shipname.tsx","images/icons/Leave.png","components/statusbar/StatusBarComponent.tsx","pages/Overview/CrewPage.tsx","pages/Overview/FileOperationsPage.tsx","pages/Overview/FileSystem.tsx","pages/Overview/LandingPage.tsx","components/pdf/PdfPowerCards.tsx","components/pdf/PdfRosterComponents.tsx","components/pdf/PdfRenderer.tsx","components/pdf/PdfStorageSheet.tsx","components/ReferenceSheets.tsx","pages/Overview/PdfPage.tsx","pages/Overview/TransactionHistoryPage.tsx","components/dropdowns/XPDropdown.tsx","pages/PostGame/BuyLevels.tsx","pages/PostGame/ExperiencePage.tsx","components/SelectNewPowers.tsx","pages/PostGame/LevelUpPage.tsx","pages/PostGame/LevelUpCaptain.tsx","pages/PostGame/LevelUpFirstMate.tsx","pages/PostGame/PostGameSequencePage.tsx","pages/PostGame/Loot.tsx","index.tsx","redux/reducer.ts"],"names":["BackgroundEnum","PowerCategory","StatsEnum","CharactersEnum","SoldierEnum","SoldierGroups","CustomBackButtonComponent","dispatchFunction","customHistory","history","useHistory","onClick","event","goBack","preventDefault","stopPropagation","className","LevelImprovements","InitialCrewState","Credits","Soldiers","ShipName","Captain","name","level","stats","Move","Fight","Shoot","Will","Armour","Health","gearSlots","type","powers","gear","FirstMate","Experience","ExperienceRecords","CreditRecords","credits","sign","record","ShipsHold","allPowers","PowerList","allBackgrounds","BackgroundList","allGear","GearItems","advancedWeapons","advancedTech","alienArtefacts","getBackgroundInfos","background","find","bg","numberOfCrewMembers","state","store","getState","reduce","acc","soldier","amount","getCurrentStatStrings","currentHealth","toString","getPower","power","getBackground","isCorePower","powerName","backgroundName","corePowers","isCaptain","isCharacter","crewMember","getNonCorePowers","isCaptainCharacter","filter","includes","map","activation","getGeneralGearDetails","gearName","foundGear","getGearByType","gearType","getActualNotes","gearList","gearItem","notes","getStatsWithGear","updateStats","updatedStatsByGear","updatedStatsWithGear","item","Object","keys","stat","getDamageModifierString","weapon","damageModifier","gearSortAlgorithm","count","length","getAdvancePerLevel","LowerActivation","ImproveStat","NewPower","NewPowerOrImproveStat","getBaseCaptain","getBaseFirstMate","StatsRenderer","member","cells","entries","key","value","push","Fragment","CharacterStatusBarTable","character","gearSlotsUsed","isTileTable","style","width","SoldierStatusBarTable","CharacterStatsHeader","characterType","useContext","ReactReduxContext","id","display","float","QuickReferenceSheet1","QuickReferenceSheet1Png","QuickReferenceSheet2","QuickReferenceSheet2Png","CyborgIcon","CyborgPng","BiomorphIcon","BiomorphPng","MysticIcon","MysticPng","PsionicistIcon","PsionicistPng","RoboticsExpertIcon","RoboticsExpertPng","RogueIcon","RoguePng","StarshipIcon","StarshipPng","TekkerIcon","TekkerPng","VeteranIcon","VeteranPng","BurnerIcon","BurnerPng","GrenadierIcon","GrenadierPng","SniperIcon","SniperPng","CodebreakerIcon","CodebreakerPng","GuardDogIcon","GuardDogPng","CasecrackerIcon","CasecrackerPng","GunnerIcon","GunnerPng","MedicIcon","MedicPng","PathfinderIcon","PathfinderPng","ArmouredTrooperIcon","ArmouredTrooperPng","RecruitIcon","RecruitPng","RunnerIcon","RunnerPng","SentryIcon","SentryPng","TrooperIcon","TrooperPng","HackerIcon","HackerPng","ChiselerIcon","ChiselerPng","CommandoIcon","CommandoPng","getBackgroundImage","Biomorph","Cyborg","Mystic","Psionicist","RoboticsExpert","Rogue","Tekker","Veteran","UnknownPng","getSoldierImage","soldierType","Burner","Grenadier","Sniper","Casecracker","Codebreaker","GuardDog","Gunner","Medic","Pathfinder","ArmouredTrooper","Recruit","Runner","Sentry","Trooper","Hacker","Chiseler","Commando","UseSampleIcon","UseSamplePng","CreateCrewIcon","CreateCrewPng","ImportCrewIcon","ImportCrewPng","TreasuryIcon","TreasuryPng","CrewIcon","CrewPng","AddIcon","AddPng","SaveIcon","SavePng","MinusIcon","MinusPng","PdfIcon","PdfPng","PostGameIcon","PostGamePng","ADD_XP","SPEND_XP","REWIND_XP","ADD_SOLDIERS","SET_CAPTAINS_NAME","SET_CAPTAINS_BACKGROUND","SET_CAPTAINS_STATS","SET_CAPTAINS_POWERS","SET_CAPTAINS_GEAR","SET_FIRSTMATE_NAME","SET_FIRSTMATE_BACKGROUND","SET_FIRSTMATE_GEAR","SET_FIRSTMATE_STATS","SET_FIRSTMATE_POWERS","SET_FIRST_MATE","SET_CAPTAIN","SET_CREW","SET_SHIPNAME","MODIFY_SOLDIER","REMOVE_SOLDIERS","CharacterBackgroundPage","dispatch","useDispatch","location","useState","setBackground","backgroundEnumEntry","undefined","src","alt","payload","useComponentVisible","initialIsVisible","isComponentVisible","setIsComponentVisible","ref","useRef","handleHideDropdown","handleClickOutside","current","contains","target","useEffect","document","addEventListener","removeEventListener","openMenu","Categories","GearLabel","fontSize","maxRange","armourModifier","GearDropDown","list","dropdownOptions","callbackFn","placeholder","selectedItem","setSelectedItem","position","getElementById","getBoundingClientRect","top","left","getCssProps","listItem","onMouseDown","CharacterSelectGearPage","defaultKnife","defaultArmour","selectedGear","setSelectedGear","isGearSelected","gr","maxGear","getSelectedArmour","armour","getCSSClasses","withMax","itemTooLarge","onClickHandler","gearDetails","selGear","melee","getSelectedMelee","equi","sort","a","b","localeCompare","InputComponent","currentState","tooltip","cssClass","callback","setName","inputVisible","setInputVisible","inputRef","useLayoutEffect","focus","onChange","currentTarget","onKeyUp","code","onBlur","placeSelf","padding","NameComponent","currentStateValue","inputCallback","CharacterNamePage","Carousel","reactSwipeEl","inputDivs","splitSize","resetPage","cnt","sectionCnt","Math","ceil","currentSection","setCurrentSection","slide","swipeOptions","continuous","el","childCount","sectionDivs","i","slice","getContent","getPos","prev","gridArea","next","CharacterNonCorePowerSelectionPage","selectedPowers","setSelectedPowers","previewPower","setPreviewPower","lastPreviewPower","setLastPreviewPower","isPowerSelected","pwr","maxCorePowersSelected","powersRemaining2","powersRemaining","strain","Array","isArray","category","join","effect","findIndex","idx","CharacterPowerImprovementsPage","actualPower","x","concat","CharacterPowerSelectionPage","powerNames","minPowersSelected","maxPowersSelected","CharacterStatsSelectionPage","selections","setSelections","isStatSelected","statName","statModificationsForBackground","statModifications","maxStatsReached","chooseOptionals","calcPayload","newStats","mandatory","marginTop","statValue","optional","rest","BackButtonComponent","ShipNamePage","renderGear","renderSoldier","isPdf","paddingRight","fontWeight","CharacterTileGearAndPowers","textAlign","SoldierTileGearAndPowers","CharacterTileHeader","SoldierTileHeader","cost","SoldierComponent","CrewSizeComponent","externalStyles","virtualCrewSize","title","TreasuryComponent","virtualCredits","listOfSoldiers","SoldierList","SoldierSelectionComponent","soldiers","setSoldiers","previewSoldier","setPreviewSoldier","lastPreviewSoldier","setLastPreviewSoldier","getCurrentSoldierAmount","soldierCount","specialistCount","group","Specialist","specialist","hiringCost","canSubmit","height","sum","sol","soldiersOfType","soldierIdx","paddingTop","e","SoldierSelectionPage","CharacterInjuries","missNextGame","CharacterComponent","AdvanceComponent","paddingLeft","FileComponent","ShipnameComponent","StatusbarComponent","flex","CrewPage","myStorage","localStorage","areEqual","restFirstItem","every","val","restVal","JSON","stringify","setItem","sold","y","FileOperationsPage","fileName","borderTop","anchor","createElement","body","appendChild","json","blob","Blob","url","window","URL","createObjectURL","href","download","click","revokeObjectURL","removeChild","paddingBottom","FileSystemPage","selectedStorage","setSelectedStorage","isStorageSelected","htmlFor","marginBottom","accept","reader","FileReader","onload","ev","parse","result","readAsText","querySelector","files","values","stateString","colSpan","getStorageTable","removeItem","LandingPage","Crew","PrintablePowerCards","printAll","printablePowers","renderHeader","border","margin","marginLeft","renderCrewmanHeader","crewman","renderPowers","gridTemplateColumns","clear","grid","renderCharacterStats","minWidth","renderCrewStats","PdfCharacter","PdfSoldier","PdfCharacters","PdfSoldiers","PdfRenderer","StorageSheet","Square","checked","Squares","from","PrintableQuickReference","PdfExportPage","printCheatSheet","setPrintCheatSheet","printPowerCards","setPrintPowerCards","exportPdf","jsPdf","jsPDF","container","querySelectorAll","addPage","html2canvas","scale","letterRendering","canvas","addImage","toDataURL","internal","pageSize","getWidth","getHeight","save","borderLeft","TransactionHistoryPage","XPDropDown","LevelUpPage","captainLevels","setCaptainLevels","firstMateLevels","setfirstMateLevels","deciChoice","setDeciChoice","setX","setY","getCaptainLevels","getFirstMateLevels","difference","experienceAvailable","min","floor","nr","renderImprovements","lvl","nodes","parseInt","flexDirection","choice","ExperiencePage","crewMemberDied","setCrewMemberDied","lootUnlocked","setLootUnlocked","powerActivations","setPowerActivations","rivalsKilled","setRivalsKilled","npcsKilled","setNPCsKilled","scenarioSpecific","setScenarioSpecific","getTotalXp","opacity","answer","SelectNewPowers","currentPowers","updatePowers","selectedPower","setSelectedPower","some","LevelUpCharacterPage","pageState","levelsGained","newPower","setNewPower","improvedStats","captainStats","forEach","sel","actualAdvances","currentLevel","advances","advance","foundAdvance","adv","LevelImprovement","foundIdx","statMaxed","renderLevelImprovements","renderNodes","renderPowerChoice","renderStatsChoice","renderAdvances","allDone","allDoneFn","LevelUpCaptainPage","LevelUpFirstMatePage","CrewInjuries","PhysicalLoot","selectedCategory","setSelectedCategory","advTech","alienTech","advWeapons","isItemSelected","renderPhysicalLootSelection","flexWrap","AdvancedWeapons","AdvancedTech","AlienTech","tech","artefact","renderItems","LootPage","physicalLootTokensCollected","setPhysicalLootTokensCollected","dataLootTokensCollected","setDataLootTokensCollected","_el","PostGameSequencePage","crewUpdates","setCrewUpdates","renderInjuryAndDeathCharacter","char","RECOVERY","filteredList","ch","hasOwnProperty","change","updateCharacter","crewmember","updateCrewMan","deadSoldiers","update","DEAD","BARELY_ALIVE","WOUNDED","CLOSE_CALL","aftermath","AppContainer","connect","path","component","createStore","action","xpRecords","ReduxActions","transactionList","removalIdxs","currentSoldiers","index","splice","typeAmount","fil","compose","devToolsExtension","f","ReactDOM","StrictMode"],"mappings":"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","file":"static/js/main.0a03c825.chunk.js","sourcesContent":["export enum BackgroundEnum {\r\n    Biomorph = \"Biomorph\",\r\n    Cyborg = \"Cyborg\",\r\n    Mystic = \"Mystic\",\r\n    Psionicist = \"Psionicist\",\r\n    RoboticsExpert = \"RoboticsExpert\",\r\n    Rogue = \"Rogue\",\r\n    Tekker = \"Tekker\",\r\n    Veteran = \"Veteran\",\r\n}\r\n\r\nexport enum PowerCategory {\r\n    LineOfSight = \"Line of Sight\",\r\n    Touch = \"Touch\",\r\n    SelfOnly = \"Self-only\",\r\n    OutOfGameA = \"Out of Game (A)\",\r\n    OutOfGameB = \"Out of Game (B)\",\r\n}\r\nexport enum StatsEnum {\r\n    Move = \"Move\",\r\n    Fight = \"Fight\",\r\n    Shoot = \"Shoot\",\r\n    Armour = \"Armour\",\r\n    Will = \"Will\",\r\n    Health = \"Health\",\r\n}\r\n\r\nexport enum CharactersEnum {\r\n    Captain = \"Captain\",\r\n    FirstMate = \"FirstMate\",\r\n}\r\n\r\nexport enum SoldierEnum {\r\n    Burner = \"Burner\",\r\n    Grenadier = \"Grenadier\",\r\n    Sniper = \"Sniper\",\r\n    GuardDog = \"Guard Dog\",\r\n    Casecracker = \"Casecracker\",\r\n    Gunner = \"Gunner\",\r\n    Codebreaker = \"Codebreaker\",\r\n    Medic = \"Medic\",\r\n    Pathfinder = \"Pathfinder\",\r\n    ArmouredTrooper = \"Armoured Trooper\",\r\n    Recruit = \"Recruit\",\r\n    Runner = \"Runner\",\r\n    Commando = \"Commando\",\r\n    Trooper = \"Trooper\",\r\n    Hacker = \"Hacker\",\r\n    Chiseler = \"Chiseler\",\r\n    Sentry = \"Sentry\",\r\n}\r\n\r\nexport enum SoldierGroups {\r\n    Standard = \"Standard\",\r\n    Specialist = \"Specialist\",\r\n}\r\nexport interface Background {\r\n    name: string;\r\n    powers: Power[];\r\n}\r\n\r\nexport type Stats = { [key in StatsEnum]: number; };\r\nexport type StatStrings = { [key in StatsEnum]: string; };\r\nexport interface BackgroundMetadata {\r\n    name: string;\r\n    statModifications: {\r\n        mandatory: Partial<Stats>;\r\n        optional: Partial<Stats>;\r\n        chooseOptionals: number;\r\n    };\r\n    corePowers: string[];\r\n    description: string;\r\n}\r\n\r\nexport interface BackgroundModifications {\r\n    name: BackgroundEnum;\r\n    statModifications: StatsImprovements;\r\n    powers: Power[];\r\n}\r\n\r\nexport interface BackgroundOptions {\r\n    name: BackgroundEnum;\r\n    statModifications: {\r\n        mandatory: Partial<Stats>;\r\n        optional: Partial<Stats>;\r\n        chooseOptionals: number;\r\n    };\r\n    corePowers: string[];\r\n    description: string;\r\n}\r\n\r\nexport interface StatsImprovements {\r\n    mandatory: Partial<Stats>;\r\n    optional: Partial<Stats>;\r\n}\r\n\r\nexport interface Power {\r\n    name: string;\r\n    activation: number;\r\n    strain: number;\r\n    category: string | string[];\r\n    effect: string;\r\n}\r\n\r\nexport interface ModifiedPower {\r\n    name: string;\r\n    activation: number;\r\n}\r\n\r\nexport interface ModifiedGear {\r\n    name: string;\r\n    gearSlots: number;\r\n}\r\nexport interface Gear extends ModifiedGear {\r\n    type: string;\r\n    notes?: string;\r\n    damageModifier?: number;\r\n    maxRange?: string | number;\r\n    armourModifier?: number;\r\n}\r\nexport interface AdvancedWeapons extends ModifiedGear {\r\n    type: string;\r\n    notes?: string;\r\n    damageModifier?: number;\r\n    maxRange?: string | number;\r\n    armourModifier?: number;\r\n    cost: number;\r\n    sell: number;\r\n}\r\nexport interface AdvancedTech extends ModifiedGear {\r\n    type: string;\r\n    notes?: string;\r\n    damageModifier?: number;\r\n    maxRange?: string | number;\r\n    armourModifier?: number;\r\n    cost: number;\r\n    sell: number;\r\n    shipGear?: boolean;\r\n    characterOnly?: boolean;\r\n}\r\nexport interface Character {\r\n    name: string;\r\n    stats: Stats;\r\n    level: number;\r\n    gearSlots: number;\r\n    type: string;\r\n    background?: string;\r\n    powers: ModifiedPower[];\r\n    gear: ModifiedGear[];\r\n    missNextGame?: boolean;\r\n    currentHealth?: number;\r\n}\r\n\r\nexport interface Soldier {\r\n    type: string;\r\n    stats: Stats;\r\n    cost: number;\r\n    gearSlots: number;\r\n    gear: string[];\r\n    group: SoldierGroups;\r\n    amount: number;\r\n    id: number;\r\n    currentHealth?: number;\r\n}\r\n\r\nexport interface SoldierMetadata {\r\n    type: string;\r\n    cost: number;\r\n    stats: Stats;\r\n    gear: string[];\r\n    group: SoldierGroups;\r\n}\r\n\r\nexport interface CharacterMetadata {\r\n    stats: Stats;\r\n    level: number;\r\n    gearSlots: number;\r\n    type: string;\r\n}\r\nexport interface Transaction {\r\n    credits: number;\r\n    sign: boolean;\r\n    record: string;\r\n}\r\nexport interface CrewState {\r\n    Credits: number;\r\n    Captain: Character;\r\n    FirstMate: Character;\r\n    Soldiers: Soldier[];\r\n    ShipName: string;\r\n    Experience: number;\r\n    ExperienceRecords: number[];\r\n    CreditRecords: Transaction[];\r\n    ShipsHold: any[];\r\n}\r\n\r\nexport const InitialCrewState: CrewState = {\r\n    Credits: 400,\r\n    Soldiers: [],\r\n    ShipName: \"\",\r\n    Captain: { name: \"\", level: 15, stats: { Move: 6, Fight: 3, Shoot: 2, Will: 3, Armour: 9, Health: 16 }, gearSlots: 6, type: CharactersEnum.Captain, powers: [], gear: [] },\r\n    FirstMate: { name: \"\", level: 0, stats: { Move: 6, Fight: 2, Shoot: 2, Will: 2, Armour: 9, Health: 14 }, gearSlots: 5, type: CharactersEnum.FirstMate, powers: [], gear: [] },\r\n    Experience: 0,\r\n    ExperienceRecords: [0],\r\n    CreditRecords: [{ credits: 400, sign: true, record: \"Initial Crew Treasury\" }],\r\n    ShipsHold: [],\r\n};\r\n\r\nexport enum LevelImprovements {\r\n    LowerActivation = \"Lower an Activation Number\",\r\n    ImproveStat = \"Improve a Stat\",\r\n    NewPower = \"Learn a new Power\",\r\n    NewPowerOrImproveStat = \"New Power or Improve Stat\",\r\n}\r\n\r\nexport interface LevelUpState {\r\n    captainLevels: number;\r\n    firstMateLevels: number;\r\n    choice?: LevelImprovements.NewPower | LevelImprovements.ImproveStat;\r\n}\r\n\r\nexport interface DropdownOptions {\r\n    placeholder: string | Gear;\r\n    id: string;\r\n}\r\n","import { useHistory } from \"react-router-dom\";\r\n\r\nexport const CustomBackButtonComponent = ({ dispatchFunction, customHistory }: { dispatchFunction(): void; customHistory?(): void }) => {\r\n\r\n    const history = useHistory();\r\n    return <button\r\n        onClick={(event) => {\r\n            dispatchFunction();\r\n            customHistory ? customHistory() : history.goBack();\r\n            event.preventDefault();\r\n            event.stopPropagation();\r\n        }}\r\n        className={\"dialog-btn back-btn\"}\r\n    >Back</button>;\r\n};\r\n","import { store } from \".\";\r\nimport * as BackgroundList from \"./data/Backgrounds.json\";\r\nimport * as GearItems from \"./data/Gear.json\";\r\nimport * as PowerList from \"./data/Powers.json\";\r\nimport { AdvancedTech, AdvancedWeapons, BackgroundEnum, BackgroundMetadata, BackgroundOptions, Character, CharactersEnum, Gear, LevelImprovements, ModifiedGear, ModifiedPower, Power, Soldier, Stats, StatsEnum, StatStrings } from \"./types\";\r\n\r\nconst allPowers: Power[] = PowerList.Powers;\r\nconst allBackgrounds: BackgroundMetadata[] = BackgroundList.backgrounds;\r\nconst allGear: Gear[] = GearItems.general;\r\nconst advancedWeapons: AdvancedWeapons[] = GearItems.advancedWeapons;\r\nconst advancedTech: AdvancedTech[] = GearItems.advancedTech;\r\nconst alienArtefacts = GearItems.alienTech;\r\n\r\nexport const getBackgroundInfos = (background: BackgroundEnum) => allBackgrounds.find((bg) => bg.name === background) as BackgroundOptions;\r\n\r\nexport const numberOfCrewMembers = () => {\r\n    const state = store.getState();\r\n    return (state.Soldiers.reduce((acc, soldier) => soldier.amount + acc, 0) || 0) + (state.Captain ? 1 : 0) + (state.FirstMate ? 1 : 0);\r\n};\r\n\r\nexport const numberOfSoldiers = () => {\r\n    const state = store.getState();\r\n    return state.Soldiers.reduce((acc, soldier) => soldier.amount + acc, 0);\r\n};\r\n\r\nexport const getCurrentStatStrings = (stats: Stats, currentHealth?: number): StatStrings => ({\r\n    [StatsEnum.Move]: stats.Move.toString(),\r\n    [StatsEnum.Fight]: `+${stats.Fight.toString()}`,\r\n    [StatsEnum.Shoot]: `+${stats.Shoot.toString()}`,\r\n    [StatsEnum.Armour]: stats.Armour.toString(),\r\n    [StatsEnum.Will]: `+${stats.Will.toString()}`,\r\n    [StatsEnum.Health]: currentHealth ? currentHealth.toString() : stats.Health.toString(),\r\n});\r\n\r\nexport const getPower = (name: string) => allPowers.find((power) => power.name === name) as Power;\r\n\r\nexport const getUnselectedPowers = (powerNames: ModifiedPower[]) => allPowers.filter((power) => !powerNames.some((pwr) => pwr.name === power.name));\r\n\r\nexport const getPowerInfos = (powerNames: string[]): Power[] => powerNames.map(getPower);\r\n\r\nconst getBackground = (name: string) => allBackgrounds.find((background) => background.name === name) as BackgroundMetadata;\r\n\r\nexport const isCorePower = (powerName: string, backgroundName: string) => !!getBackground(backgroundName).corePowers.find((power) => power === powerName);\r\n\r\nexport const isCaptain = (type: string) => type === CharactersEnum.Captain;\r\n\r\nexport const isCharacter = (crewMember: Character | Soldier): crewMember is Character => crewMember.type === CharactersEnum.Captain || crewMember.type === CharactersEnum.FirstMate;\r\n\r\nexport const getNonCorePowers = (backgroundName: string, isCaptainCharacter: boolean) =>\r\n    allPowers.filter((power) => !getBackground(backgroundName).corePowers.includes(power.name)).map((power) => isCaptainCharacter ? { ...power, activation: power.activation + 2 } : { ...power, activation: power.activation + 4 });\r\n\r\nexport const getStatsMaximums = () => ({ \"Move\": 7, \"Fight\": 6, \"Shoot\": 6, \"Will\": 8, \"Health\": 25, \"Armour\": 14 });\r\n\r\nexport const getGeneralGearDetails = (gearName: string | ModifiedGear) => {\r\n    const foundGear = allGear.find((gear) => (typeof (gearName) === \"string\" ? gearName : gearName.name) === gear.name) as Gear;\r\n    if (typeof (gearName) !== \"string\") {\r\n        foundGear.gearSlots = gearName.gearSlots;\r\n    }\r\n    return foundGear;\r\n};\r\n\r\nexport const getAdvancedWeapons = () => advancedWeapons;\r\nexport const getAdvancedTech = () => advancedTech;\r\nexport const getAlienArtefacts = () => alienArtefacts;\r\n\r\nexport const getGearByType = (gearType: string) => {\r\n    switch (gearType) {\r\n        case \"Armour\": return allGear.filter((gear) => gear.type === \"Armour\");\r\n        case \"Weapon\": return allGear.filter((gear) => gear.type === \"Weapon\");\r\n        case \"Equipment\": return allGear.filter((gear) => gear.type === \"Equipment\");\r\n    }\r\n};\r\n\r\nexport const getActualNotes = (gearList: Array<string | ModifiedGear>, gearItem: Gear) => {\r\n    let notes = gearItem.notes;\r\n    switch (gearItem.name) {\r\n        case \"Flamethrower\":\r\n            notes = gearList.find((gear: ModifiedGear | string) => (typeof (gear) === \"string\" ? gear : gear.name) === \"Heavy Armour\") || gearList.find((gear: ModifiedGear | string) => (typeof (gear) === \"string\" ? gear : gear.name) === \"Combat Armour\") ? \"Target Armour and Cover Modifiers\" : \"Target Armour and Cover Modifiers. -1 Move\";\r\n            break;\r\n        case \"Rapid Fire\":\r\n            notes = gearList.find((gear: ModifiedGear | string) => (typeof (gear) === \"string\" ? gear : gear.name) === \"Heavy Armour\") || gearList.find((gear: ModifiedGear | string) => (typeof (gear) === \"string\" ? gear : gear.name) === \"Combat Armour\") ? \"2 Targets\" : \"2 Targets. -1 Move\";\r\n            break;\r\n        case \"Combat Armour\":\r\n            notes = \"50gc upkeep fee\";\r\n    }\r\n    return notes || \"\";\r\n};\r\n\r\nexport const getStatsWithGear = (stats: Stats, updateStats: Partial<Stats>, gear: ModifiedGear[] | undefined): Stats => {\r\n    const updatedStatsByGear = gear ? gear.reduce((updatedStatsWithGear, gearItem) => {\r\n        switch (gearItem.name) {\r\n            case \"Light Armour\": updatedStatsWithGear.Armour = 1; break;\r\n            case \"Heavy Armour\":\r\n                updatedStatsWithGear.Armour = 2;\r\n                updatedStatsWithGear.Move = -1;\r\n                break;\r\n            case \"Combat Armour\":\r\n                updatedStatsWithGear.Armour = 4;\r\n                break;\r\n            case \"Unarmed\":\r\n                updatedStatsWithGear.Fight = -2;\r\n                break;\r\n            case \"Flamethrower\":\r\n            case \"Rapid Fire\":\r\n                if (!gear.find((item) => item.name === \"Heavy Armour\") && !gear.find((item) => item.name === \"Combat Armour\")) {\r\n                    updatedStatsWithGear.Move = -1;\r\n                }\r\n        }\r\n        return updatedStatsWithGear;\r\n    }, { \"Move\": 0, \"Fight\": 0, \"Shoot\": 0, \"Armour\": 0, \"Will\": 0, \"Health\": 0 }) : { \"Move\": 0, \"Fight\": 0, \"Shoot\": 0, \"Armour\": 0, \"Will\": 0, \"Health\": 0 };\r\n\r\n    return Object.keys(stats).reduce(\r\n        (acc, stat) => ({ ...acc, [stat]: (stats[stat as StatsEnum] || 0) + (updateStats[stat as StatsEnum] || 0) + (updatedStatsByGear[stat as StatsEnum] || 0) }),\r\n        { \"Move\": 0, \"Fight\": 0, \"Shoot\": 0, \"Armour\": 0, \"Will\": 0, \"Health\": 0 });\r\n};\r\n\r\nexport const getDamageModifierString = (weapon: Gear) => {\r\n    if (!weapon.damageModifier) {\r\n        return \"+0\";\r\n    }\r\n    if (weapon.damageModifier > 0) {\r\n        return `+${weapon.damageModifier}`;\r\n    }\r\n\r\n    return `${weapon.damageModifier}`;\r\n};\r\n\r\nexport const gearSortAlgorithm = (gear: Gear) => {\r\n    let count = 0;\r\n    if (gear.type === \"Weapon\" || gear.type === \"Armour\") {\r\n        count += 1;\r\n    }\r\n    if (gear.name.length > 19) {\r\n        count += 0.4;\r\n    }\r\n    if (gear.notes) {\r\n        count += 1;\r\n        if (gear.notes.length > 40) {\r\n            count += 0.5;\r\n        }\r\n    }\r\n    return count;\r\n};\r\n\r\nexport const getAdvancePerLevel = (level: number) => {\r\n    const rest = (level) % 10;\r\n    switch (rest) {\r\n        case 1:\r\n        case 3:\r\n        case 4:\r\n        case 6:\r\n        case 8:\r\n        case 9:\r\n            return LevelImprovements.LowerActivation;\r\n        case 2:\r\n        case 7:\r\n            return LevelImprovements.ImproveStat;\r\n        case 5:\r\n            return LevelImprovements.NewPower;\r\n        case 0:\r\n            return LevelImprovements.NewPowerOrImproveStat;\r\n        default:\r\n    }\r\n};\r\n\r\nexport const getBaseCaptain = (): Character => ({\r\n    name: \"\",\r\n    stats: {\r\n        \"Move\": 6,\r\n        \"Fight\": 3,\r\n        \"Shoot\": 2,\r\n        \"Armour\": 9,\r\n        \"Will\": 3,\r\n        \"Health\": 16,\r\n    },\r\n    level: 15,\r\n    gearSlots: 6,\r\n    type: CharactersEnum.Captain,\r\n    powers: [],\r\n    gear: [],\r\n});\r\n\r\nexport const getBaseFirstMate = (): Character => ({\r\n    name: \"\",\r\n    stats: {\r\n        \"Move\": 6,\r\n        \"Fight\": 2,\r\n        \"Shoot\": 2,\r\n        \"Armour\": 9,\r\n        \"Will\": 2,\r\n        \"Health\": 14,\r\n    },\r\n    level: 0,\r\n    gearSlots: 5,\r\n    type: CharactersEnum.FirstMate,\r\n    powers: [],\r\n    gear: [],\r\n});\r\n","import React from \"react\";\r\nimport { Character, Soldier, Stats, StatsEnum } from \"../types\";\r\nimport { getBaseCaptain, getBaseFirstMate, getCurrentStatStrings, isCaptain, isCharacter } from \"../Utils\";\r\n\r\nexport const StatsRenderer = ({ stats, member }: { stats: Stats; member: Character | Soldier }) => {\r\n    const currentStats = Object.entries(getCurrentStatStrings(stats, member.currentHealth));\r\n    const cells: JSX.Element[] = [];\r\n    for (const [key, value] of currentStats) {\r\n        cells.push(<td\r\n            className={\r\n                isCharacter(member) && stats[key as StatsEnum] !== (isCaptain(member.type) ?\r\n                    getBaseCaptain() : getBaseFirstMate()).stats[key as StatsEnum] ? \"improved-stat\" : \"\"\r\n            }\r\n            key={`add_dialog_${isCharacter(member) ? member.name : member.type}_stat_${key}`\r\n            }>\r\n            {value}\r\n        </td>);\r\n    }\r\n    return <React.Fragment>{cells}</React.Fragment>;\r\n};\r\n","import { Character, Soldier, StatsEnum } from \"../types\";\r\nimport { getStatsWithGear } from \"../Utils\";\r\nimport { StatsRenderer } from \"./StatsRenderer\";\r\n\r\nexport const CharacterStatusBarTable = ({ character, gearSlotsUsed, isTileTable }: { character: Character; gearSlotsUsed: number; isTileTable?: boolean }) =>\r\n    <table className={isTileTable ? \"character-tile-table\" : \"character-statusbar-table\"}>\r\n        <colgroup>\r\n            <col style={{ width: \"14%\" }} />\r\n            <col style={{ width: \"14%\" }} />\r\n            <col style={{ width: \"14%\" }} />\r\n            <col style={{ width: \"14%\" }} />\r\n            <col style={{ width: \"14%\" }} />\r\n            <col style={{ width: \"14%\" }} />\r\n            <col style={{ width: \"14%\" }} />\r\n        </colgroup>\r\n        <thead>\r\n            <tr className={isTileTable ? \"small-text centered-text\" : \"small-text\"}>\r\n                {Object.keys(StatsEnum).map((stat) => <td key={`add_dialog__stat_header_${stat}`}>{stat}</td>)}\r\n                <td key={\"add_dialog_stat_header_gear\"}>Gear</td>\r\n            </tr>\r\n        </thead>\r\n        <tbody>\r\n            <tr className={isTileTable ? \"centered-text\" : \"\"}>\r\n                <StatsRenderer member={character} stats={getStatsWithGear(character.stats, {}, character.gear)} />\r\n                <td>{`${gearSlotsUsed}/${character.gearSlots}`}</td>\r\n            </tr>\r\n        </tbody>\r\n    </table>;\r\n\r\nexport const SoldierStatusBarTable = ({ soldier, gearSlotsUsed, isTileTable }: { soldier: Soldier; gearSlotsUsed: number; isTileTable?: boolean }) =>\r\n    <table className={isTileTable ? \"character-tile-table\" : \"character-statusbar-table\"}>\r\n        <colgroup>\r\n            <col style={{ width: \"14%\" }} />\r\n            <col style={{ width: \"14%\" }} />\r\n            <col style={{ width: \"14%\" }} />\r\n            <col style={{ width: \"14%\" }} />\r\n            <col style={{ width: \"14%\" }} />\r\n            <col style={{ width: \"14%\" }} />\r\n            <col style={{ width: \"14%\" }} />\r\n        </colgroup>\r\n        <thead>\r\n            <tr className={isTileTable ? \"small-text centered-text\" : \"small-text\"}>\r\n                {Object.keys(StatsEnum).map((stat) => <td key={`add_dialog__stat_header_${stat}`}>{stat}</td>)}\r\n                <td key={\"add_dialog_stat_header_gear\"}>Gear</td>\r\n            </tr>\r\n        </thead>\r\n        <tbody>\r\n            <tr className={isTileTable ? \"centered-text\" : \"\"}>\r\n                <StatsRenderer member={soldier} stats={soldier.stats} />\r\n                <td>{`${gearSlotsUsed}/1`}</td>\r\n            </tr>\r\n        </tbody>\r\n    </table>;\r\n","import { useContext } from \"react\";\r\nimport { ReactReduxContext } from \"react-redux\";\r\nimport { CharactersEnum, CrewState } from \"../../types\";\r\nimport { CharacterStatusBarTable } from \"../CharacterStatusBarTable\";\r\n\r\nexport const CharacterStatsHeader = ({ characterType, gearSlots }: { characterType: CharactersEnum; gearSlots?: number }) => {\r\n    const { store } = useContext(ReactReduxContext);\r\n    const state = store.getState() as CrewState;\r\n    const character = characterType === CharactersEnum.Captain ? state.Captain : state.FirstMate;\r\n    return <div key=\"statusbar\" id=\"statusbar\" className=\"statusbar\" >\r\n        <div className=\"statusbar-tiles\" style={{ display: \"block\", float: \"none\" }}>{`${characterType === CharactersEnum.Captain ? \"Cpt.\" : \"Ltn.\"} ${character.name}` || \"Unnamed Character\"}</div>\r\n        <CharacterStatusBarTable\r\n            character={character}\r\n            gearSlotsUsed={gearSlots || character.gear?.reduce((acc, gearItem) => acc + gearItem.gearSlots, 0) || 0} />\r\n    </div>;\r\n};\r\n","export default __webpack_public_path__ + \"static/media/Biomorph.30852fce.png\";","export default __webpack_public_path__ + \"static/media/CreateCrew.aa96e00e.png\";","export default __webpack_public_path__ + \"static/media/Cyborg.1d6e41d1.png\";","export default __webpack_public_path__ + \"static/media/Add.94030173.png\";","export default __webpack_public_path__ + \"static/media/Crew.517fe591.png\";","export default __webpack_public_path__ + \"static/media/Captain.95237b5a.png\";","export default __webpack_public_path__ + \"static/media/Minus.d38fdb57.png\";","export default __webpack_public_path__ + \"static/media/Delete.17e835d8.png\";","export default __webpack_public_path__ + \"static/media/Info.9c4331cd.png\";","export default __webpack_public_path__ + \"static/media/Save.62c16956.png\";","export default __webpack_public_path__ + \"static/media/SavePdf.2060f485.png\";","export default __webpack_public_path__ + \"static/media/Treasury.94a0facb.png\";","export default __webpack_public_path__ + \"static/media/ImportCrew.e5abae4c.png\";","export default __webpack_public_path__ + \"static/media/Mystic.41443507.png\";","export default __webpack_public_path__ + \"static/media/PostGame.021b5206.png\";","export default __webpack_public_path__ + \"static/media/Psionicist.3e8db9d2.png\";","export default __webpack_public_path__ + \"static/media/Stargrave_Reference-1.19c89dcc.png\";","export default __webpack_public_path__ + \"static/media/Stargrave_Reference-2.ede3e341.png\";","export default __webpack_public_path__ + \"static/media/RoboticsExpert.62afca10.png\";","export default __webpack_public_path__ + \"static/media/Rogue.67294730.png\";","export default __webpack_public_path__ + \"static/media/ArmouredTrooper.47e7ee5c.png\";","export default __webpack_public_path__ + \"static/media/Burner.5074a0f0.png\";","export default __webpack_public_path__ + \"static/media/Casecracker.abae2ba0.png\";","export default __webpack_public_path__ + \"static/media/Chiseler.d137b278.png\";","export default __webpack_public_path__ + \"static/media/Codebreaker.9302a5e3.png\";","export default __webpack_public_path__ + \"static/media/Commando.9132f9b1.png\";","export default __webpack_public_path__ + \"static/media/Grenadier.f2ee0436.png\";","export default __webpack_public_path__ + \"static/media/GuardDog.eff5a8b3.png\";","export default __webpack_public_path__ + \"static/media/Gunner.a4b8a36f.png\";","export default __webpack_public_path__ + \"static/media/Hacker.de209c8c.png\";","export default __webpack_public_path__ + \"static/media/Medic.e34105fc.png\";","export default __webpack_public_path__ + \"static/media/Pathfinder.7a315f4e.png\";","export default __webpack_public_path__ + \"static/media/Recruit.99efe4a8.png\";","export default __webpack_public_path__ + \"static/media/Runner.b629c18a.png\";","export default __webpack_public_path__ + \"static/media/Sentry.208deaab.png\";","export default __webpack_public_path__ + \"static/media/Sniper.e17677ee.png\";","export default __webpack_public_path__ + \"static/media/Trooper.77aded42.png\";","export default __webpack_public_path__ + \"static/media/Starship.2d00d62f.png\";","export default __webpack_public_path__ + \"static/media/Tekker.9c3b86f0.png\";","export default __webpack_public_path__ + \"static/media/Unknown.c12505bd.png\";","export default __webpack_public_path__ + \"static/media/UseSample.3dd4980b.png\";","export default __webpack_public_path__ + \"static/media/Veteran.9d33839f.png\";","import { BackgroundEnum, SoldierEnum } from \"../types\";\r\nimport BiomorphPng from \"./Biomorph.png\";\r\nimport CreateCrewPng from \"./CreateCrew.png\";\r\nimport CyborgPng from \"./Cyborg.png\";\r\nimport AddPng from \"./icons/Add.png\";\r\nimport CaptainPng from \"./icons/Captain.png\";\r\nimport CreditsPng from \"./icons/Credits.png\";\r\nimport CrewPng from \"./icons/Crew.png\";\r\nimport DeletePng from \"./icons/Delete.png\";\r\nimport ExitPng from \"./icons/Exit.png\";\r\nimport InfoPng from \"./icons/Info.png\";\r\nimport LeavePng from \"./icons/Leave.png\";\r\nimport MinusPng from \"./icons/Minus.png\";\r\nimport SavePng from \"./icons/Save.png\";\r\nimport PdfPng from \"./icons/SavePdf.png\";\r\nimport TreasuryPng from \"./icons/Treasury.png\";\r\nimport ImportCrewPng from \"./ImportCrew.png\";\r\nimport MysticPng from \"./Mystic.png\";\r\nimport PostGamePng from \"./PostGame.png\";\r\nimport PsionicistPng from \"./Psionicist.png\";\r\nimport QuickReferenceSheet1Png from \"./resources/Stargrave_Reference-1.png\";\r\nimport QuickReferenceSheet2Png from \"./resources/Stargrave_Reference-2.png\";\r\nimport RoboticsExpertPng from \"./RoboticsExpert.png\";\r\nimport RoguePng from \"./Rogue.png\";\r\nimport ArmouredTrooperPng from \"./soldiers/ArmouredTrooper.png\";\r\nimport BurnerPng from \"./soldiers/Burner.png\";\r\nimport CasecrackerPng from \"./soldiers/Casecracker.png\";\r\nimport ChiselerPng from \"./soldiers/Chiseler.png\";\r\nimport CodebreakerPng from \"./soldiers/Codebreaker.png\";\r\nimport CommandoPng from \"./soldiers/Commando.png\";\r\nimport GrenadierPng from \"./soldiers/Grenadier.png\";\r\nimport GuardDogPng from \"./soldiers/GuardDog.png\";\r\nimport GunnerPng from \"./soldiers/Gunner.png\";\r\nimport HackerPng from \"./soldiers/Hacker.png\";\r\nimport MedicPng from \"./soldiers/Medic.png\";\r\nimport PathfinderPng from \"./soldiers/Pathfinder.png\";\r\nimport RecruitPng from \"./soldiers/Recruit.png\";\r\nimport RunnerPng from \"./soldiers/Runner.png\";\r\nimport SentryPng from \"./soldiers/Sentry.png\";\r\nimport SniperPng from \"./soldiers/Sniper.png\";\r\nimport TrooperPng from \"./soldiers/Trooper.png\";\r\nimport StarshipPng from \"./Starship.png\";\r\nimport TekkerPng from \"./Tekker.png\";\r\nimport UnknownPng from \"./Unknown.png\";\r\nimport UseSamplePng from \"./UseSample.png\";\r\nimport VeteranPng from \"./Veteran.png\";\r\n\r\nexport const QuickReferenceSheet1 = QuickReferenceSheet1Png;\r\nexport const QuickReferenceSheet2 = QuickReferenceSheet2Png;\r\nexport const CyborgIcon = CyborgPng;\r\nexport const BiomorphIcon = BiomorphPng;\r\nexport const MysticIcon = MysticPng;\r\nexport const PsionicistIcon = PsionicistPng;\r\nexport const RoboticsExpertIcon = RoboticsExpertPng;\r\nexport const RogueIcon = RoguePng;\r\nexport const StarshipIcon = StarshipPng;\r\nexport const TekkerIcon = TekkerPng;\r\nexport const VeteranIcon = VeteranPng;\r\n\r\nexport const BurnerIcon = BurnerPng;\r\nexport const GrenadierIcon = GrenadierPng;\r\nexport const SniperIcon = SniperPng;\r\nexport const CodebreakerIcon = CodebreakerPng;\r\nexport const GuardDogIcon = GuardDogPng;\r\nexport const CasecrackerIcon = CasecrackerPng;\r\nexport const GunnerIcon = GunnerPng;\r\nexport const MedicIcon = MedicPng;\r\nexport const PathfinderIcon = PathfinderPng;\r\nexport const ArmouredTrooperIcon = ArmouredTrooperPng;\r\nexport const RecruitIcon = RecruitPng;\r\nexport const RunnerIcon = RunnerPng;\r\nexport const SentryIcon = SentryPng;\r\nexport const TrooperIcon = TrooperPng;\r\nexport const HackerIcon = HackerPng;\r\nexport const ChiselerIcon = ChiselerPng;\r\nexport const CommandoIcon = CommandoPng;\r\n\r\nexport const getBackgroundImage = (background: string | undefined) => {\r\n    switch (background) {\r\n        case BackgroundEnum.Biomorph: return BiomorphIcon;\r\n        case BackgroundEnum.Cyborg: return CyborgIcon;\r\n        case BackgroundEnum.Mystic: return MysticIcon;\r\n        case BackgroundEnum.Psionicist: return PsionicistIcon;\r\n        case BackgroundEnum.RoboticsExpert: return RoboticsExpertIcon;\r\n        case BackgroundEnum.Rogue: return RogueIcon;\r\n        case BackgroundEnum.Tekker: return TekkerIcon;\r\n        case BackgroundEnum.Veteran: return VeteranIcon;\r\n        default:\r\n            return UnknownPng;\r\n    }\r\n};\r\n\r\nexport const getSoldierImage = (soldierType: string) => {\r\n    switch (soldierType) {\r\n        case SoldierEnum.Burner: return BurnerIcon;\r\n        case SoldierEnum.Grenadier: return GrenadierIcon;\r\n        case SoldierEnum.Sniper: return SniperIcon;\r\n        case SoldierEnum.Casecracker: return CasecrackerIcon;\r\n        case SoldierEnum.Codebreaker: return CodebreakerIcon;\r\n        case SoldierEnum.GuardDog: return GuardDogIcon;\r\n        case SoldierEnum.Gunner: return GunnerIcon;\r\n        case SoldierEnum.Medic: return MedicIcon;\r\n        case SoldierEnum.Pathfinder: return PathfinderIcon;\r\n        case SoldierEnum.ArmouredTrooper: return ArmouredTrooperIcon;\r\n        case SoldierEnum.Recruit: return RecruitIcon;\r\n        case SoldierEnum.Runner: return RunnerIcon;\r\n        case SoldierEnum.Sentry: return SentryIcon;\r\n        case SoldierEnum.Trooper: return TrooperIcon;\r\n        case SoldierEnum.Hacker: return HackerIcon;\r\n        case SoldierEnum.Chiseler: return ChiselerIcon;\r\n        case SoldierEnum.Commando: return CommandoIcon;\r\n        default:\r\n            return UnknownPng;\r\n    }\r\n};\r\n\r\nexport const CaptainIcon = CaptainPng;\r\nexport const UseSampleIcon = UseSamplePng;\r\nexport const CreateCrewIcon = CreateCrewPng;\r\nexport const ImportCrewIcon = ImportCrewPng;\r\nexport const CreditsIcon = CreditsPng;\r\nexport const TreasuryIcon = TreasuryPng;\r\nexport const CrewIcon = CrewPng;\r\nexport const LeaveIcon = LeavePng;\r\nexport const AddIcon = AddPng;\r\nexport const SaveIcon = SavePng;\r\nexport const ExitIcon = ExitPng;\r\nexport const InfoIcon = InfoPng;\r\nexport const MinusIcon = MinusPng;\r\nexport const PdfIcon = PdfPng;\r\nexport const DeleteItemIcon = DeletePng;\r\nexport const PostGameIcon = PostGamePng;\r\n","import { BackgroundEnum, Character, CrewState, ModifiedGear, Power, Soldier, Stats } from \"../types\";\r\n\r\nexport const ADD_XP = \"ADD_XP\";\r\nexport const ADD_LOOT = \"ADD_LOOT\";\r\nexport const SPEND_XP = \"SPEND_XP\";\r\nexport const REWIND_XP = \"REWIND_XP\";\r\nexport const ADD_SOLDIERS = \"ADD_SOLDIERS\";\r\nexport const SET_CAPTAINS_NAME = \"SET_CAPTAINS_NAME\";\r\nexport const SET_CAPTAINS_BACKGROUND = \"SET_CAPTAINS_BACKGROUND\";\r\nexport const SET_CAPTAINS_STATS = \"SET_CAPTAINS_STATS\";\r\nexport const SET_CAPTAINS_POWERS = \"SET_CAPTAINS_POWERS\";\r\nexport const SET_CAPTAINS_GEAR = \"SET_CAPTAINS_GEAR\";\r\nexport const SET_FIRSTMATE_NAME = \"SET_FIRSTMATE_NAME\";\r\nexport const SET_FIRSTMATE_BACKGROUND = \"SET_FIRSTMATE_BACKGROUND\";\r\nexport const SET_FIRSTMATE_GEAR = \"SET_FIRSTMATE_GEAR\";\r\nexport const SET_FIRSTMATE_STATS = \"SET_FIRSTMATE_STATS\";\r\nexport const SET_FIRSTMATE_POWERS = \"SET_FIRSTMATE_POWERS\";\r\nexport const SET_FIRST_MATE = \"SET_FIRST_MATE\";\r\nexport const SET_CAPTAIN = \"SET_CAPTAIN\";\r\nexport const SET_CREW = \"SET_CREW\";\r\nexport const SET_SHIPNAME = \"SET_SHIPNAME\";\r\nexport const MODIFY_SOLDIER = \"MODIFY_SOLDIER\";\r\nexport const REMOVE_SOLDIERS = \"REMOVE_SOLDIERS\";\r\ninterface SetCrew {\r\n    type: typeof SET_CREW;\r\n    payload: CrewState;\r\n}\r\n\r\ninterface AddXp {\r\n    type: typeof ADD_XP;\r\n    payload: number;\r\n}\r\n\r\ninterface SpendXp {\r\n    type: typeof SPEND_XP;\r\n    payload: number;\r\n}\r\n\r\ninterface RewindXp {\r\n    type: typeof REWIND_XP;\r\n}\r\n\r\ninterface SetCrewName {\r\n    type: typeof SET_SHIPNAME;\r\n    payload: string;\r\n}\r\n\r\ninterface SetCaptainsName {\r\n    type: typeof SET_CAPTAINS_NAME;\r\n    payload: string;\r\n}\r\n\r\ninterface SetFirstMateName {\r\n    type: typeof SET_FIRSTMATE_NAME;\r\n    payload: string;\r\n}\r\ninterface SetFirstMateBackground {\r\n    type: typeof SET_FIRSTMATE_BACKGROUND;\r\n    payload: BackgroundEnum | undefined;\r\n}\r\ninterface SetCaptainsBackground {\r\n    type: typeof SET_CAPTAINS_BACKGROUND;\r\n    payload: BackgroundEnum | undefined;\r\n}\r\ninterface SetCaptainsPowers {\r\n    type: typeof SET_CAPTAINS_POWERS;\r\n    payload: Power[];\r\n}\r\n\r\ninterface SetCaptainsGear {\r\n    type: typeof SET_CAPTAINS_GEAR;\r\n    payload: ModifiedGear[];\r\n}\r\n\r\ninterface SetFirstMateGear {\r\n    type: typeof SET_FIRSTMATE_GEAR;\r\n    payload: ModifiedGear[];\r\n}\r\n\r\ninterface SetFirstMatePowers {\r\n    type: typeof SET_FIRSTMATE_POWERS;\r\n    payload: Power[];\r\n}\r\n\r\ninterface SetCaptainsStats {\r\n    type: typeof SET_CAPTAINS_STATS;\r\n    payload: Stats;\r\n}\r\n\r\ninterface SetFirstMateStats {\r\n    type: typeof SET_FIRSTMATE_STATS;\r\n    payload: Stats;\r\n}\r\ninterface SetCaptain {\r\n    type: typeof SET_CAPTAIN;\r\n    payload: Character;\r\n}\r\n\r\ninterface SetFirstMate {\r\n    type: typeof SET_FIRST_MATE;\r\n    payload: Character;\r\n}\r\n\r\ninterface AddSoldiers {\r\n    type: typeof ADD_SOLDIERS;\r\n    payload: Soldier[];\r\n}\r\n\r\ninterface ModifySoldier {\r\n    type: typeof MODIFY_SOLDIER;\r\n    payload: Soldier;\r\n}\r\ninterface RemoveSoldiers {\r\n    type: typeof REMOVE_SOLDIERS;\r\n    payload: Soldier[];\r\n}\r\n\r\ninterface AddLoot {\r\n    type: typeof ADD_LOOT;\r\n    payload: any[];\r\n}\r\n\r\nexport type Actions = AddLoot | AddSoldiers | AddXp | ModifySoldier | RemoveSoldiers |\r\n    RewindXp | SetCrew | SetCrewName | SetCaptainsBackground | SetCaptainsGear | SetCaptainsName | SetCaptainsPowers |\r\n    SetCaptainsStats | SetCaptain | SetFirstMate | SetFirstMateBackground | SetFirstMateGear | SetFirstMateStats | SetFirstMatePowers |\r\n    SetFirstMateName | SpendXp;\r\n","import React, { useState } from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { CustomBackButtonComponent } from \"../../components/common/CustomBackButton\";\r\nimport { CharacterStatsHeader } from \"../../components/statusbar/CharacterStatsHeader\";\r\nimport { getBackgroundImage } from \"../../images/index\";\r\nimport { SET_CAPTAINS_BACKGROUND, SET_CAPTAINS_NAME, SET_FIRSTMATE_BACKGROUND, SET_FIRSTMATE_NAME } from \"../../redux/actions\";\r\nimport { BackgroundEnum, CharactersEnum } from \"../../types\";\r\n\r\nexport const CharacterBackgroundPage = () => {\r\n    const history = useHistory();\r\n    const dispatch = useDispatch();\r\n    const characterType = history.location.state as CharactersEnum;\r\n    const [background, setBackground] = useState<BackgroundEnum | undefined>();\r\n    const renderBackgroundTile = (bg: BackgroundEnum) => <div\r\n        key={`add-character-${bg}`}\r\n        className={bg === background ? \"add-character-background selected\" : \"add-character-background\"}\r\n        onClick={() => setBackground(\r\n            bg === background ?\r\n                undefined : bg\r\n        )}>\r\n        <img className=\"add-character-background-icons\" src={getBackgroundImage(bg)} alt={`add-character-${bg}-icon`} />\r\n        <div className=\"large-text\">{`${bg}`}</div>\r\n    </div>;\r\n\r\n    return <React.Fragment>\r\n        <CharacterStatsHeader characterType={characterType} />\r\n        <div className=\"modal-header\">{`Select a background for your ${characterType === CharactersEnum.Captain ? CharactersEnum.Captain : \"First Mate\"}`}</div>\r\n        {Object.keys(BackgroundEnum).map((backgroundEnumEntry: string) => renderBackgroundTile(backgroundEnumEntry as BackgroundEnum))}\r\n        <button\r\n            onClick={() => {\r\n                if (background) {\r\n                    dispatch({ type: characterType === CharactersEnum.Captain ? SET_CAPTAINS_BACKGROUND : SET_FIRSTMATE_BACKGROUND, payload: background });\r\n                    history.push(\"/CharacterStatsSelection\", characterType);\r\n                }\r\n            }}\r\n            className={background ? \"dialog-btn confirm-btn\" : \"dialog-btn confirm-btn disabled\"}\r\n        >Confirm</button>\r\n        <CustomBackButtonComponent dispatchFunction={() => dispatch({ type: characterType === CharactersEnum.Captain ? SET_CAPTAINS_NAME : SET_FIRSTMATE_NAME, payload: \"\" })} />\r\n    </React.Fragment>;\r\n};\r\n","import { useEffect, useRef, useState } from \"react\";\r\n\r\nexport function useComponentVisible(initialIsVisible: boolean) {\r\n    const [isComponentVisible, setIsComponentVisible] = useState(initialIsVisible);\r\n    const ref = useRef<HTMLDivElement>(null);\r\n\r\n    const handleHideDropdown = (event: KeyboardEvent) => {\r\n        if (event.key === \"Escape\") {\r\n            setIsComponentVisible(false);\r\n        }\r\n    };\r\n\r\n    const handleClickOutside = (event: Event) => {\r\n        if (isComponentVisible) {\r\n            event.preventDefault();\r\n            event.stopPropagation();\r\n        }\r\n        if (ref.current && !ref.current.contains(event.target as Node)) {\r\n            setIsComponentVisible(false);\r\n        }\r\n    };\r\n\r\n    const openMenu = () => {\r\n        setIsComponentVisible(true);\r\n    };\r\n\r\n    useEffect(() => {\r\n        document.addEventListener(\"keydown\", handleHideDropdown, true);\r\n        document.addEventListener(\"click\", handleClickOutside, true);\r\n        return () => {\r\n            document.removeEventListener(\"keydown\", handleHideDropdown, true);\r\n            document.removeEventListener(\"click\", handleClickOutside, true);\r\n        };\r\n    });\r\n\r\n    return { ref, isComponentVisible, setIsComponentVisible, openMenu };\r\n}\r\n","import React, { useState } from \"react\";\r\nimport { DropdownOptions, Gear, ModifiedGear } from \"../../types\";\r\nimport { useComponentVisible } from \"../../UseComponentVisible\";\r\nimport { getActualNotes, getDamageModifierString, getGeneralGearDetails } from \"../../Utils\";\r\n\r\nconst GearLabel = ({ gear, gearList }: { gear: Gear; gearList: Array<ModifiedGear | string> }) =>\r\n    <React.Fragment>\r\n        <div className=\"emphasized\">{`${gear.name} ( ${gear.gearSlots} )`} </div>\r\n        {gear.type === \"Weapon\" ? <div style={{ fontSize: \"0.65rem\" }}>\r\n            {gear.maxRange === \"Melee\" || gear.maxRange === \"Template\" ? gear.maxRange : `Range: ${gear.maxRange}`} / {`${getDamageModifierString(gear)} dmg`}</div > :\r\n            gear.type === \"Armour\" ? <div style={{ fontSize: \"0.65rem\" }}> {`+${gear.armourModifier || 0} Armour ${getActualNotes(gearList, gear) ? \"/\" : \"\"} ${getActualNotes(gearList, gear)}`}</div> : null}\r\n        {gear.type === \"Armour\" ? null : < div style={{ fontSize: \"0.65rem\" }}> {getActualNotes(gearList, gear)} </div>}\r\n    </React.Fragment>;\r\n\r\nexport const GearDropDown = ({ list, dropdownOptions, callbackFn }: { list: Gear[]; dropdownOptions: DropdownOptions; callbackFn(item: string): void }) => {\r\n    const [selectedItem, setSelectedItem] = useState<Gear>(getGeneralGearDetails(dropdownOptions.placeholder));\r\n    const getCssProps = () => {\r\n        const position = document.getElementById(`dropdown-container-${dropdownOptions.id}`)?.getBoundingClientRect();\r\n        return { top: (position?.top || 0) + 42, left: (position?.left || 0), width: (position?.width || 0) };\r\n    };\r\n    const renderGearList = () => list.filter((item: Gear) => (item.name !== selectedItem.name)).map((listItem) =>\r\n        <div key={`dropdown-list-item-${dropdownOptions.id}-${listItem.name}`}\r\n            className=\"gear-selection dropdown-input dropdown-input-list\"\r\n            onMouseDown={() => {\r\n                setSelectedItem(listItem);\r\n                callbackFn(listItem.name);\r\n                setIsComponentVisible(false);\r\n            }}\r\n        >\r\n            <GearLabel gear={listItem} gearList={list} />\r\n        </div>\r\n    );\r\n    const { ref, isComponentVisible, setIsComponentVisible, openMenu } = useComponentVisible(false);\r\n    return <React.Fragment>\r\n        <div\r\n            className=\"gear-selection selected dropdown-input\"\r\n            onClick={openMenu}\r\n            id={`dropdown-container-${dropdownOptions.id}`}>\r\n            <GearLabel gear={getGeneralGearDetails(dropdownOptions.placeholder)} gearList={list} />\r\n        </div>\r\n        <div ref={ref}>\r\n            {isComponentVisible ?\r\n                <div style={getCssProps()} className=\"dropdown-portal\">\r\n                    {list.length > 0 ? renderGearList() : <div key={`dropdown-list-item-${dropdownOptions.id}-empty-list`} className=\"dropdown-empty-list\">No match found for search string. Please refine your search.</div>}\r\n                </div> : null}\r\n        </div>\r\n    </React.Fragment>;\r\n\r\n};\r\n","import React, { useState } from \"react\";\r\nimport { Carousel } from \"../../components/common/Carousel\";\r\nimport { getAdvancedTech, getAdvancedWeapons, getAlienArtefacts } from \"../../Utils\";\r\nenum Categories {\r\n    Credits = \"Credits\",\r\n    AdvancedTech = \"Advanced Technologies\",\r\n    AdvancedWeapons = \"Advanced Weapons\",\r\n    AlienTech = \"Alien Artefacts\",\r\n}\r\nexport const PhysicalLoot = () => {\r\n    const [selectedItem, setSelectedItem] = useState<string>(\"\");\r\n    const [selectedCategory, setSelectedCategory] = useState<Categories | undefined>(undefined);\r\n    const advTech = getAdvancedTech();\r\n    const alienTech = getAlienArtefacts();\r\n    const advWeapons = getAdvancedWeapons();\r\n    const isItemSelected = (name: string) => selectedItem === name;\r\n    const renderPhysicalLootSelection: JSX.Element = <div style={{ display: \"flex\", flexWrap: \"wrap\" }}>\r\n        <div className={selectedCategory === Categories.Credits ? \"loot-selection selected\" : \"loot-selection\"}\r\n            onClick={() => setSelectedCategory(Categories.Credits)}\r\n        >\r\n            {Categories.Credits}\r\n        </div>\r\n        <div className={selectedCategory === Categories.AdvancedWeapons ? \"loot-selection selected\" : \"loot-selection\"}\r\n            onClick={() => setSelectedCategory(Categories.AdvancedWeapons)}\r\n        >\r\n            {Categories.AdvancedWeapons}\r\n        </div>\r\n        <div className={selectedCategory === Categories.AdvancedTech ? \"loot-selection selected\" : \"loot-selection\"}\r\n            onClick={() => setSelectedCategory(Categories.AdvancedTech)}\r\n        >\r\n            {Categories.AdvancedTech}\r\n        </div>\r\n        <div className={selectedCategory === Categories.AlienTech ? \"loot-selection selected\" : \"loot-selection\"}\r\n            onClick={() => setSelectedCategory(Categories.AlienTech)}\r\n        >\r\n            {Categories.AlienTech}\r\n        </div>\r\n    </div>;\r\n    const renderItems = () => {\r\n        let renderedItems: JSX.Element;\r\n        switch (selectedCategory) {\r\n            case Categories.Credits:\r\n                return renderedItems = <div style={{ display: \"flex\", flexWrap: \"wrap\" }}>\r\n                    <div style={{ padding: \"1rem\", width: \"24%\" }} className={isItemSelected(\"75 \\xA5\") ? \"gear-selection selected\" : \"gear-selection\"} onClick={() => setSelectedItem(\"75 \\xA5\")}>{\"75 \\xA5\"}</div>\r\n                    <div style={{ padding: \"1rem\", width: \"24%\" }} className={isItemSelected(\"150 \\xA5\") ? \"gear-selection selected\" : \"gear-selection\"} onClick={() => setSelectedItem(\"150 \\xA5\")}>{\"150 \\xA5\"}</div>\r\n                    <div style={{ padding: \"1rem\", width: \"23%\" }} className={isItemSelected(\"200 \\xA5\") ? \"gear-selection selected\" : \"gear-selection\"} onClick={() => setSelectedItem(\"200 \\xA5\")}>{\"200 \\xA5\"}</div>\r\n                    <div style={{ padding: \"1rem\", width: \"24%\" }} className={isItemSelected(\"250 \\xA5\") ? \"gear-selection selected\" : \"gear-selection\"} onClick={() => setSelectedItem(\"250 \\xA5\")}>{\"250 \\xA5\"}</div>\r\n                    <div style={{ padding: \"1rem\", width: \"24%\" }} className={isItemSelected(\"300 \\xA5\") ? \"gear-selection selected\" : \"gear-selection\"} onClick={() => setSelectedItem(\"300 \\xA5\")}>{\"300 \\xA5\"}</div>\r\n                    <div style={{ padding: \"1rem\", width: \"23%\" }} className={isItemSelected(\"400 \\xA5\") ? \"gear-selection selected\" : \"gear-selection\"} onClick={() => setSelectedItem(\"400 \\xA5\")}>{\"400 \\xA5\"}</div>\r\n                </div>;\r\n            case Categories.AdvancedTech:\r\n                return renderedItems = <Carousel\r\n                    splitSize={10}\r\n                    inputDivs={advTech.map((tech) => <div className={isItemSelected(tech.name) ? \"gear-selection selected\" : \"gear-selection\"} onClick={() => setSelectedItem(tech.name)}>{tech.name}</div>)}\r\n                />;\r\n            case Categories.AdvancedWeapons:\r\n                return renderedItems = <Carousel\r\n                    splitSize={10}\r\n                    inputDivs={advWeapons.map((weapon) => <div className={isItemSelected(weapon.name) ? \"gear-selection selected\" : \"gear-selection\"} onClick={() => setSelectedItem(weapon.name)}>{weapon.name}</div>)}\r\n                />;\r\n            case Categories.AlienTech:\r\n                return renderedItems = <Carousel\r\n                    splitSize={10}\r\n                    inputDivs={alienTech.map((artefact) => <div className={isItemSelected(artefact.name) ? \"gear-selection selected\" : \"gear-selection\"} onClick={() => setSelectedItem(artefact.name)}>{artefact.name}</div>)}\r\n                />;\r\n        }\r\n    };\r\n    return <React.Fragment>\r\n        <div>Select the loot category:</div>\r\n        {renderPhysicalLootSelection}\r\n        <div>Select your loot item:</div>\r\n        {renderItems()}\r\n    </React.Fragment>;\r\n};\r\n","import React, { useContext, useState } from \"react\";\r\nimport { ReactReduxContext, useDispatch } from \"react-redux\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { CustomBackButtonComponent } from \"../../components/common/CustomBackButton\";\r\nimport { GearDropDown } from \"../../components/dropdowns/GearDropdown\";\r\nimport { CharacterStatsHeader } from \"../../components/statusbar/CharacterStatsHeader\";\r\nimport { SET_CAPTAINS_GEAR, SET_CAPTAINS_POWERS, SET_FIRSTMATE_GEAR } from \"../../redux/actions\";\r\nimport { CharactersEnum, CrewState, ModifiedGear } from \"../../types\";\r\nimport { gearSortAlgorithm, getActualNotes, getDamageModifierString, getGearByType, getGeneralGearDetails } from \"../../Utils\";\r\n\r\nexport const CharacterSelectGearPage = () => {\r\n    const { store } = useContext(ReactReduxContext);\r\n    const state = store.getState() as CrewState;\r\n    const history = useHistory();\r\n    const dispatch = useDispatch();\r\n    const characterType = history.location.state as CharactersEnum;\r\n    const character = characterType === CharactersEnum.Captain ? state.Captain : state.FirstMate;\r\n    const defaultKnife = { name: getGeneralGearDetails(\"Knife\").name, gearSlots: getGeneralGearDetails(\"Knife\").gearSlots };\r\n    const defaultArmour = { name: getGeneralGearDetails(\"No Armour\").name, gearSlots: getGeneralGearDetails(\"No Armour\").gearSlots };\r\n    const [selectedGear, setSelectedGear] = useState<ModifiedGear[]>([defaultKnife, defaultArmour]);\r\n    const isGearSelected = (gear: string) => !!selectedGear.find((gr) => gr.name === gear);\r\n    const maxGear = () => selectedGear.reduce((acc, gear) => acc + gear.gearSlots, 0) >= (character.gearSlots);\r\n\r\n    const getSelectedArmour = () => getGearByType(\"Armour\")?.find((armour) => isGearSelected(armour.name));\r\n    const getSelectedMelee = () => getGearByType(\"Weapon\")?.filter((weapon) => weapon.maxRange === \"Melee\")?.find((melee) => isGearSelected(melee.name));\r\n    const getCSSClasses = (name: string, withMax?: boolean) => isGearSelected(name) ? \"gear-selection selected\" : itemTooLarge(name) || (withMax && maxGear()) ? \"gear-selection disabled\" : \"gear-selection\";\r\n    const itemTooLarge = (gearName: string) => selectedGear.reduce((acc, gearItem) => acc + gearItem.gearSlots, 0) + getGeneralGearDetails(gearName).gearSlots > (character.gearSlots);\r\n    const onClickHandler = (gearName: string) => {\r\n        if (isGearSelected(gearName)) {\r\n            if (gearName === \"Combat Armour\") {\r\n                setSelectedGear([...selectedGear.filter((gear) => gear.name !== gearName && gear.name !== \"Hand Weapon\" && gear.name !== \"Filter Mask\" && gear.name !== \"Pistol\"), defaultKnife]);\r\n                return;\r\n            }\r\n            setSelectedGear(selectedGear.filter((gear) => gear.name !== gearName));\r\n        } else {\r\n            const gearDetails = getGeneralGearDetails(gearName);\r\n            if (itemTooLarge(gearName) || (gearDetails.type === \"Weapon\" && maxGear())) {\r\n                return;\r\n            }\r\n            if (gearDetails.type === \"Armour\") {\r\n                if (gearDetails.name === \"Combat Armour\") {\r\n                    setSelectedGear(\r\n                        [\r\n                            ...selectedGear.filter((selGear) => getGeneralGearDetails(selGear.name).type !== \"Armour\").filter((selGear) => getGeneralGearDetails(selGear.name).maxRange !== \"Melee\"),\r\n                            { name: gearName, gearSlots: gearDetails.gearSlots },\r\n                            { name: \"Hand Weapon\", gearSlots: 0 },\r\n                            { name: \"Filter Mask\", gearSlots: 0 },\r\n                            { name: \"Pistol\", gearSlots: 0 }]);\r\n                    return;\r\n                }\r\n                if (getSelectedArmour()?.name === \"Combat Armour\") {\r\n                    setSelectedGear([\r\n                        ...selectedGear.filter((gear) => gear.name !== \"Combat Armour\" && gear.name !== \"Hand Weapon\" && gear.name !== \"Filter Mask\" && gear.name !== \"Pistol\"),\r\n                        defaultKnife,\r\n                        { name: gearName, gearSlots: gearDetails.gearSlots },\r\n                    ]);\r\n                } else {\r\n                    setSelectedGear([...selectedGear.filter((selGear) => getGeneralGearDetails(selGear.name).type !== gearDetails.type), { name: gearName, gearSlots: gearDetails.gearSlots }]);\r\n                }\r\n                return;\r\n            }\r\n            if ((gearDetails.type === \"Weapon\" && gearDetails.maxRange === \"Melee\")) {\r\n                setSelectedGear([\r\n                    ...selectedGear.filter((selGear) => getGeneralGearDetails(selGear.name).maxRange !== \"Melee\"),\r\n                    { name: gearName, gearSlots: gearDetails.gearSlots },\r\n                ]);\r\n                return;\r\n            }\r\n            setSelectedGear([...selectedGear, { name: gearName, gearSlots: gearDetails.gearSlots }]);\r\n        }\r\n    };\r\n\r\n    return <React.Fragment>\r\n        <CharacterStatsHeader characterType={characterType} gearSlots={selectedGear.reduce((acc, gearItem) => acc + gearItem.gearSlots, 0)} />\r\n        <div className=\"single-selection-gear\">\r\n            <div className=\"modal-header\">Armour</div>\r\n            <GearDropDown\r\n                dropdownOptions={{\r\n                    id: \"Armour\",\r\n                    placeholder: getSelectedArmour() || { ...defaultArmour, type: \"Armour\" },\r\n                }}\r\n                list={getGearByType(\"Armour\") || []}\r\n                callbackFn={onClickHandler}\r\n            />\r\n        </div>\r\n        <div className=\"single-selection-gear\">\r\n            <div className=\"modal-header\">Melee Weapons</div>\r\n            <GearDropDown\r\n                dropdownOptions={{\r\n                    id: \"Melee\",\r\n                    placeholder: getSelectedMelee() || { ...defaultKnife, type: \"Weapon\", maxRange: \"Melee\" },\r\n                }}\r\n                list={getGearByType(\"Weapon\")?.filter((weapon) => weapon.maxRange === \"Melee\") || []}\r\n                callbackFn={onClickHandler}\r\n            />\r\n        </div>\r\n        <div className=\"modal-header\">Equipment</div>\r\n        {getGearByType(\"Equipment\")?.map((equi) =>\r\n            <div className=\"single-selection-gear\">\r\n                <div className={getCSSClasses(equi.name)} onClick={() => onClickHandler(equi.name)}>\r\n                    <div className=\"emphasized\">{`${equi.name} ( ${isGearSelected(equi.name) ? (selectedGear.find((item) => item.name === equi.name) as ModifiedGear).gearSlots : equi.gearSlots} )`}</div>\r\n                    <div className=\"medium-text\">{equi.notes}</div>\r\n                </div>\r\n            </div>)}\r\n\r\n        <div className=\"modal-header\">Shooting Weapons</div>\r\n        {getGearByType(\"Weapon\")?.filter((weapon) => weapon.maxRange !== \"Melee\").sort((a, b) => gearSortAlgorithm(a) - gearSortAlgorithm(b)).map((weapon) =>\r\n            <div className=\"single-selection-gear\">\r\n                <div className={getCSSClasses(weapon.name, true)} onClick={() => onClickHandler(weapon.name)}>\r\n                    <div className=\"emphasized\">{`${weapon.name} ( ${isGearSelected(weapon.name) ? (selectedGear.find((item) => item.name === weapon.name) as ModifiedGear).gearSlots : weapon.gearSlots} )`}</div>\r\n                    <div className=\"medium-text\">{`Range: ${weapon.maxRange}`} / {`${getDamageModifierString(weapon)} dmg`}</div>\r\n                    {weapon.notes ? <div className=\"medium-text\">{getActualNotes(selectedGear, weapon)}</div> : null}\r\n                </div>\r\n            </div>)}\r\n        <button\r\n            onClick={() => {\r\n                dispatch({ type: characterType === CharactersEnum.Captain ? SET_CAPTAINS_GEAR : SET_FIRSTMATE_GEAR, payload: selectedGear.sort((a, b) => (a.name.localeCompare(b.name))) });\r\n                history.push(characterType === CharactersEnum.Captain ? \"/CharacterName\" : \"/SoldierSelection\", CharactersEnum.FirstMate);\r\n            }}\r\n            className={\"dialog-btn confirm-btn\"}\r\n        >{`${\"Confirm\"}`}</button>\r\n        <CustomBackButtonComponent\r\n            dispatchFunction={() => dispatch({ type: characterType === CharactersEnum.Captain ? SET_CAPTAINS_POWERS : SET_CAPTAINS_POWERS, payload: [] })}\r\n            customHistory={() => history.push(\"/CharacterPowerSelection\", characterType)}\r\n        />\r\n    </React.Fragment>;\r\n};\r\n","import React, { useLayoutEffect, useRef, useState } from \"react\";\r\n\r\nexport const InputComponent = ({ currentState, tooltip, cssClass, callback }: { currentState: string; tooltip: string; cssClass: string; callback(name: string): void }) => {\r\n    const [name, setName] = useState<string>(currentState);\r\n    const [inputVisible, setInputVisible] = useState<boolean>(false);\r\n    const inputRef = useRef<HTMLInputElement>(null);\r\n    useLayoutEffect(() => {\r\n        inputRef?.current?.focus();\r\n    }, [inputVisible]);\r\n\r\n    const checkEnter = (event: React.KeyboardEvent<HTMLInputElement>) => {\r\n        if (event.code === \"Enter\") {\r\n            callback(name);\r\n            setInputVisible(false);\r\n        }\r\n        if (event.code === \"Escape\") {\r\n            setName(currentState);\r\n            callback(currentState);\r\n            setInputVisible(false);\r\n        }\r\n    };\r\n\r\n    const checkInput = (event: React.FormEvent<HTMLInputElement>) => {\r\n        setName(event.currentTarget.value);\r\n        callback(event.currentTarget.value);\r\n    };\r\n\r\n    return inputVisible ?\r\n        <input\r\n            ref={inputRef}\r\n            className={cssClass}\r\n            id=\"NameInput\"\r\n            onChange={checkInput}\r\n            onKeyUp={checkEnter}\r\n            onBlur={() => {\r\n                callback(name);\r\n                setInputVisible(false);\r\n            }}\r\n            value={name}\r\n        /> :\r\n        <div\r\n            style={{ placeSelf: \"start\", padding: \"0.2rem 0.23rem\" }}\r\n            className={currentState ? \"input-text-div\" : \"input-text-div input-error\"}\r\n            onClick={() => setInputVisible(true)}>\r\n            {currentState || tooltip}\r\n        </div>;\r\n};\r\n","import { InputComponent } from \"./InputComponent\";\r\n\r\nexport const NameComponent = ({ currentStateValue, tooltip, inputCallback }: { currentStateValue: string; tooltip: string; inputCallback(name: string): void }) =>\r\n    <div className=\"statusbar-name\">\r\n        <InputComponent callback={inputCallback} currentState={currentStateValue} tooltip={tooltip} cssClass=\"input-field\" />\r\n    </div>;\r\n","import React, { useContext, useState } from \"react\";\r\nimport { ReactReduxContext, useDispatch } from \"react-redux\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { CustomBackButtonComponent } from \"../../components/common/CustomBackButton\";\r\nimport { NameComponent } from \"../../components/NameComponent\";\r\nimport { CharacterStatsHeader } from \"../../components/statusbar/CharacterStatsHeader\";\r\nimport { SET_CAPTAINS_NAME, SET_FIRSTMATE_NAME, SET_SHIPNAME } from \"../../redux/actions\";\r\nimport { CharactersEnum, CrewState } from \"../../types\";\r\nexport const CharacterNamePage = () => {\r\n    const { store } = useContext(ReactReduxContext);\r\n    const state = store.getState() as CrewState;\r\n    const history = useHistory();\r\n    const dispatch = useDispatch();\r\n    const characterType = history.location.state as CharactersEnum;\r\n    const [name, setName] = useState<string>(characterType === CharactersEnum.Captain ? state.Captain.name : state.FirstMate.name);\r\n\r\n    return <React.Fragment>\r\n        <CharacterStatsHeader characterType={characterType} />\r\n        <div className=\"modal-header\">\r\n            {`This is your ${characterType} base stat line. \\n\\nIn the following screens you will be able to select a background, improve some stats, select powers and equip your ${characterType} with some useful gear.`}\r\n        </div>\r\n        <div className=\"modal-header\">{`But first of all, your ${characterType} needs a name:`}</div>\r\n        <NameComponent inputCallback={setName} currentStateValue={name} tooltip={`${characterType}'s name`} />\r\n        <button\r\n            onClick={() => {\r\n                if (name) {\r\n                    dispatch({ type: characterType === CharactersEnum.Captain ? SET_CAPTAINS_NAME : SET_FIRSTMATE_NAME, payload: name });\r\n                    history.push(\"/CharacterBackground\", characterType);\r\n                }\r\n            }}\r\n            className={name ? \"dialog-btn confirm-btn\" : \"dialog-btn confirm-btn disabled\"}\r\n        >Confirm</button>\r\n        <CustomBackButtonComponent dispatchFunction={() => dispatch({ type: SET_SHIPNAME, payload: \"\" })} />\r\n    </React.Fragment>;\r\n};\r\n","import { useEffect, useState } from \"react\";\r\nimport ReactSwipe from \"react-swipe\";\r\n\r\nexport const Carousel = ({ inputDivs, splitSize, resetPage }: { inputDivs: JSX.Element[] | null; splitSize: number; resetPage?: number }) => {\r\n    let reactSwipeEl: ReactSwipe;\r\n    const cnt = inputDivs?.length || 0;\r\n    const sectionCnt = Math.ceil(cnt / splitSize);\r\n    const [currentSection, setCurrentSection] = useState<number>(resetPage || 1);\r\n    useEffect(() => {\r\n        reactSwipeEl.slide(currentSection - 1, 0);\r\n    });\r\n    const getContent = () => {\r\n        const sectionDivs: JSX.Element[] = [];\r\n        for (let i = 0; i < sectionCnt; i++) {\r\n            sectionDivs.push(<div>{inputDivs?.slice((i * splitSize), (i + 1) * splitSize)}</div>);\r\n        }\r\n        return sectionDivs;\r\n    };\r\n    return <div>\r\n        <ReactSwipe\r\n            className={\"carousel\"}\r\n            swipeOptions={{\r\n                continuous: false,\r\n            }}\r\n            ref={(el: ReactSwipe) => (reactSwipeEl = el)}\r\n            childCount={sectionCnt}\r\n        >\r\n            {getContent()}\r\n        </ReactSwipe>\r\n        <div style={{ display: \"inline-grid\", width: \"100%\" }}>\r\n            <button\r\n                className={currentSection === 1 ? \"carousel-btn disabled\" : \"carousel-btn\"}\r\n                onClick={() => {\r\n                    setCurrentSection(reactSwipeEl.getPos());\r\n                    reactSwipeEl.prev();\r\n                }}\r\n            >{\"<\"}</button>\r\n            <div style={{ gridArea: \"1\", placeSelf: \"center\" }}>{`${currentSection} / ${sectionCnt}`}</div>\r\n            <button\r\n                className={(currentSection === sectionCnt) ? \"carousel-btn disabled\" : \"carousel-btn\"}\r\n                onClick={() => {\r\n                    setCurrentSection(reactSwipeEl.getPos() + 2);\r\n                    reactSwipeEl.next();\r\n                }}\r\n            >{\">\"}</button>\r\n        </div>\r\n    </div >;\r\n};\r\n","import React, { useContext, useEffect, useState } from \"react\";\r\nimport { ReactReduxContext, useDispatch } from \"react-redux\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { Carousel } from \"../../components/common/Carousel\";\r\nimport { CustomBackButtonComponent } from \"../../components/common/CustomBackButton\";\r\nimport { SET_CAPTAINS_POWERS, SET_FIRSTMATE_POWERS } from \"../../redux/actions\";\r\nimport { BackgroundEnum, CharactersEnum, CrewState, Power } from \"../../types\";\r\nimport { getNonCorePowers, isCorePower } from \"../../Utils\";\r\n\r\nexport const CharacterNonCorePowerSelectionPage = () => {\r\n    const { store } = useContext(ReactReduxContext);\r\n    const state = store.getState() as CrewState;\r\n    const history = useHistory();\r\n    const dispatch = useDispatch();\r\n    const characterType = history.location.state as CharactersEnum;\r\n    const character = characterType === CharactersEnum.Captain ? state.Captain : state.FirstMate;\r\n    const [selectedPowers, setSelectedPowers] = useState<Power[]>([]);\r\n    const [previewPower, setPreviewPower] = useState<Power | undefined>(undefined);\r\n    const [lastPreviewPower, setLastPreviewPower] = useState<Power | undefined>(undefined);\r\n    useEffect(() => {\r\n        if (previewPower) {\r\n            setLastPreviewPower(previewPower);\r\n        }\r\n    }, [previewPower]);\r\n    const isPowerSelected = (power: Power) => !!selectedPowers.find((pwr) => pwr.name === power.name);\r\n    const maxCorePowersSelected = () => {\r\n        let powersRemaining2 = characterType === CharactersEnum.Captain ? 4 : 3;\r\n        if (selectedPowers.filter((power) => !isCorePower(power.name, character.background as BackgroundEnum)).length === 2) {\r\n            powersRemaining2 = characterType === CharactersEnum.Captain ? 3 : 2;\r\n        }\r\n        return selectedPowers.filter((power) => isCorePower(power.name, character.background as BackgroundEnum)).length >= powersRemaining2;\r\n    };\r\n    const powersRemaining = (characterType === CharactersEnum.Captain ? 5 : 4) - character.powers.length;\r\n\r\n    return <React.Fragment>\r\n        {previewPower ?\r\n            <React.Fragment>\r\n                <div className=\"modal-header\">\r\n                    {`View Details for Power \"${previewPower.name}\"`}\r\n                    <div className=\"modal-sub-header\">{\"Click the back to return to the selection menu.\"}</div>\r\n                </div>\r\n                <div className=\"power-preview-section\">\r\n                    <div className=\"power-preview-name\">{`${previewPower.name}`}</div>\r\n                    <div className=\"power-preview-infos\">\r\n                        {`Activation: ${previewPower.activation}`} / {`Strain: ${previewPower.strain}`} / {Array.isArray(previewPower.category) ? `Categories: ${previewPower.category.join(\", \")}` : `Category: ${previewPower.category}`}\r\n                    </div>\r\n                    <div className={previewPower.effect.length <= 200 ? \"large-text\" : previewPower.effect.length <= 400 ? \"power-preview-medium-text\" : \"power-preview-small-text\"}>{previewPower.effect}</div>\r\n                </div>\r\n                <button\r\n                    onClick={(event) => {\r\n                        setPreviewPower(undefined);\r\n                        event.preventDefault();\r\n                        event.stopPropagation();\r\n                    }}\r\n                    className={\"dialog-btn close-btn foreground\"}\r\n                >Close</button>\r\n            </React.Fragment> :\r\n            <React.Fragment>\r\n                <div className=\"modal-header\">\r\n                    {`Choose ${powersRemaining} additional ${powersRemaining === 1 ? \"Power\" : \"Powers\"}`}\r\n                    <div className=\"modal-sub-header\">{\"Swipe or use the page buttons to see more entries\"}</div>\r\n                </div>\r\n                <Carousel\r\n                    splitSize={8}\r\n                    resetPage={lastPreviewPower ? Math.ceil(getNonCorePowers(character.background as BackgroundEnum, characterType === CharactersEnum.Captain).findIndex((pwr) => pwr.name === lastPreviewPower?.name) / 8) : 1}\r\n                    inputDivs={getNonCorePowers(character.background as BackgroundEnum, characterType === CharactersEnum.Captain).map((power) =>\r\n                        <div\r\n                            onClick={() => {\r\n                                if (isPowerSelected(power)) {\r\n                                    const idx = selectedPowers.findIndex((pwr) => pwr.name === power.name);\r\n                                    if (idx !== -1) {\r\n                                        setSelectedPowers([...selectedPowers.slice(0, idx), ...selectedPowers.slice(idx + 1, selectedPowers.length)]);\r\n                                    }\r\n                                } else {\r\n                                    if (maxCorePowersSelected()) {\r\n                                        return;\r\n                                    }\r\n                                    setSelectedPowers([...selectedPowers, { ...power, activation: power.activation }]);\r\n                                }\r\n                            }}\r\n                            className={isPowerSelected(power) ? \"power-selection selected\" : maxCorePowersSelected() ? \"power-selection disabled\" : \"power-selection\"}\r\n                            key={`add_dialog_x_stat_${power.name}`}>\r\n\r\n                            <div className={isPowerSelected(power) ? \"info-corner inverted\" : \"info-corner\"} />\r\n                            <div className=\"info-corner-text\">i</div>\r\n                            <div>{power.name}</div>\r\n                            <div style={{ fontSize: \"0.8rem\" }}>{power.activation} / {power.strain} / {Array.isArray(power.category) ? `${power.category.join(\", \")}` : power.category}</div>\r\n                            <div className=\"info-click-area-non-core\"\r\n                                onClick={(event) => {\r\n                                    setPreviewPower(characterType === CharactersEnum.Captain ? power : { ...power, activation: power.activation + 2 });\r\n                                    event.preventDefault();\r\n                                    event.stopPropagation();\r\n                                }} />\r\n                        </div>\r\n\r\n                    )}\r\n\r\n                />\r\n                <button\r\n                    onClick={() => {\r\n                        if (selectedPowers.length === powersRemaining) {\r\n                            dispatch({ type: characterType === CharactersEnum.Captain ? SET_CAPTAINS_POWERS : SET_FIRSTMATE_POWERS, payload: [...selectedPowers, ...character.powers].sort((a, b) => (a.name.localeCompare(b.name))) });\r\n                            history.push(characterType === CharactersEnum.Captain ? \"/CharacterImprovePowers\" : \"/CharacterSelectGear\", characterType);\r\n                        }\r\n                    }}\r\n                    className={selectedPowers.length === powersRemaining ? \"dialog-btn confirm-btn\" : \"dialog-btn confirm-btn disabled\"}\r\n                >Confirm</button>\r\n                <CustomBackButtonComponent dispatchFunction={() => dispatch({ type: characterType === CharactersEnum.Captain ? SET_CAPTAINS_POWERS : SET_FIRSTMATE_POWERS, payload: [] })} />\r\n            </React.Fragment>}\r\n    </React.Fragment>;\r\n};\r\n","import React, { useContext, useState } from \"react\";\r\nimport { ReactReduxContext, useDispatch } from \"react-redux\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { CustomBackButtonComponent } from \"../../components/common/CustomBackButton\";\r\nimport { SET_CAPTAINS_POWERS, SET_FIRSTMATE_POWERS } from \"../../redux/actions\";\r\nimport { CharactersEnum, CrewState, ModifiedPower, Power } from \"../../types\";\r\nimport { getPower } from \"../../Utils\";\r\n\r\nexport const CharacterPowerImprovementsPage = () => {\r\n    const { store } = useContext(ReactReduxContext);\r\n    const state = store.getState() as CrewState;\r\n    const history = useHistory();\r\n    const dispatch = useDispatch();\r\n    const characterType = history.location.state as CharactersEnum;\r\n    const character = characterType === CharactersEnum.Captain ? state.Captain : state.FirstMate;\r\n    const [selectedPowers, setSelectedPowers] = useState<ModifiedPower[]>([]);\r\n    const [previewPower, setPreviewPower] = useState<Power | undefined>(undefined);\r\n    const updatedArray = () => character.powers.filter((pwr) => !selectedPowers.find((x) => x.name === pwr.name)).concat(selectedPowers).sort((a, b) => (a.name.localeCompare(b.name)));\r\n    const isPowerSelected = (power: ModifiedPower) => !!selectedPowers.find((pwr) => pwr.name === power.name);\r\n    return <React.Fragment >\r\n        {previewPower ?\r\n            <React.Fragment >\r\n                <div className=\"modal-header\">\r\n                    {`View Details for Power \"${previewPower.name}\"`}\r\n                    <div className=\"modal-sub-header\">{\"Click the back to return to the selection menu.\"}</div>\r\n                </div>\r\n                <div className=\"power-preview-section\">\r\n                    <div className=\"power-preview-name\">{`${previewPower.name}`}</div>\r\n                    <div className=\"power-preview-infos\">\r\n                        {`Activation: ${previewPower.activation}`} / {`Strain: ${previewPower.strain}`} / {Array.isArray(previewPower.category) ? `Categories: ${previewPower.category.join(\", \")}` : `Category: ${previewPower.category}`}\r\n                    </div>\r\n                    <div className={previewPower.effect.length <= 200 ? \"large-text\" : previewPower.effect.length <= 400 ? \"power-preview-medium-text\" : \"power-preview-small-text\"}>{previewPower.effect}</div>\r\n                </div>\r\n                <button\r\n                    onClick={(event) => {\r\n                        setPreviewPower(undefined);\r\n                        event.preventDefault();\r\n                        event.stopPropagation();\r\n                    }}\r\n                    className={\"dialog-btn close-btn foreground\"}\r\n                >Close</button>\r\n            </React.Fragment > :\r\n            <React.Fragment>\r\n                <div className=\"modal-header\">Select 2 of the following powers to lower their activation value by 1 each</div>\r\n                {character.powers.map((power) => {\r\n                    const actualPower = getPower(power.name);\r\n                    return <div style={{ display: \"inline-block\", width: \"100%\" }}>\r\n                        <div className={isPowerSelected(power) ? \"background-power-selection full-width selected\" : \"background-power-selection full-width\"}\r\n                            onClick={() => {\r\n                                if (selectedPowers.find((pwr) => pwr.name === power.name)) {\r\n                                    setSelectedPowers(selectedPowers.filter((pwr) => pwr.name !== power.name));\r\n                                } else {\r\n                                    if (selectedPowers.length >= 2) {\r\n                                        return;\r\n                                    }\r\n                                    setSelectedPowers([...selectedPowers, { ...power, activation: power.activation - 1 }]);\r\n                                }\r\n                            }}\r\n                            key={`add_dialog_x_stat_${power.name}`}>\r\n                            <div className={isPowerSelected(power) ? \"info-corner inverted\" : \"info-corner \"} />\r\n                            <div className=\"info-corner-text\">i</div>\r\n                            <div>{power.name}</div>\r\n                            <div style={{ fontSize: \"0.8rem\" }}>\r\n                                {isPowerSelected(power) ? power.activation - 1 : power.activation} / {actualPower.strain} / {Array.isArray(actualPower.category) ? `${actualPower.category.join(\", \")}` : actualPower.category}\r\n                            </div>\r\n\r\n                        </div>\r\n                        <div className=\"info-click-area\"\r\n                            onClick={(event) => {\r\n                                setPreviewPower(actualPower);\r\n                                event.preventDefault();\r\n                                event.stopPropagation();\r\n                            }} />\r\n                    </div>;\r\n                })}\r\n                <button\r\n                    onClick={() => {\r\n                        if (selectedPowers.length === 2) {\r\n                            dispatch({ type: characterType === CharactersEnum.Captain ? SET_CAPTAINS_POWERS : SET_FIRSTMATE_POWERS, payload: updatedArray() });\r\n                            history.push(\"/CharacterSelectGear\", characterType);\r\n                        }\r\n                    }}\r\n                    className={selectedPowers.length === 2 ? \"dialog-btn confirm-btn\" : \"dialog-btn confirm-btn disabled\"}\r\n                >Confirm</button>\r\n                <CustomBackButtonComponent\r\n                    dispatchFunction={() => dispatch({ type: characterType === CharactersEnum.Captain ? SET_CAPTAINS_POWERS : SET_CAPTAINS_POWERS, payload: [] })}\r\n                    customHistory={() => history.push(\"/CharacterPowerSelection\", characterType)}\r\n                />\r\n            </React.Fragment >\r\n        }\r\n\r\n    </React.Fragment >;\r\n};\r\n","import React, { useContext, useState } from \"react\";\r\nimport { ReactReduxContext, useDispatch } from \"react-redux\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { CustomBackButtonComponent } from \"../../components/common/CustomBackButton\";\r\nimport { CharacterStatsHeader } from \"../../components/statusbar/CharacterStatsHeader\";\r\nimport { SET_CAPTAINS_POWERS, SET_CAPTAINS_STATS, SET_FIRSTMATE_POWERS, SET_FIRSTMATE_STATS } from \"../../redux/actions\";\r\nimport { BackgroundEnum, CharactersEnum, CrewState, Power } from \"../../types\";\r\nimport { getBackgroundInfos, getBaseCaptain, getBaseFirstMate, getPowerInfos } from \"../../Utils\";\r\n\r\nexport const CharacterPowerSelectionPage = () => {\r\n    const { store } = useContext(ReactReduxContext);\r\n    const state = store.getState() as CrewState;\r\n    const history = useHistory();\r\n    const dispatch = useDispatch();\r\n    const characterType = history.location.state as CharactersEnum;\r\n    const character = characterType === CharactersEnum.Captain ? state.Captain : state.FirstMate;\r\n    const [selectedPowers, setSelectedPowers] = useState<Power[]>([]);\r\n    const [previewPower, setPreviewPower] = useState<Power>();\r\n    const isPowerSelected = (power: Power) => !!selectedPowers.find((pwr) => pwr.name === power.name);\r\n    const minPowersSelected = () => selectedPowers.length >= (characterType === CharactersEnum.Captain ? 3 : 2);\r\n    const maxPowersSelected = () => selectedPowers.length >= (characterType === CharactersEnum.Captain ? 4 : 3);\r\n    return <React.Fragment>\r\n        {previewPower ?\r\n            <React.Fragment>\r\n                <div className=\"modal-header\">\r\n                    {`View Details for Power \"${previewPower.name}\"`}\r\n                    <div className=\"modal-sub-header\">{\"Click the back to return to the selection menu.\"}</div>\r\n                </div>\r\n                <div className=\"power-preview-section\">\r\n                    <div className=\"power-preview-name\">{`${previewPower.name}`}</div>\r\n                    <div className=\"power-preview-infos\">\r\n                        {`Activation: ${previewPower.activation}`} / {`Strain: ${previewPower.strain}`} / {Array.isArray(previewPower.category) ? `Categories: ${previewPower.category.join(\", \")}` : `Category: ${previewPower.category}`}\r\n                    </div>\r\n                    <div className={previewPower.effect.length <= 200 ? \"large-text\" : previewPower.effect.length <= 400 ? \"power-preview-medium-text\" : \"power-preview-small-text\"}>{previewPower.effect}</div>\r\n                </div>\r\n                <button\r\n                    onClick={(event) => {\r\n                        setPreviewPower(undefined);\r\n                        event.preventDefault();\r\n                        event.stopPropagation();\r\n                    }}\r\n                    className={\"dialog-btn close-btn foreground\"}\r\n                >Close</button>\r\n            </React.Fragment> :\r\n            <React.Fragment>\r\n                <CharacterStatsHeader characterType={characterType} />\r\n                <div className=\"modal-header\">\r\n                    {`Choose ${characterType === CharactersEnum.Captain ? \"3 - 4\" : \"2 - 3\"} core Powers`}\r\n                    <div className=\"modal-sub-header\">{\"Click the info icon in the top right corner of a power to view its details\"}</div>\r\n                </div>\r\n                {getPowerInfos(getBackgroundInfos(character.background as BackgroundEnum).corePowers).map((power) => <div style={{ display: \"inline-block\", width: \"100%\" }}>\r\n                    <div\r\n                        onClick={() => {\r\n                            if (isPowerSelected(power)) {\r\n                                const idx = selectedPowers.findIndex((pwr) => pwr.name === power.name);\r\n                                if (idx !== -1) {\r\n                                    setSelectedPowers([...selectedPowers.slice(0, idx), ...selectedPowers.slice(idx + 1, selectedPowers.length)]);\r\n                                }\r\n                            } else {\r\n                                if (maxPowersSelected()) {\r\n                                    return;\r\n                                }\r\n                                setSelectedPowers([...selectedPowers, { ...power, activation: power.activation + (characterType === CharactersEnum.Captain ? 0 : 2) }]);\r\n                            }\r\n                        }}\r\n                        className={isPowerSelected(power) ? \"power-selection selected\" : maxPowersSelected() ? \"power-selection disabled\" : \"power-selection\"}\r\n                        key={`add_dialog_x_stat_${power.name}`}>\r\n\r\n                        <div key=\"power-info-corner\" className={isPowerSelected(power) ? \"info-corner inverted\" : \"info-corner \"} />\r\n                        <div key=\"power-info-corner-text\" className=\"info-corner-text\">i</div>\r\n                        <div key=\"power-name\">{power.name}</div>\r\n                        <div key=\"power-details\" style={{ fontSize: \"0.8rem\" }}>\r\n                            {power.activation + (characterType === CharactersEnum.Captain ? 0 : 2)} / {power.strain} / {Array.isArray(power.category) ? `${power.category.join(\", \")}` : power.category}\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"info-click-area\"\r\n                        onClick={(event) => {\r\n                            setPreviewPower(characterType === CharactersEnum.Captain ? power : { ...power, activation: power.activation + 2 });\r\n                            event.preventDefault();\r\n                            event.stopPropagation();\r\n                        }} />\r\n                </div>\r\n                )}\r\n                <button\r\n                    onClick={() => {\r\n                        if (minPowersSelected()) {\r\n                            dispatch({ type: characterType === CharactersEnum.Captain ? SET_CAPTAINS_POWERS : SET_FIRSTMATE_POWERS, payload: selectedPowers.sort((a, b) => (a.name.localeCompare(b.name))) });\r\n                            history.push(\"/CharacterNonCorePowerSelection\", characterType);\r\n                        }\r\n                    }}\r\n                    className={minPowersSelected() ? \"dialog-btn confirm-btn\" : \"dialog-btn confirm-btn disabled\"}\r\n                >Confirm</button>\r\n                <CustomBackButtonComponent\r\n                    dispatchFunction={() => characterType === CharactersEnum.Captain ? dispatch({ type: SET_CAPTAINS_STATS, payload: getBaseCaptain().stats }) : dispatch({ type: SET_FIRSTMATE_STATS, payload: getBaseFirstMate().stats })}\r\n                />\r\n            </React.Fragment>}\r\n    </React.Fragment>;\r\n};\r\n","import React, { useContext, useState } from \"react\";\r\nimport { ReactReduxContext, useDispatch } from \"react-redux\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { CustomBackButtonComponent } from \"../../components/common/CustomBackButton\";\r\nimport { CharacterStatsHeader } from \"../../components/statusbar/CharacterStatsHeader\";\r\nimport { SET_CAPTAINS_BACKGROUND, SET_CAPTAINS_STATS, SET_FIRSTMATE_BACKGROUND, SET_FIRSTMATE_STATS } from \"../../redux/actions\";\r\nimport { BackgroundEnum, CharactersEnum, CrewState, Stats, StatsEnum } from \"../../types\";\r\nimport { getBackgroundInfos } from \"../../Utils\";\r\n\r\nexport const CharacterStatsSelectionPage = () => {\r\n    const { store } = useContext(ReactReduxContext);\r\n    const state = store.getState() as CrewState;\r\n    const history = useHistory();\r\n    const dispatch = useDispatch();\r\n    const characterType = history.location.state as CharactersEnum;\r\n    const character = characterType === CharactersEnum.Captain ? state.Captain : state.FirstMate;\r\n    const background = getBackgroundInfos(character.background as BackgroundEnum);\r\n    const [selections, setSelections] = useState<Partial<Stats>>({});\r\n    const isStatSelected = (statName: string) => selections[statName as StatsEnum] !== undefined;\r\n    const statModificationsForBackground = getBackgroundInfos(background.name).statModifications;\r\n    const maxStatsReached = () => Object.keys(selections).length === statModificationsForBackground.chooseOptionals;\r\n    const calcPayload = () => {\r\n        let stats = character.stats;\r\n        stats = Object.entries(selections).reduce((newStats, [key, value]) => ({ ...newStats, [key]: value ? newStats[key as StatsEnum] + value : newStats[key as StatsEnum] }), stats);\r\n        return Object.entries(statModificationsForBackground.mandatory).reduce((newStats, [key, value]) => ({ ...newStats, [key]: value ? newStats[key as StatsEnum] + value : newStats[key as StatsEnum] }), stats);\r\n    };\r\n    return <React.Fragment>\r\n        <CharacterStatsHeader characterType={characterType} />\r\n        <div style={{ marginTop: \"0.5rem\" }} className=\"modal-header\">Granted Stats Improvements</div>\r\n        {Object.entries(statModificationsForBackground.mandatory).map(([statName, statValue]) =>\r\n            <div className=\"background-stat-selection selected\" key={`add_captain_dialog_mand_stat_${statName}`}>+{statValue} {statName}</div>\r\n        )}\r\n        <div className=\"modal-header\">{`Optional Stats Improvements \\n (choose ${statModificationsForBackground.chooseOptionals} of the following)`}</div>\r\n        {Object.entries(statModificationsForBackground.optional).map(([statName, statValue]) =>\r\n            <div\r\n                onClick={() => {\r\n                    if (isStatSelected(statName)) {\r\n                        const { [statName as StatsEnum]: exclProp, ...rest } = selections;\r\n                        setSelections(rest);\r\n                    } else {\r\n                        if (maxStatsReached()) {\r\n                            return;\r\n                        }\r\n                        setSelections({ ...selections, [statName]: statValue });\r\n                    }\r\n                }}\r\n                className={isStatSelected(statName) ? \"background-stat-selection selected\" : maxStatsReached() ? \"background-stat-selection disabled\" : \"background-stat-selection\"}\r\n                key={`add_captain_dialog_opt_stat_${statName}`}>\r\n                +{statValue} {statName}\r\n            </div>\r\n        )}\r\n        <button\r\n            onClick={() => {\r\n                if (maxStatsReached()) {\r\n                    dispatch({ type: characterType === CharactersEnum.Captain ? SET_CAPTAINS_STATS : SET_FIRSTMATE_STATS, payload: calcPayload() });\r\n                    history.push(\"/CharacterPowerSelection\", characterType);\r\n                }\r\n            }}\r\n            className={maxStatsReached() ? \"dialog-btn confirm-btn\" : \"dialog-btn confirm-btn disabled\"}\r\n        >Confirm</button>\r\n        <CustomBackButtonComponent dispatchFunction={() => dispatch({ type: characterType === CharactersEnum.Captain ? SET_CAPTAINS_BACKGROUND : SET_FIRSTMATE_BACKGROUND, payload: undefined })} />\r\n    </React.Fragment>;\r\n};\r\n","import { useHistory } from \"react-router-dom\";\r\n\r\nexport const BackButtonComponent = () => {\r\n\r\n    const history = useHistory();\r\n    return <button\r\n        onClick={(event) => {\r\n            history.goBack();\r\n            event.preventDefault();\r\n            event.stopPropagation();\r\n        }}\r\n        className={\"dialog-btn back-btn\"}\r\n    >Back</button>;\r\n};\r\n","import React, { useState } from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { BackButtonComponent } from \"../../components/common/BackButton\";\r\nimport { NameComponent } from \"../../components/NameComponent\";\r\nimport { SET_SHIPNAME } from \"../../redux/actions\";\r\nimport { CharactersEnum } from \"../../types\";\r\n\r\nexport const ShipNamePage = () => {\r\n    const [name, setName] = useState<string>(\"\");\r\n    const dispatch = useDispatch();\r\n    const history = useHistory();\r\n    return <React.Fragment>\r\n        <div className=\"chapter-header\">Welcome to Stargarve - Science Fiction wargames in the ravaged galaxy</div>\r\n        {/* <div className=\"modal-header\">This nifty little tool is supposed to guide you through the process of creating your crew for a game or even a campaign of Stargrave.</div> */}\r\n        <div className=\"modal-header\">\r\n            In the following screens you will design yourself a captain that is leading your crew, configure a loyal first mate to assist your fearless leader and hire disposable bodies (crewmen) to help you to complete your objectives.\r\n            </div>\r\n        <div className=\"modal-header\">But first things first. Your crew needs a ship to get to their missions. What is the name of your ship?</div>\r\n        <NameComponent inputCallback={setName} currentStateValue={name} tooltip={\"Your ship needs a name\"} />\r\n        <button\r\n            onClick={() => {\r\n                dispatch({ type: SET_SHIPNAME, payload: name });\r\n                history.push(\"/CharacterName\", CharactersEnum.Captain);\r\n            }}\r\n            className={name ? \"dialog-btn confirm-btn\" : \"dialog-btn confirm-btn disabled\"}\r\n        >Confirm</button>\r\n        <BackButtonComponent />\r\n    </React.Fragment>;\r\n};\r\n","import React from \"react\";\r\nimport { Character, Gear, ModifiedGear, Soldier } from \"../types\";\r\nimport { getGeneralGearDetails } from \"../Utils\";\r\n\r\nconst renderGear = (gear: Gear[] | ModifiedGear[], renderSoldier?: boolean, isPdf?: boolean) => <table className=\"character-tile-table\" style={{ width: \"100%\" }}>\r\n    <colgroup>\r\n        <col style={{ width: \"25%\" }} />\r\n        <col style={{ width: \"75%\" }} />\r\n    </colgroup>\r\n    <tbody>\r\n        <tr className={isPdf ? \"medium-pdf-text\" : \"small-text\"}>\r\n            <td style={{ fontSize: \"1rem\", paddingRight: \"1rem\", fontWeight: \"bold\" }}>Gear</td>\r\n            <td>\r\n                {`${renderSoldier ?\r\n                    gear.map((gearItem: ModifiedGear) => gearItem.name).join(\", \") :\r\n                    gear.map((gearItem: ModifiedGear) => `${gearItem.name} (${gearItem.gearSlots})`).join(\", \")}`}</td>\r\n        </tr>\r\n    </tbody>\r\n</table>;\r\n\r\nexport const CharacterTileGearAndPowers = ({ character, isPdf }: { character: Character; isPdf?: boolean }) =>\r\n    <React.Fragment>\r\n        <table className=\"character-tile-table\" style={{ width: \"100%\", textAlign: \"left\" }}>\r\n            <colgroup>\r\n                <col style={{ width: \"25%\" }} />\r\n                <col style={{ width: \"75%\" }} />\r\n            </colgroup>\r\n            <tbody>\r\n                <tr className={isPdf ? \"medium-pdf-text\" : \"small-text\"}>\r\n                    <td style={{ fontSize: \"1rem\", paddingRight: \"1rem\", fontWeight: \"bold\" }}>Powers</td>\r\n                    <td>{`${character.powers?.map((power) => `${power.name} (${power.activation})`).join(\", \")}`}</td>\r\n                </tr>\r\n            </tbody>\r\n        </table>\r\n        {character.gear ? renderGear(character.gear, false, isPdf) : null}\r\n    </React.Fragment>;\r\n\r\nexport const SoldierTileGearAndPowers = ({ soldier, isPdf }: { soldier: Soldier; isPdf?: boolean }) =>\r\n    <React.Fragment>\r\n        {soldier.gear ? renderGear(soldier.gear.map(getGeneralGearDetails), true, isPdf) : null}\r\n    </React.Fragment>;\r\n","import { Character, Soldier } from \"../types\";\r\nimport { isCaptain } from \"../Utils\";\r\n\r\nexport const CharacterTileHeader = ({ character }: { character: Character }) =>\r\n    <table className=\"character-tile-table\" style={{ width: \"100%\" }}>\r\n        <tbody>\r\n            <tr>\r\n                <td>\r\n                    {`${isCaptain(character.type) ? \"Cpt.\" : \"Ltn.\"} ${character.name} (${character.background})`}\r\n                </td>\r\n                <td style={{ textAlign: \"end\" }}>{`Level ${character.level}`}</td>\r\n            </tr>\r\n        </tbody>\r\n    </table>;\r\n\r\nexport const SoldierTileHeader = ({ soldier }: { soldier: Soldier }) =>\r\n    <table className=\"character-tile-table\" style={{ width: \"100%\" }}>\r\n        <tbody>\r\n            <tr>\r\n                <td>\r\n                    {soldier.amount > 0 ? `${soldier.amount}x ${soldier.type}` : soldier.type}\r\n                </td>\r\n                <td style={{ textAlign: \"end\" }}>{`(${soldier.amount > 0 ? soldier.cost * soldier.amount : soldier.cost} \\xA5)`}</td>\r\n            </tr>\r\n        </tbody>\r\n    </table>;\r\n","import { Soldier } from \"../types\";\r\nimport { SoldierStatusBarTable } from \"./CharacterStatusBarTable\";\r\nimport { SoldierTileGearAndPowers } from \"./CharacterTileGearAndPowers\";\r\nimport { SoldierTileHeader } from \"./CharacterTileHeader\";\r\n\r\nexport const SoldierComponent = ({ soldier, isPdf }: { soldier: Soldier; isPdf?: boolean }) =>\r\n    <div key={`${soldier.type}_tile`} className={isPdf ? \"pdf-soldier-tile\" : \"character-tile\"}>\r\n        <SoldierTileHeader soldier={soldier} />\r\n        <SoldierStatusBarTable soldier={soldier} gearSlotsUsed={0} isTileTable={true} />\r\n        <SoldierTileGearAndPowers soldier={soldier} isPdf={isPdf} />\r\n    </div>;\r\n","import { CSSProperties } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { CrewIcon } from \"../../images\";\r\nimport { numberOfCrewMembers } from \"../../Utils\";\r\n\r\nexport const CrewSizeComponent = ({ externalStyles, virtualCrewSize }: { externalStyles?: CSSProperties; virtualCrewSize?: number }) => {\r\n    const history = useHistory();\r\n    return <div\r\n        style={externalStyles}\r\n        onClick={() => history.push(\"/SoldierSelection\")}\r\n        className=\"statusbar-tiles\"\r\n        title={\"Current size of your crew\"}>\r\n        <img\r\n            src={CrewIcon}\r\n            className={\"toolbar-compact-icon\"}\r\n            id={\"CrewIcon\"}\r\n            alt={\"CrewIcon\"}>\r\n        </img>\r\n        <div className={\"toolbar-compact-text\"}>{virtualCrewSize || numberOfCrewMembers()} / 7</div>\r\n    </div>;\r\n};\r\n","import { CSSProperties, useContext } from \"react\";\r\nimport { ReactReduxContext } from \"react-redux\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { TreasuryIcon } from \"../../images\";\r\nimport { CrewState } from \"../../types\";\r\n\r\nexport const TreasuryComponent = ({ externalStyles, virtualCredits }: { externalStyles?: CSSProperties; virtualCredits?: number }) => {\r\n    const { store } = useContext(ReactReduxContext);\r\n    const state = store.getState() as CrewState;\r\n    const history = useHistory();\r\n    return <div\r\n        style={externalStyles}\r\n        onClick={() => history.push(\"/TransactionHistory\")}\r\n        className=\"statusbar-tiles\"\r\n        title={\"Current amount of credits in your treasury\"}>\r\n        <img\r\n            src={TreasuryIcon}\r\n            className={\"toolbar-compact-icon\"}\r\n            id={\"TreasuryIcon\"}\r\n            alt={\"TreasuryIcon\"}>\r\n        </img>\r\n        <div className={\"toolbar-compact-text\"}>\r\n            {`${virtualCredits || state.Credits} \\xA5`}\r\n        </div>\r\n    </div>;\r\n};\r\n","import React, { useContext, useEffect, useState } from \"react\";\r\nimport { ReactReduxContext, useDispatch } from \"react-redux\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport * as SoldierList from \"../data/Soldiers.json\";\r\nimport { AddIcon, getSoldierImage, MinusIcon } from \"../images\";\r\nimport { ADD_SOLDIERS } from \"../redux/actions\";\r\nimport { CrewState, Soldier, SoldierGroups, SoldierMetadata } from \"../types\";\r\nimport { Carousel } from \"./common/Carousel\";\r\nimport { SoldierComponent } from \"./SoldierComponent\";\r\nimport { CrewSizeComponent } from \"./statusbar/CrewSizeComponent\";\r\nimport { TreasuryComponent } from \"./statusbar/TreasuryComponent\";\r\n\r\nconst listOfSoldiers = SoldierList.Soldiers as SoldierMetadata[];\r\n\r\nexport const SoldierSelectionComponent = () => {\r\n    const { store } = useContext(ReactReduxContext);\r\n    const state = store.getState() as CrewState;\r\n    const [soldiers, setSoldiers] = useState<Soldier[]>([]);\r\n    const [previewSoldier, setPreviewSoldier] = useState<SoldierMetadata>();\r\n    const [lastPreviewSoldier, setLastPreviewSoldier] = useState<SoldierMetadata | undefined>(undefined);\r\n    useEffect(() => {\r\n        if (previewSoldier) {\r\n            setLastPreviewSoldier(previewSoldier);\r\n        }\r\n    }, [previewSoldier]);\r\n    const dispatch = useDispatch();\r\n    const history = useHistory();\r\n    const getCurrentSoldierAmount = (soldierType: string) => soldiers.filter((soldier) => soldier.type === soldierType)?.length || 0;\r\n    const soldierCount = () => soldiers.reduce((acc, soldier) => soldier.amount + acc, 0);\r\n    const specialistCount = () => soldiers.filter((soldier) => soldier.group === SoldierGroups.Specialist).reduce((acc, specialist) => specialist.amount + acc, 0);\r\n    const hiringCost = () => soldiers.reduce((acc, soldier) => acc + (soldier.amount * soldier.cost), 0);\r\n    const canSubmit = () => soldierCount() <= 8 && specialistCount() <= 4 && hiringCost() <= state.Credits;\r\n\r\n    const renderSoldierTile = (soldier: SoldierMetadata) => <div\r\n        key={`add-character-${soldier.type}`}\r\n        className={getCurrentSoldierAmount(soldier.type) > 0 ? \"add-character-background selected\" : \"add-character-background\"}\r\n        onClick={() => setPreviewSoldier(soldier)}>\r\n        <img style={{ paddingTop: \"0.35rem\" }} className=\"add-character-background-icons\" src={getSoldierImage(soldier.type)} alt={`add-character-${soldier.type}-icon`} />\r\n        <div className=\"soldier-cost\">{`${soldier.cost} \\xA5`}</div>\r\n        <div style={{ paddingTop: \"0.35rem\" }} className=\"large-text\">{`${soldier.type}`}</div>\r\n        {soldier.group === SoldierGroups.Specialist ? <div className=\"medium-text\">Specialist</div> : null}\r\n        {getCurrentSoldierAmount(soldier.type) > 0 ? <div className=\"soldier-type\">{getCurrentSoldierAmount(soldier.type)}x</div> : null}\r\n    </div>;\r\n\r\n    return <React.Fragment>\r\n        <div key=\"statusbar\" id=\"statusbar\" className=\"statusbar\">\r\n            <div className=\"statusbar-tiles\" style={{ height: \"3rem\" }}>\r\n                <div className=\"toolbar-two-column-header-text\">Hire your crew</div>\r\n                <div className=\"small-text\">{\"You need to hire 8 Soldiers. \\n Only 4 may be Specialists\"}</div>\r\n            </div>\r\n            <CrewSizeComponent externalStyles={{ width: \"calc(35% - 1.1rem)\" }} virtualCrewSize={soldierCount() + state.Soldiers.reduce((sum, sol) => sum + sol.amount, 2)} />\r\n            <TreasuryComponent virtualCredits={state.Credits - hiringCost()} />\r\n        </div>\r\n        {previewSoldier ?\r\n            <React.Fragment>\r\n                <div className=\"modal-header\">Soldier details</div>\r\n                <SoldierComponent soldier={{ ...previewSoldier, amount: 0, gearSlots: 1, id: 1 }} />\r\n                <div className=\"modal-header\">Use the Plus/Minus buttons below to hire some of these soldiers if they suit your needs</div>\r\n                <div className=\"soldier-selection-amount\">\r\n                    <div\r\n                        className=\"btn\"\r\n                        onClick={() => {\r\n                            const soldiersOfType = soldiers.filter((sol) => sol.type === previewSoldier.type);\r\n                            if (soldiersOfType.length === 1) {\r\n                                setSoldiers(soldiers.filter((sol) => sol.type !== previewSoldier.type));\r\n                            } else {\r\n                                setSoldiers(soldiers.filter((sol) => sol.type !== previewSoldier.type || sol.id !== soldiersOfType.length));\r\n                            }\r\n                        }}><img alt=\"minusicon\" style={{ width: \"3rem\" }} src={MinusIcon} /></div>\r\n                    <div className=\"very-large-text\">{getCurrentSoldierAmount(previewSoldier.type)}</div>\r\n                    <div\r\n                        className=\"btn\"\r\n                        onClick={() => {\r\n                            const soldierIdx = soldiers.findIndex((sol) => sol.type === previewSoldier.type);\r\n                            if (soldierIdx !== -1) {\r\n                                setSoldiers([...soldiers, { ...previewSoldier, amount: 1, gearSlots: 1, id: soldiers.filter((sol) => sol.type === previewSoldier.type).length + 1 }]);\r\n                                // setSoldiers([...soldiers.slice(0, soldierIdx), { ...soldiers[soldierIdx], amount: soldiers[soldierIdx].amount + 1 }, ...soldiers.slice(soldierIdx + 1)]);\r\n                            } else {\r\n                                setSoldiers([...soldiers, { ...previewSoldier, amount: 1, gearSlots: 1, id: 1 }]);\r\n                            }\r\n                        }}><img alt=\"plusicon\" style={{ width: \"3rem\" }} src={AddIcon} /></div>\r\n                </div>\r\n            </React.Fragment> :\r\n            <Carousel splitSize={10} resetPage={lastPreviewSoldier ? Math.ceil(listOfSoldiers.findIndex((soldier) => soldier.type === lastPreviewSoldier?.type) / 10) : 1} inputDivs={listOfSoldiers.map(renderSoldierTile)} />}\r\n        {specialistCount() > 4 ?\r\n            <div>You are not allowed to have more than 4 'Specialist' Soldiers in your crew</div> :\r\n            null}\r\n        {soldierCount() > 8 ? <div>You are not allowed to have more than 8 Soldiers in total in your crew</div> : null}\r\n        {hiringCost() > state.Credits ? <div>{\"You don't have enough credits ( \\xA5 ) to hire all of these crew men\"} </div> : null}\r\n        {previewSoldier ? <button\r\n            onClick={(event) => {\r\n                setPreviewSoldier(undefined);\r\n                event.preventDefault();\r\n                event.stopPropagation();\r\n            }}\r\n            className={\"dialog-btn back-btn foreground\"}\r\n        >Back</button> :\r\n            <button\r\n                onClick={(e) => {\r\n                    if (canSubmit()) {\r\n                        dispatch({ type: ADD_SOLDIERS, payload: soldiers });\r\n                        history.push(\"/CrewOverview\");\r\n                    }\r\n                    e.preventDefault();\r\n                    e.stopPropagation();\r\n                }}\r\n                className={canSubmit() ? \"dialog-btn confirm-btn\" : \"dialog-btn confirm-btn disabled\"}>\r\n                Confirm Staffing</button>}\r\n    </React.Fragment>;\r\n};\r\n","import { SoldierSelectionComponent } from \"../../components/SoldierSelection\";\r\n\r\nexport const SoldierSelectionPage = () =>\r\n    <SoldierSelectionComponent />;\r\n","import React from \"react\";\r\nimport { Character } from \"../types\";\r\n\r\nexport const CharacterInjuries = ({ character }: { character: Character }) =>\r\n    <React.Fragment>\r\n        {character.missNextGame ?\r\n            <table className=\"character-tile-table\" style={{ width: \"100%\", textAlign: \"left\" }}>\r\n                <colgroup>\r\n                    <col style={{ width: \"25%\" }} />\r\n                    <col style={{ width: \"75%\" }} />\r\n                </colgroup>\r\n                <tbody>\r\n                    <tr className={\"small-text\"}>\r\n                        <td style={{ fontSize: \"1rem\", paddingRight: \"1rem\", fontWeight: \"bold\" }}>Injuries</td>\r\n                        <td>Barely Alive - Misses the upcoming mission</td>\r\n                    </tr>\r\n                </tbody>\r\n            </table> :\r\n            undefined\r\n        }\r\n    </React.Fragment>;\r\n","import { useContext } from \"react\";\r\nimport { ReactReduxContext } from \"react-redux\";\r\nimport { CrewState } from \"../types\";\r\nimport { CharacterInjuries } from \"./CharacterInjuries\";\r\nimport { CharacterStatusBarTable } from \"./CharacterStatusBarTable\";\r\nimport { CharacterTileGearAndPowers } from \"./CharacterTileGearAndPowers\";\r\nimport { CharacterTileHeader } from \"./CharacterTileHeader\";\r\n\r\nexport const CharacterComponent = ({ isCaptain, isPdf }: { isCaptain: boolean; isPdf?: boolean }) => {\r\n    const { store } = useContext(ReactReduxContext);\r\n    const state = store.getState() as CrewState;\r\n    const character = (isCaptain ? state.Captain : state.FirstMate);\r\n    const id = isCaptain ? \"captain\" : \"firstmate\";\r\n    return <div key={`${id}_tile`} className={isPdf ? \"pdf-tile\" : \"character-tile\"}>\r\n        <CharacterTileHeader character={character} />\r\n        <CharacterStatusBarTable character={character} gearSlotsUsed={character.gear?.reduce((acc, gearItem) => acc + gearItem.gearSlots, 0) || 0} isTileTable={true} />\r\n        <CharacterTileGearAndPowers character={character} isPdf={isPdf} />\r\n        <CharacterInjuries character={character} />\r\n    </div>;\r\n};\r\n","import { useContext } from \"react\";\r\nimport { ReactReduxContext } from \"react-redux\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { PostGameIcon } from \"../../images\";\r\nimport { CrewState } from \"../../types\";\r\n\r\nexport const AdvanceComponent = () => {\r\n    const { store } = useContext(ReactReduxContext);\r\n    const state = store.getState() as CrewState;\r\n    const history = useHistory();\r\n    return <div className=\"statusbar-tiles\" onClick={() => history.push(\"/PostGameSequence\")} title=\"Click to open the post game sequence\">\r\n        <img\r\n            src={PostGameIcon}\r\n            style={{ paddingLeft: \"0.2rem\" }}\r\n            className=\"toolbar-compact-icon\"\r\n            id={\"PostGameIcon\"}\r\n            alt={\"Post Game Sequence\"}>\r\n        </img>\r\n        <div className={\"toolbar-compact-text\"}>\r\n            {`${state.Experience}`}\r\n        </div>\r\n    </div>;\r\n};\r\n","import { useHistory } from \"react-router-dom\";\r\nimport { SaveIcon } from \"../../images\";\r\n\r\nexport const FileComponent = () => {\r\n    const history = useHistory();\r\n    return <div className=\"statusbar-tiles\" onClick={() => history.push(\"/FileOperations\")} title=\"Click to open dialog to save/load a crew\">\r\n        <img\r\n            src={SaveIcon}\r\n            style={{ paddingLeft: \"0.2rem\", placeSelf: \"center\" }}\r\n            className=\"toolbar-icon\"\r\n            id={\"SaveIcon\"}\r\n            alt={\"SaveIcon\"}>\r\n        </img>\r\n    </div>;\r\n};\r\n","import { useContext } from \"react\";\r\nimport { ReactReduxContext, useDispatch } from \"react-redux\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { LeaveIcon, StarshipIcon } from \"../../images\";\r\nimport { SET_CREW, SET_SHIPNAME } from \"../../redux/actions\";\r\nimport { CrewState, InitialCrewState } from \"../../types\";\r\nimport { InputComponent } from \"../InputComponent\";\r\n\r\nexport const ShipnameComponent = () => {\r\n    const { store } = useContext(ReactReduxContext);\r\n    const dispatch = useDispatch();\r\n    const history = useHistory();\r\n    const state = store.getState() as CrewState;\r\n\r\n    return <div className=\"shipname\">\r\n        <img alt=\"shipname icon\" style={{ paddingLeft: \"0.6rem\" }} className=\"shipname-icon\" src={StarshipIcon}></img>\r\n        <InputComponent\r\n            callback={(name: string) => dispatch({ type: SET_SHIPNAME, payload: name })}\r\n            currentState={state.ShipName}\r\n            tooltip={state.ShipName} cssClass=\"input-field\" />\r\n        <img\r\n            alt=\"leave icon\"\r\n            className=\"shipname-icon\"\r\n            src={LeaveIcon}\r\n            onClick={() => {\r\n                dispatch({ type: SET_CREW, payload: InitialCrewState });\r\n                history.push(\"/\");\r\n            }}></img>\r\n    </div>;\r\n};\r\n","export default \"data:image/png;base64,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\"","import { AdvanceComponent } from \"./AdvanceComponent\";\r\nimport { CrewSizeComponent } from \"./CrewSizeComponent\";\r\nimport { FileComponent } from \"./FileComponent\";\r\nimport { ShipnameComponent } from \"./Shipname\";\r\nimport { TreasuryComponent } from \"./TreasuryComponent\";\r\n\r\nexport const StatusbarComponent = () =>\r\n    <div key=\"statusbar\" id=\"statusbar\" className=\"statusbar\">\r\n        <ShipnameComponent />\r\n        <div style={{ float: \"left\", flex: \"1 1 auto\", display: \"flex\" }}><FileComponent />\r\n\r\n            <TreasuryComponent />\r\n            <CrewSizeComponent />\r\n            <AdvanceComponent />\r\n        </div>\r\n    </div>;\r\n","import React, { useContext } from \"react\";\r\nimport { ReactReduxContext } from \"react-redux\";\r\nimport { CharacterComponent } from \"../../components/CharacterComponent\";\r\nimport { Carousel } from \"../../components/common/Carousel\";\r\nimport { SoldierComponent } from \"../../components/SoldierComponent\";\r\nimport { StatusbarComponent } from \"../../components/statusbar/StatusBarComponent\";\r\nimport { CrewState, Soldier } from \"../../types\";\r\n\r\nexport const CrewPage = () => {\r\n    const { store } = useContext(ReactReduxContext);\r\n    const state = store.getState() as CrewState;\r\n    const myStorage = localStorage;\r\n    const areEqual = (list: Soldier[]) => {\r\n        const { id: renamed, ...restFirstItem } = list[0];\r\n        return list.every((val) => {\r\n            const { id, ...restVal } = val;\r\n            return JSON.stringify(restVal) === JSON.stringify(restFirstItem);\r\n        });\r\n    };\r\n\r\n    myStorage.setItem(`${state.ShipName}_${state.Captain.name}_${state.Captain.level}_${state.FirstMate.level}_${state.Credits}`, JSON.stringify(state));\r\n    return <React.Fragment>\r\n        {state.Captain && state.FirstMate && state.Soldiers ?\r\n            <React.Fragment>\r\n                <StatusbarComponent key=\"statusbarComponent\" />\r\n                <div key=\"crewRoster\" id=\"crewRoster\" style={{ paddingTop: \"0.5rem\" }}>\r\n                    <Carousel\r\n                        splitSize={4}\r\n                        inputDivs={[\r\n                            <CharacterComponent key=\"captainComponent\" isCaptain={true} />,\r\n                            <CharacterComponent key=\"firstMateComponent\" isCaptain={false} />,\r\n                            ...state.Soldiers.reduce((acc, sol) => {\r\n                                const x = state.Soldiers.filter((sold) => sold.type === sol.type);\r\n                                if (areEqual(x) && acc.filter((sold) => sold.type === sol.type).length === 0) {\r\n                                    return [...acc, { ...sol, amount: x.reduce((sum, y) => sum + y.amount, 0) }];\r\n                                }\r\n                                if (!areEqual(x)) {\r\n                                    return [...acc, sol];\r\n                                }\r\n                                return acc;\r\n                                // return areEqual(x) && acc.filter((sold) => sold.type === sol.type).length > 0 ? acc : [...acc, { ...sol, amount: x.length }];\r\n                            }, [] as Soldier[]\r\n                            ).map((soldier) => <SoldierComponent key={`crew_member_${soldier.type}`} soldier={soldier} />),\r\n                        ]}\r\n                    />\r\n                </div>\r\n            </React.Fragment> : null\r\n        }\r\n    </React.Fragment>;\r\n};\r\n","import React, { useContext, useState } from \"react\";\r\nimport { ReactReduxContext } from \"react-redux\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { BackButtonComponent } from \"../../components/common/BackButton\";\r\nimport { ImportCrewIcon, PdfIcon, SaveIcon } from \"../../images\";\r\nimport { CrewState } from \"../../types\";\r\n\r\nexport const FileOperationsPage = () => {\r\n    const { store } = useContext(ReactReduxContext);\r\n    const state = store.getState() as CrewState;\r\n    const [fileName, setFileName] = useState<string>(`${state.ShipName} ${state.Captain.name}  (lvl ${state.Captain.level || 15})`);\r\n\r\n    const history = useHistory();\r\n\r\n    const saveToFileNew = (e: React.MouseEvent<HTMLElement, MouseEvent>) => {\r\n        const anchor = document.createElement(\"a\");\r\n        document.body.appendChild(anchor);\r\n        const json = JSON.stringify(state);\r\n        const blob = new Blob([json], { type: \"octet/stream\" });\r\n        const url = window.URL.createObjectURL(blob);\r\n        anchor.href = url;\r\n        anchor.download = `${fileName}.sg`;\r\n        anchor.id = \"ClickableDownloadAnchor\";\r\n        anchor.click();\r\n        window.URL.revokeObjectURL(url);\r\n        document.body.removeChild(document.getElementById(\"ClickableDownloadAnchor\") as Node);\r\n\r\n        if (state.ShipName && state.Captain.name && state.Captain.level) {\r\n            const myStorage = localStorage;\r\n            myStorage.setItem(`${state.ShipName}_${state.Captain.name}_${state.Captain.level}_${state.FirstMate.level}_${state.Credits}`, json);\r\n        }\r\n        history.push(\"/CrewOverview\");\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n    };\r\n    return <React.Fragment>\r\n        <div className=\"vertical-splitter\">\r\n            <div className=\"chapter-header\">Tap to load another warband from file or local storage</div>\r\n            <div style={{ display: \"grid\" }}>\r\n                <img\r\n                    alt=\"file upload\"\r\n                    className=\"file-ops-icon\"\r\n                    src={ImportCrewIcon}\r\n                    onClick={(event) => {\r\n                        history.push(\"/FileSystem\");\r\n                        event.preventDefault();\r\n                        event.stopPropagation();\r\n                    }}\r\n                />\r\n            </div>\r\n        </div>\r\n\r\n        <div className=\"vertical-splitter\">\r\n            <div style={{ borderTop: \"0.15rem solid\" }} className=\"chapter-header\">Tap to save your warband to file</div>\r\n            <div style={{ display: \"grid\" }}>\r\n                <img alt=\"save to file\" className=\"file-ops-icon\" src={SaveIcon} onClick={saveToFileNew} />\r\n            </div>\r\n        </div>\r\n        <div className=\"vertical-splitter\">\r\n            {/* <div className=\"pdf-container\"><PdfRenderer crewMembers={[state.Captain, state.FirstMate, ...state.Soldiers]} /></div> */}\r\n            <div style={{ borderTop: \"0.15rem solid\" }} className=\"chapter-header\">Export your warband to pdf</div>\r\n            <div style={{ display: \"grid\", paddingTop: \"2rem\", paddingBottom: \"2rem\" }}>\r\n                <img alt=\"file upload\" className=\"file-ops-icon\" src={PdfIcon} onClick={(event) => {\r\n                    history.push(\"/PdfExport\");\r\n                    event.preventDefault();\r\n                    event.stopPropagation();\r\n                }} />\r\n            </div>\r\n        </div>\r\n        <BackButtonComponent />\r\n    </React.Fragment>;\r\n};\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { SET_CREW } from \"../../redux/actions\";\r\nimport { CrewState, InitialCrewState } from \"../../types\";\r\n\r\nexport const FileSystemPage = () => {\r\n    const [selectedStorage, setSelectedStorage] = useState<CrewState>();\r\n    useEffect(() => undefined, [selectedStorage]);\r\n    const isStorageSelected = (state: CrewState) =>\r\n        state.Credits === selectedStorage?.Credits &&\r\n        state.ShipName === selectedStorage.ShipName &&\r\n        state.Captain.name === selectedStorage.Captain.name &&\r\n        state.Captain.level === selectedStorage.Captain.level &&\r\n        state.FirstMate.level === selectedStorage.FirstMate.level;\r\n\r\n    const history = useHistory();\r\n    const dispatch = useDispatch();\r\n    const getStorageTable = () => {\r\n        const myStorage: string[] = Object.values(localStorage);\r\n        return <table className=\"storage-table\">\r\n            <caption>Local storage</caption>\r\n            <thead>\r\n                <tr><td>Ship name</td><td>Captains name</td><td>Captains level</td><td>Credits</td></tr>\r\n            </thead>\r\n            <tbody>\r\n                {myStorage.length > 0 ?\r\n                    myStorage.map((stateString) => {\r\n                        const state: CrewState = JSON.parse(stateString);\r\n                        return <tr className={isStorageSelected(state) ? \"selected\" : \"\"} onClick={() => setSelectedStorage(state)}>\r\n                            <td>{state.ShipName}</td>\r\n                            <td>{state.Captain.name}</td>\r\n                            <td>{state.Captain.level} / {state.FirstMate.level}</td>\r\n                            <td>{state.Credits}</td>\r\n                        </tr>;\r\n                    }) :\r\n                    <tr><td colSpan={4}>Nothing has been stored yet or you have cleared your cache recently</td></tr>\r\n                }\r\n            </tbody>\r\n        </table>;\r\n    };\r\n    return <React.Fragment>\r\n        <label htmlFor=\"file-uploader\" style={{ float: \"left\", width: \"100%\", marginBottom: \"1rem\", display: \"grid\" }}>\r\n            <input\r\n                id=\"file-uploader\"\r\n                type=\"file\"\r\n                accept=\".sg\"\r\n                style={{ display: \"none\" }}\r\n                onChange={() => {\r\n                    const reader = new FileReader();\r\n                    reader.onload = (ev: ProgressEvent<FileReader>) => {\r\n                        dispatch({ type: SET_CREW, payload: JSON.parse(ev.target?.result as string) });\r\n                        history.push(\"/CrewOverview\");\r\n                    };\r\n                    reader.readAsText((document.querySelector(\"#file-uploader\") as HTMLInputElement)?.files?.item(0) as File);\r\n                }}\r\n            />\r\n            <button className=\"dialog-btn\" onClick={() => document.getElementById(\"file-uploader\")?.click()}>Load crew from file</button>\r\n        </label>\r\n        <div>Click on any entry in the local storage list and confirm your choice with the button below. </div>\r\n        {getStorageTable()}\r\n        <button\r\n            onClick={(event) => {\r\n                dispatch({ type: SET_CREW, payload: selectedStorage });\r\n                history.push(\"/CrewOverview\");\r\n                event.preventDefault();\r\n                event.stopPropagation();\r\n            }}\r\n            className={selectedStorage !== undefined ? \"dialog-btn\" : \"dialog-btn disabled\"}\r\n            style={{ float: \"left\", width: \"45%\" }}\r\n        >Load crew</button>\r\n        <button\r\n            onClick={(event) => {\r\n                event.preventDefault();\r\n                event.stopPropagation();\r\n                if (selectedStorage) {\r\n                    const key = `${selectedStorage.ShipName}_${selectedStorage.Captain.name}_${selectedStorage.Captain.level}_${selectedStorage.FirstMate.level}_${selectedStorage.Credits}`;\r\n                    localStorage.removeItem(key);\r\n                    setSelectedStorage(undefined);\r\n                }\r\n            }}\r\n            className={selectedStorage !== undefined ? \"dialog-btn dialog-btn-danger\" : \"dialog-btn disabled\"}\r\n            style={{ float: \"right\", width: \"45%\" }}\r\n        >Remove crew</button>\r\n        <button\r\n            onClick={(event) => {\r\n                dispatch({ type: SET_CREW, payload: InitialCrewState });\r\n                history.goBack();\r\n                event.preventDefault();\r\n                event.stopPropagation();\r\n            }}\r\n            className={\"dialog-btn back-btn\"}\r\n            style={{ float: \"left\", width: \"25%\" }}\r\n        >Back</button>\r\n    </React.Fragment>;\r\n};\r\n","import { useDispatch } from \"react-redux\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport * as Crew from \"../../data/Samples/Serenity.json\";\r\nimport { CreateCrewIcon, ImportCrewIcon, UseSampleIcon } from \"../../images\";\r\nimport { SET_CREW } from \"../../redux/actions\";\r\nimport { CrewState, InitialCrewState } from \"../../types\";\r\n\r\nexport const LandingPage = () => {\r\n\r\n    const history = useHistory();\r\n    const dispatch = useDispatch();\r\n\r\n    return <div className=\"landing-page \">\r\n        <div className=\"chapter-header\">Stargrave Crew Configuration</div>\r\n        <div\r\n            className=\"landing-page-tile\"\r\n            onClick={() => {\r\n                dispatch({ type: SET_CREW, payload: InitialCrewState });\r\n                history.push(\"/ShipName\");\r\n            }}>\r\n\r\n            <img alt=\"CreateWarband\" className=\"landing-page-icon\" src={CreateCrewIcon} />\r\n            <div className=\"landing-page-header\">Create new crew</div>\r\n        </div>\r\n        <div\r\n            className=\"landing-page-tile\"\r\n            onClick={() => {\r\n                history.push(\"/FileSystem\");\r\n            }}>\r\n\r\n            <img alt=\"SampleWarband\" className=\"landing-page-icon\" src={ImportCrewIcon} />\r\n            <div className=\"landing-page-header\">Load existing crew from file or local storage</div>\r\n        </div>\r\n        <div\r\n            className=\"landing-page-tile\"\r\n            onClick={() => {\r\n                dispatch({ type: SET_CREW, payload: (Crew as any).default as CrewState });\r\n                history.push(\"/CrewOverview\");\r\n            }}>\r\n\r\n            <img alt=\"SampleWarband\" className=\"landing-page-icon\" src={UseSampleIcon} />\r\n            <div className=\"landing-page-header\">Load the sample crew of the Serenity</div>\r\n        </div>\r\n    </div >;\r\n};\r\n","import React, { useContext } from \"react\";\r\nimport { ReactReduxContext } from \"react-redux\";\r\nimport { CrewState, ModifiedPower } from \"../../types\";\r\nimport { getPower } from \"../../Utils\";\r\n\r\nexport const PrintablePowerCards = ({ printAll }: { printAll: boolean }) => {\r\n    const { store } = useContext(ReactReduxContext);\r\n    const state = store.getState() as CrewState;\r\n    let printablePowers: ModifiedPower[] = [];\r\n    const powers = [...state.Captain.powers, ...state.FirstMate.powers];\r\n    if (!printAll) {\r\n        for (const power of powers) {\r\n            if (getPower(power.name).activation !== power.activation) {\r\n                printablePowers.push(power);\r\n            }\r\n        }\r\n    } else {\r\n        printablePowers = [...powers];\r\n    }\r\n\r\n    return <React.Fragment>\r\n        <div id=\"printable-power-cards\" className=\"pdf-container-clone\">\r\n            {printablePowers.map((power) => ({ ...getPower(power.name), activation: power.activation })).map((power) =>\r\n                <div id={`power-card-${power.name}`} key={`power-card-${power.name}`} className=\"power-card\">\r\n                    <div className=\"power-card-header\">{power.name} ({power.activation})</div>\r\n                    <div className=\"power-card-second-header\">{power.category} / {power.strain}</div>\r\n                    <div style={{ fontSize: `${power.effect.length > 700 ? 0.65 : power.effect.length > 600 ? 0.7 : 0.78}rem` }} className=\"power-card-text\">{power.effect}</div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    </React.Fragment>;\r\n};\r\n","import React, { useContext } from \"react\";\r\nimport { ReactReduxContext } from \"react-redux\";\r\nimport { Character, CrewState, Soldier, StatsEnum } from \"../../types\";\r\nimport { getBaseCaptain, getBaseFirstMate, getCurrentStatStrings, getPower, getStatsWithGear, isCaptain, isCharacter } from \"../../Utils\";\r\n\r\nconst renderHeader = (character: Character) => <React.Fragment>\r\n    <div style={{ border: \"2px solid black\", padding: \"0.5rem\", margin: \"0rem 0.1rem\", fontSize: \"1.5rem\", fontWeight: \"bold\" }}>\r\n        {`${isCaptain(character.type) ? \"Cpt.\" : \"Ltn.\"} ${character.name} (${character.background})`}\r\n        <div style={{ float: \"right\" }}>\r\n            <div style={{ float: \"left\" }}>Level</div>\r\n            <div style={{ float: \"right\", border: \"2px solid\", padding: \"0rem 0.5rem\", marginLeft: \"0.5rem\", fontWeight: \"bold\" }}>{character.level}</div>\r\n        </div>\r\n        {character.missNextGame ? <div style={{ fontSize: \"0.9rem\" }}>Barely Alive - Misses next mission</div> : undefined}\r\n    </div>\r\n</React.Fragment>;\r\n\r\nconst renderCrewmanHeader = (crewman: Soldier) => <React.Fragment>\r\n    <div style={{ border: \"2px solid black\", padding: \"0.2rem\", margin: \"0rem 0.1rem\", fontSize: \"1.2rem\", fontWeight: \"bold\" }}>\r\n        {`${crewman.type} (#${crewman.id})`}\r\n    </div>\r\n</React.Fragment>;\r\n\r\nconst renderPowers = (character: Character) => <div style={{ display: \"grid\", gridTemplateColumns: \"80% 20%\", clear: \"both\" }}>\r\n    <table style={{ fontSize: \"1.1rem\" }}>\r\n        <colgroup>\r\n            <col style={{ width: \"50%\" }} />\r\n            <col style={{ width: \"25%\" }} />\r\n            <col style={{ width: \"25%\" }} />\r\n        </colgroup>\r\n        <tbody>\r\n            <tr>\r\n                <td style={{ border: \"2px solid black\", padding: \"0.5rem\", margin: \"0rem 0.1rem\", fontWeight: \"bold\" }}>Power</td>\r\n                <td style={{ border: \"2px solid black\", padding: \"0.5rem\", margin: \"0rem 0.1rem\", fontWeight: \"bold\" }}>Activation</td>\r\n                <td style={{ border: \"2px solid black\", padding: \"0.5rem\", margin: \"0rem 0.1rem\", fontWeight: \"bold\" }}>Strain</td>\r\n            </tr>\r\n            {character.powers.map((power) => <tr >\r\n                <td style={{ border: \"2px solid black\", padding: \"0rem 0.5rem\", margin: \"0rem 0.1rem\" }}\r\n                    key={`add_dialog_${character.name}_${character.type}_power_${power.name}`\r\n                    }>{power.name}</td>\r\n                <td style={{ border: \"2px solid black\", padding: \"0rem 0.5rem\", margin: \"0rem 0.1rem\" }}\r\n                    key={`add_dialog_${character.name}_${character.type}_power_${power.activation}`\r\n                    }>{power.activation}</td>\r\n                <td style={{ border: \"2px solid black\", padding: \"0rem 0.5rem\", margin: \"0rem 0.1rem\" }}\r\n                    key={`add_dialog_${character.name}_${character.type}_power_${getPower(power.name).strain}`\r\n                    }>{getPower(power.name).strain}</td>\r\n            </tr>)}\r\n        </tbody>\r\n    </table>\r\n    <div style={{ grid: \"1/2\", border: \"2px solid black\", padding: \"0.5rem\", margin: \"0.15rem 0.1rem\", fontSize: \"1.5rem\", fontWeight: \"bold\", textAlign: \"center\" }}>\r\n        <div style={{ fontSize: \"1rem\" }}>Current Health</div>\r\n        <div style={{ paddingTop: \"0.5rem\" }}>{character.currentHealth || character.stats.Health}</div>\r\n    </div>\r\n</div>;\r\n\r\nconst renderGear = (member: Character | Soldier) => <React.Fragment>\r\n    <div style={{ border: \"2px solid black\", padding: \"0.5rem\", margin: isCharacter(member) ? \"0rem 0.1rem 0.5rem\" : \"0rem 0.1rem 0.15rem\", fontSize: \"0.9rem\" }}>\r\n        <div style={{ fontSize: \"1.1rem\", fontWeight: \"bold\" }}>Gear</div>\r\n        {isCharacter(member) ? member.gear?.map((gear) => `${gear.name}`).join(\", \") : member.gear.join(\", \")}\r\n    </div>\r\n</React.Fragment>;\r\n\r\nconst renderCharacterStats = (member: Character) => {\r\n    const stats = getStatsWithGear(member.stats, {}, member.gear);\r\n    const currentStats = Object.entries(getCurrentStatStrings(stats, member.currentHealth));\r\n    const cells: JSX.Element[] = [];\r\n    for (const [key, value] of currentStats) {\r\n        if (key !== StatsEnum.Health) {\r\n            cells.push(<div style={{ fontSize: \"1rem\", fontWeight: \"bold\", float: \"left\", textAlign: \"center\", padding: \"0.5rem 0rem\", minWidth: \"20%\" }}>\r\n                <div\r\n                    style={{ border: \"2px solid black\", padding: \"0.5rem\", margin: \"0rem 0.1rem\", fontSize: \"1.5rem\" }}\r\n                    className={\r\n                        isCharacter(member) && stats[key as StatsEnum] !== (isCaptain(member.type) ?\r\n                            getBaseCaptain() : getBaseFirstMate()).stats[key as StatsEnum] ? \"improved-stat\" : \"\"\r\n                    }\r\n                    key={`add_dialog_${member.name}_stat_${key}`\r\n                    }>\r\n                    {value}\r\n                </div>\r\n                <div key={`add_dialog__stat_header_${key}`}>{key}</div>\r\n            </div>);\r\n        }\r\n    }\r\n    return <React.Fragment>{cells}</React.Fragment>;\r\n};\r\n\r\nconst renderCrewStats = (member: Soldier) => {\r\n    const currentStats = Object.entries(getCurrentStatStrings(member.stats, member.currentHealth));\r\n    const cells: JSX.Element[] = [];\r\n    for (const [key, value] of currentStats) {\r\n        if (key !== StatsEnum.Health) {\r\n            cells.push(<div style={{ fontSize: \"1rem\", fontWeight: \"bold\", float: \"left\", textAlign: \"center\", paddingTop: \"0.15rem\", minWidth: \"20%\" }}>\r\n                <div\r\n                    style={{ border: \"2px solid black\", padding: \"0.2rem\", margin: \"0rem 0.1rem\", fontSize: \"1.1rem\" }}\r\n                    key={`add_dialog_${member.type}_stat_${key}`\r\n                    }>\r\n                    {value}\r\n                </div>\r\n                <div key={`add_dialog__stat_header_${key}`}>{key}</div>\r\n            </div>);\r\n        }\r\n    }\r\n    return <React.Fragment>\r\n        <div style={{ display: \"grid\", gridTemplateColumns: \"80% 20%\" }}>\r\n            <div style={{ display: \"flex\" }}>{cells}</div>\r\n            <div style={{ border: \"2px solid black\", padding: \"0.2rem\", margin: \"0.15rem 0.1rem\", fontSize: \"1.1rem\", fontWeight: \"bold\", textAlign: \"center\", gridArea: \"1/2/3/2\" }}>\r\n                <div style={{ fontSize: \"1rem\" }}>Current Health</div>\r\n                <div style={{ paddingTop: \"0.5rem\" }}>{member.currentHealth || member.stats.Health}</div>\r\n            </div>\r\n            {renderGear(member)}\r\n        </div>\r\n    </React.Fragment >;\r\n};\r\n\r\nconst PdfCharacter = (character: Character) => <React.Fragment>\r\n    {renderHeader(character)}\r\n    {renderCharacterStats(character)}\r\n    {renderPowers(character)}\r\n    {renderGear(character)}\r\n</React.Fragment>;\r\n\r\nconst PdfSoldier = (crewman: Soldier) => <React.Fragment>\r\n    {renderCrewmanHeader(crewman)}\r\n    {renderCrewStats(crewman)}\r\n</React.Fragment>;\r\n\r\nexport const PdfCharacters = () => {\r\n    const { store } = useContext(ReactReduxContext);\r\n    const state = store.getState() as CrewState;\r\n    return <div className={\"pdf-divider\"}>\r\n        {PdfCharacter(state.Captain)}\r\n        {PdfCharacter(state.FirstMate)}\r\n    </div>;\r\n};\r\nexport const PdfSoldiers = () => {\r\n    const { store } = useContext(ReactReduxContext);\r\n    const state = store.getState() as CrewState;\r\n    return <div className={\"pdf-divider\"}>\r\n        {state.Soldiers.map(PdfSoldier)}\r\n    </div>;\r\n};\r\n","import { PdfCharacters, PdfSoldiers } from \"./PdfRosterComponents\";\r\n\r\nexport const PdfRenderer = () =>\r\n    <div className=\"pdf-container\">\r\n        <PdfCharacters />\r\n        <PdfSoldiers />\r\n    </div>;\r\n","import React, { useContext } from \"react\";\r\nimport { ReactReduxContext } from \"react-redux\";\r\nimport { CrewState } from \"../../types\";\r\n\r\nexport const StorageSheet = () => {\r\n    const { store } = useContext(ReactReduxContext);\r\n    const state = store.getState() as CrewState;\r\n    const storage = state.ShipsHold;\r\n    const Square = ({ checked }: { checked?: boolean }) => <div className=\"pdf-xp-checkbox\" >{checked ? \"X\" : \"\"}</div>;\r\n    const Squares = ({ x }: { x: number }) => <div>{Array.from({ length: x }).map(() => <Square />)}</div>;\r\n    const expTable = () => <div style={{ width: \"50 %\", float: \"right\" }}>\r\n        <div className=\"very-large-text\">Mission Log:</div>\r\n        <div className=\"pdf-xp-checkbox-container\">\r\n            <div>Played a scenario (30xp)</div>\r\n            <Square checked={true} />\r\n        </div>\r\n        <div className=\"pdf-xp-checkbox-container\">\r\n            <div>At Least one own crew member killed (30xp)</div>\r\n            <Square />\r\n        </div>\r\n        <div className=\"pdf-xp-checkbox-container\">\r\n            <div>Loot tokens unlocked <br />(+20 xp)</div>\r\n            <Squares x={7} />\r\n        </div>\r\n        <div className=\"pdf-xp-checkbox-container\">\r\n            <div>Successful power casts <br />(+10 xp / Max 100 xp)</div>\r\n            <Squares x={10} />\r\n        </div>\r\n        <div className=\"pdf-xp-checkbox-container\">\r\n            <div>Rival crew members killed <br />(+10 xp / Max 40 xp)</div>\r\n            <Squares x={4} />\r\n        </div>\r\n        <div className=\"pdf-xp-checkbox-container\">\r\n            <div>NPCs killed <br />(+5 xp / Max 20 xp)</div>\r\n            <Squares x={4} />\r\n        </div>\r\n        <div></div>\r\n        <div className=\"pdf-xp-checkbox-container\">\r\n            <div>Scenario specific xp gained</div>\r\n            <Squares x={8} />\r\n        </div>\r\n        <div className=\"pdf-xp-checkbox-container\">\r\n            <div>Total XP Gained:</div>\r\n            <div className=\"pdf-xp-total\" ></div>\r\n        </div>\r\n    </div>;\r\n    return <React.Fragment>\r\n        <div id=\"printable-storage-sheet\" className=\"pdf-container-clone\">\r\n            {expTable()}\r\n        </div>\r\n    </React.Fragment>;\r\n};\r\n","import React from \"react\";\r\nimport { QuickReferenceSheet1, QuickReferenceSheet2 } from \"../images\";\r\n\r\nexport const PrintableQuickReference = () =>\r\n    <React.Fragment>\r\n        <div id=\"printable-quick-reference1\" style={{ position: \"absolute\", top: \"-999rem\" }}>\r\n            <img alt=\"Quick Reference\" style={{ width: \"29.7cm\", height: \"21cm\" }} src={QuickReferenceSheet1}></img>\r\n        </div>\r\n        <div id=\"printable-quick-reference2\" style={{ position: \"absolute\", top: \"-999rem\" }}>\r\n            <img alt=\"Quick Reference\" style={{ width: \"29.7cm\", height: \"21cm\" }} src={QuickReferenceSheet2}></img>\r\n        </div>\r\n    </React.Fragment>;\r\n","import html2canvas from \"html2canvas\";\r\nimport { jsPDF } from \"jspdf\";\r\nimport React, { useContext, useState } from \"react\";\r\nimport { ReactReduxContext } from \"react-redux\";\r\nimport { BackButtonComponent } from \"../../components/common/BackButton\";\r\nimport { PrintablePowerCards } from \"../../components/pdf/PdfPowerCards\";\r\nimport { PdfRenderer } from \"../../components/pdf/PdfRenderer\";\r\nimport { StorageSheet } from \"../../components/pdf/PdfStorageSheet\";\r\nimport { PrintableQuickReference } from \"../../components/ReferenceSheets\";\r\nimport { PdfIcon } from \"../../images\";\r\nimport { CrewState } from \"../../types\";\r\n\r\nexport const PdfExportPage = () => {\r\n    const { store } = useContext(ReactReduxContext);\r\n    const state = store.getState() as CrewState;\r\n    const [printCheatSheet, setPrintCheatSheet] = useState<boolean>(false);\r\n    const [printPowerCards, setPrintPowerCards] = useState<boolean | undefined>(undefined);\r\n    const exportPdf = async () => {\r\n        const jsPdf = new jsPDF(\"landscape\", \"mm\", \"a4\", true);\r\n        let canvas: HTMLCanvasElement;\r\n        const container = Array.from(document.querySelectorAll(\".pdf-container\"));\r\n        for (let i = 0; i < container.length; i++) {\r\n            if (i > 0) {\r\n                jsPdf.addPage();\r\n            }\r\n            canvas = await html2canvas(container[i] as unknown as HTMLElement, { scale: 4, letterRendering: true });\r\n            jsPdf.addImage(canvas.toDataURL(\"image/png\"), \"JPEG\", 0, 0, jsPdf.internal.pageSize.getWidth(), jsPdf.internal.pageSize.getHeight());\r\n        }\r\n        jsPdf.addPage();\r\n        canvas = await html2canvas(document.querySelector(\"#printable-storage-sheet\") as HTMLElement, { scale: 2, letterRendering: true });\r\n        jsPdf.addImage(canvas.toDataURL(\"image/png\"), \"JPEG\", 0, 0, jsPdf.internal.pageSize.getWidth(), jsPdf.internal.pageSize.getHeight());\r\n        if (printPowerCards) {\r\n            jsPdf.addPage();\r\n            canvas = await html2canvas(document.querySelector(\"#printable-power-cards\") as HTMLElement, { scale: 2, letterRendering: true });\r\n            jsPdf.addImage(canvas.toDataURL(\"image/png\"), \"JPEG\", 0, 0, jsPdf.internal.pageSize.getWidth(), jsPdf.internal.pageSize.getHeight());\r\n        }\r\n        if (printCheatSheet) {\r\n            jsPdf.addPage();\r\n            canvas = await html2canvas(document.querySelector(\"#printable-quick-reference1\") as HTMLElement, { scale: 2, letterRendering: true });\r\n            jsPdf.addImage(canvas.toDataURL(\"image/png\"), \"JPEG\", 0, 0, jsPdf.internal.pageSize.getWidth(), jsPdf.internal.pageSize.getHeight());\r\n            jsPdf.addPage();\r\n            canvas = await html2canvas(document.querySelector(\"#printable-quick-reference2\") as HTMLElement, { scale: 2, letterRendering: true });\r\n            jsPdf.addImage(canvas.toDataURL(\"image/png\"), \"JPEG\", 0, 0, jsPdf.internal.pageSize.getWidth(), jsPdf.internal.pageSize.getHeight());\r\n        }\r\n        jsPdf.save(`${state.ShipName} ${state.Captain.name}  (lvl ${state.Captain.level || 15}).pdf`);\r\n    };\r\n    return <React.Fragment>\r\n        <div style={{ borderTop: \"0.15rem solid\" }} className=\"chapter-header\">Export your warband to pdf</div>\r\n        <div style={{ display: \"grid\", paddingTop: \"2rem\", paddingBottom: \"2rem\" }}>\r\n            <img alt=\"file upload\" className=\"file-ops-icon\" src={PdfIcon} onClick={exportPdf} />\r\n        </div>\r\n        <div className={\"pdf-switch\"}>\r\n            <div onClick={() => setPrintCheatSheet(true)} className={printCheatSheet ? \"selected pdf-sub-switch\" : \"pdf-sub-switch\"}>Add cheat sheet</div>\r\n            <div onClick={() => setPrintCheatSheet(false)} style={{ borderLeft: \"1px solid\" }} className={printCheatSheet ? \"pdf-sub-switch\" : \"selected pdf-sub-switch\"}>Nah... I'm good</div>\r\n        </div>\r\n        <div className={\"pdf-threeway-switch\"}>\r\n            <div onClick={() => setPrintPowerCards(true)} className={printPowerCards ? \"selected pdf-sub-switch\" : \"pdf-sub-switch\"}>All power cards</div>\r\n            <div onClick={() => setPrintPowerCards(false)} style={{ borderLeft: \"1px solid\" }} className={printPowerCards === false ? \"selected pdf-sub-switch\" : \"pdf-sub-switch\"}>Improved powers</div>\r\n            <div onClick={() => setPrintPowerCards(undefined)} style={{ borderLeft: \"1px solid\" }} className={printPowerCards === undefined ? \"selected  pdf-sub-switch\" : \"pdf-sub-switch\"}>No, thank you</div>\r\n        </div>\r\n        <PdfRenderer />\r\n        {printCheatSheet ? <PrintableQuickReference /> : undefined}\r\n        {printPowerCards !== undefined ? <PrintablePowerCards printAll={printPowerCards} /> : undefined}\r\n        <StorageSheet />\r\n        <BackButtonComponent />\r\n    </React.Fragment>;\r\n};\r\n","import React, { useContext } from \"react\";\r\nimport { ReactReduxContext } from \"react-redux\";\r\nimport { BackButtonComponent } from \"../../components/common/BackButton\";\r\nimport { TreasuryIcon } from \"../../images\";\r\nimport { CrewState } from \"../../types\";\r\nexport const TransactionHistoryPage = () => {\r\n    const { store } = useContext(ReactReduxContext);\r\n    const state = store.getState() as CrewState;\r\n    return <React.Fragment>\r\n        <div className=\"chapter-header\">Your transaction log</div>\r\n        {state.CreditRecords.map((record) => <div className=\"transaction-list\">\r\n            <div>{record.record}</div>\r\n            <div style={{ textAlign: \"center\" }}>{record.sign ? \"+\" : \"-\"} {`${record.credits} \\xA5`}</div>\r\n        </div>)}\r\n        <div\r\n            className=\"transaction-sum\"\r\n            title={\"Current amount of credits in your treasury\"}>\r\n            <div className={\"toolbar-compact-icon\"}>Current Treasury</div>\r\n            <img\r\n                style={{ placeSelf: \"normal\" }}\r\n                src={TreasuryIcon}\r\n                className={\"toolbar-compact-icon\"}\r\n                id={\"TreasuryIcon\"}\r\n                alt={\"TreasuryIcon\"}>\r\n            </img>\r\n            <div style={{ fontSize: \"1.5rem\" }}>\r\n                {`${state.Credits} \\xA5`}\r\n            </div>\r\n        </div>\r\n        <BackButtonComponent />\r\n    </React.Fragment>;\r\n};\r\n","import React, { useState } from \"react\";\r\nimport { DropdownOptions } from \"../../types\";\r\nimport { useComponentVisible } from \"../../UseComponentVisible\";\r\n\r\nexport const XPDropDown = ({ list, dropdownOptions, callbackFn }: { list: string[]; dropdownOptions: DropdownOptions; callbackFn(item: string): void }) => {\r\n    const [selectedItem, setSelectedItem] = useState<string>(dropdownOptions.placeholder as string);\r\n    const getCssProps = () => {\r\n        const position = document.getElementById(`dropdown-container-${dropdownOptions.id}`)?.getBoundingClientRect();\r\n        return { top: (position?.top || 0) + 42, left: (position?.left || 0), width: (position?.width || 0) };\r\n    };\r\n    const renderList = () => list.filter((item: string) => (item !== selectedItem)).map((listItem) =>\r\n        <div key={`dropdown-list-item-${dropdownOptions.id}-${listItem}`}\r\n            className=\"gear-selection dropdown-input dropdown-input-list\"\r\n            onMouseDown={() => {\r\n                setSelectedItem(listItem);\r\n                callbackFn(listItem);\r\n                setIsComponentVisible(false);\r\n            }}\r\n        >\r\n            <div>{listItem}</div>\r\n        </div>\r\n    );\r\n    const { ref, isComponentVisible, setIsComponentVisible, openMenu } = useComponentVisible(false);\r\n    return <React.Fragment>\r\n        <div\r\n            className=\"gear-selection selected dropdown-input\"\r\n            onClick={openMenu}\r\n            id={`dropdown-container-${dropdownOptions.id}`}>\r\n            <div>{selectedItem}</div>\r\n        </div>\r\n        <div ref={ref}>\r\n            {isComponentVisible ?\r\n                <div style={getCssProps()} className=\"dropdown-portal\">\r\n                    {list.length > 0 ? renderList() : <div key={`dropdown-list-item-${dropdownOptions.id}-empty-list`} className=\"dropdown-empty-list\">No match found for search string. Please refine your search.</div>}\r\n                </div> : null}\r\n        </div>\r\n    </React.Fragment>;\r\n\r\n};\r\n","import React, { useContext, useEffect, useState } from \"react\";\r\nimport { ReactReduxContext, useDispatch } from \"react-redux\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { CustomBackButtonComponent } from \"../../components/common/CustomBackButton\";\r\nimport { XPDropDown } from \"../../components/dropdowns/XPDropdown\";\r\nimport { REWIND_XP, SPEND_XP } from \"../../redux/actions\";\r\nimport { CrewState, LevelImprovements } from \"../../types\";\r\nimport { getAdvancePerLevel } from \"../../Utils\";\r\nexport const LevelUpPage = () => {\r\n    const { store } = useContext(ReactReduxContext);\r\n    const state = store.getState() as CrewState;\r\n    const dispatch = useDispatch();\r\n    const history = useHistory();\r\n    const [captainLevels, setCaptainLevels] = useState<number>(0);\r\n    const [firstMateLevels, setfirstMateLevels] = useState<number>(0);\r\n    const [deciChoice, setDeciChoice] = useState<boolean>(true);\r\n    const [x, setX] = useState<string[]>([]);\r\n    const [y, setY] = useState<string[]>([]);\r\n    useEffect(() => {\r\n        setX(getCaptainLevels());\r\n        setY(getFirstMateLevels());\r\n    }, [captainLevels, firstMateLevels, deciChoice]);\r\n    const getCaptainLevels = () => {\r\n        const difference = state.Captain && state.FirstMate ? (state.Captain.level + captainLevels) - (state.FirstMate.level + firstMateLevels) : 0;\r\n        const experienceAvailable = Math.min(3, 20 - difference, Math.floor(state.Experience / 100) - firstMateLevels);\r\n        return [...Array(experienceAvailable + 1).keys()].map((nr) => `${nr}`);\r\n    };\r\n    const getFirstMateLevels = () => {\r\n        const difference = state.Captain && state.FirstMate ? (state.Captain.level + captainLevels) - (state.FirstMate.level + firstMateLevels) : 0;\r\n        const experienceAvailable = Math.min(3, difference - 5, Math.floor(state.Experience / 100) - captainLevels);\r\n        return [...Array(experienceAvailable + 1).keys()].map((nr) => `${nr}`);\r\n    };\r\n    const renderImprovements = (isCaptain: boolean) => {\r\n        const lvl = isCaptain ? (state.Captain).level : (state.FirstMate).level;\r\n        if (isCaptain ? captainLevels === 0 : firstMateLevels === 0) {\r\n            return [<div className=\"improvement-token\">No level up for this guy, so no improvements</div>];\r\n        }\r\n        const nodes: JSX.Element[] = [];\r\n        for (let i = 1; i < (isCaptain ? captainLevels + 1 : firstMateLevels + 1); i++) {\r\n            switch (getAdvancePerLevel(lvl + i)) {\r\n                case LevelImprovements.LowerActivation:\r\n                    nodes.push(<div className=\"improvement-token selected\">{LevelImprovements.LowerActivation}</div>);\r\n                    break;\r\n                case LevelImprovements.ImproveStat:\r\n                    nodes.push(<div className=\"improvement-token selected\">{LevelImprovements.ImproveStat}</div>);\r\n                    break;\r\n                case LevelImprovements.NewPower:\r\n                    nodes.push(<div className=\"improvement-token selected\">{LevelImprovements.NewPower}</div>);\r\n                    break;\r\n                case LevelImprovements.NewPowerOrImproveStat:\r\n                    nodes.push(<div style={{ display: \"grid\", gridTemplateColumns: \"40% 20% 40%\" }}>\r\n                        <div onClick={() => deciChoice ? undefined : setDeciChoice(true)} className={deciChoice ? \"improvement-token selected\" : \"improvement-token\"}>{LevelImprovements.NewPower}</div>\r\n                        <div style={{ textAlign: \"center\", fontWeight: \"bold\", paddingTop: \"1rem\" }}> OR </div >\r\n                        <div onClick={() => deciChoice ? setDeciChoice(false) : undefined} className={!deciChoice ? \"improvement-token selected\" : \"improvement-token\"}>{LevelImprovements.ImproveStat}</div>\r\n                    </div>);\r\n                    break;\r\n                default:\r\n            }\r\n        }\r\n        return nodes;\r\n    };\r\n    return <React.Fragment>\r\n        <div className=\"chapter-header\">You have {state.Experience} xp left.\r\n            <div className=\"modal-sub-header\">For 100 xp you may buy a level for any character</div>\r\n            <div className=\"modal-sub-header\">Choose how many levels each character should advance by using the drop down menus</div>\r\n        </div>\r\n\r\n        <div className=\"xp-btn\">\r\n            <div>Level up {state.Captain.name} ({state.Captain.level})</div>\r\n            <XPDropDown list={x} dropdownOptions={{ id: \"captainLevels\", placeholder: \"0\" }} callbackFn={(nr) => setCaptainLevels(parseInt(nr, 10))} />\r\n        </div>\r\n        <div style={{ display: \"flex\", flexDirection: \"column\" }}>\r\n            {renderImprovements(true)}\r\n        </div>\r\n        <div className=\"xp-btn\">\r\n            <div>Level up {state.FirstMate.name} ({state.FirstMate.level})</div>\r\n            <XPDropDown list={y} dropdownOptions={{ id: \"firstMateLevels\", placeholder: \"0\" }} callbackFn={(nr) => setfirstMateLevels(parseInt(nr, 10))} />\r\n        </div>\r\n        <div style={{ display: \"flex\", flexDirection: \"column\" }}>\r\n            {renderImprovements(false)}\r\n        </div>\r\n        <button\r\n            onClick={() => {\r\n                dispatch({ type: SPEND_XP, payload: ((captainLevels + firstMateLevels) * 100) });\r\n                history.push(captainLevels > 0 ? \"/LevelUpCaptain\" : firstMateLevels > 0 ? \"/LevelUpFirstMate\" : \"/LootDeclaration\", { captainLevels, firstMateLevels, choice: deciChoice ? LevelImprovements.NewPower : LevelImprovements.ImproveStat });\r\n            }}\r\n            className={\"dialog-btn confirm-btn\"}\r\n        >Confirm</button>\r\n        <CustomBackButtonComponent dispatchFunction={() => dispatch({ type: REWIND_XP })} />\r\n    </React.Fragment>;\r\n};\r\n","import React, { useState } from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { BackButtonComponent } from \"../../components/common/BackButton\";\r\nimport { XPDropDown } from \"../../components/dropdowns/XPDropdown\";\r\nimport { ADD_XP } from \"../../redux/actions\";\r\nexport const ExperiencePage = () => {\r\n    const dispatch = useDispatch();\r\n    const history = useHistory();\r\n    const [crewMemberDied, setCrewMemberDied] = useState<boolean>(false);\r\n    const [lootUnlocked, setLootUnlocked] = useState<number>(0);\r\n    const [powerActivations, setPowerActivations] = useState<number>(0);\r\n    const [rivalsKilled, setRivalsKilled] = useState<number>(0);\r\n    const [npcsKilled, setNPCsKilled] = useState<number>(0);\r\n    const [scenarioSpecific, setScenarioSpecific] = useState<number>(0);\r\n    const getTotalXp = () => Math.min(300, (crewMemberDied ? 30 : 0) + (lootUnlocked * 20) + (powerActivations * 10) + (rivalsKilled * 10) + (npcsKilled * 5) + scenarioSpecific + 30);\r\n    return <React.Fragment>\r\n        <div className=\"chapter-header\">How much Experience did you gain?</div>\r\n        <div className=\"xp-btn\">\r\n\r\n            <div>Game Played</div>\r\n            <div style={{ margin: \"0rem\", opacity: 1 }} className=\"gear-selection disabled\">30 xp</div>\r\n        </div>\r\n        <div className={\"xp-btn\"}>\r\n            <div>At Least one own crew member killed (30xp)</div>\r\n            <XPDropDown list={[\"Yes\", \"No\"]} dropdownOptions={{ id: \"deadCrewman\", placeholder: \"No\" }} callbackFn={(answer) => answer === \"Yes\" ? setCrewMemberDied(true) : setCrewMemberDied(false)} />\r\n        </div>\r\n        <div className=\"xp-btn\">\r\n            <div>Loot tokens unlocked <br />(+20 xp)</div>\r\n            <XPDropDown list={[\"0\", \"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\"]} dropdownOptions={{ id: \"lootUnlocked\", placeholder: \"0\" }} callbackFn={(nr) => setLootUnlocked(parseInt(nr, 10))} />\r\n        </div>\r\n        <div className=\"xp-btn\">\r\n            <div>Successful power casts <br />(+10 xp / Max 100 xp)</div>\r\n            <XPDropDown list={[\"0\", \"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"10\"]} dropdownOptions={{ id: \"powerActivated\", placeholder: \"0\" }} callbackFn={(nr) => setPowerActivations(parseInt(nr, 10))} />\r\n        </div>\r\n        <div className=\"xp-btn\">\r\n            <div>Rival crew members killed <br />(+10 xp / Max 40 xp)</div>\r\n            <XPDropDown list={[\"0\", \"1\", \"2\", \"3\", \"4\"]} dropdownOptions={{ id: \"rivalsKilled\", placeholder: \"0\" }} callbackFn={(nr) => setRivalsKilled(parseInt(nr, 10))} />\r\n        </div>\r\n        <div className=\"xp-btn\">\r\n            <div>NPCs killed <br />(+5 xp / Max 20 xp)</div>\r\n            <XPDropDown list={[\"0\", \"1\", \"2\", \"3\", \"4\"]} dropdownOptions={{ id: \"NPCsKilled\", placeholder: \"0\" }} callbackFn={(nr) => setNPCsKilled(parseInt(nr, 10))} />\r\n        </div>\r\n        <div></div>\r\n        <div className=\"xp-btn\">\r\n            <div>Scenario specific xp gained</div>\r\n            <XPDropDown list={[\"0\", \"5\", \"10\", \"15\", \"20\", \"25\", \"30\", \"35\", \"40\", \"45\", \"50\"]} dropdownOptions={{ id: \"scenarioXP\", placeholder: \"0\" }} callbackFn={(nr) => setScenarioSpecific(parseInt(nr, 10))} />\r\n        </div>\r\n        <div className=\"xp-btn selected\">\r\n\r\n            <div>Total Experience Gained <br />(Max 300 xp)</div>\r\n            <div style={{ margin: \"0rem\", opacity: 1, fontSize: \"1.2rem\" }} className=\"gear-selection disabled\">{getTotalXp()} XP</div>\r\n        </div>\r\n        <button\r\n            onClick={() => {\r\n                dispatch({\r\n                    type: ADD_XP,\r\n                    payload: getTotalXp(),\r\n                });\r\n                history.push(\"/LevelUp\");\r\n            }}\r\n            className={\"dialog-btn confirm-btn\"}\r\n        >Confirm</button>\r\n        <BackButtonComponent />\r\n    </React.Fragment>;\r\n};\r\n","import React, { useState } from \"react\";\r\nimport { BackgroundEnum, ModifiedPower, Power } from \"../types\";\r\nimport { getUnselectedPowers, isCorePower } from \"../Utils\";\r\nimport { Carousel } from \"./common/Carousel\";\r\n\r\nexport const SelectNewPowers = (\r\n    { currentPowers, background, updatePowers }:\r\n        { currentPowers: ModifiedPower[]; background: BackgroundEnum; updatePowers(value: ModifiedPower | undefined): void }\r\n) => {\r\n    const [selectedPower, setSelectedPower] = useState<ModifiedPower>();\r\n    const isPowerSelected = (power: Power) => selectedPower && selectedPower.name === power.name;\r\n    return <React.Fragment>\r\n        <div className=\"modal-header\">\r\n            {\"Choose 1 additional Power\"}\r\n            <div className=\"modal-sub-header\">{\"Swipe or use the page buttons to see more entries\"}</div>\r\n        </div>\r\n        <Carousel\r\n            splitSize={8}\r\n            inputDivs={getUnselectedPowers(currentPowers).map((power) =>\r\n                <div\r\n                    onClick={() => {\r\n                        if (selectedPower) {\r\n                            setSelectedPower(undefined);\r\n                            updatePowers(undefined);\r\n                        } else {\r\n                            setSelectedPower(power);\r\n                            updatePowers({ name: power.name, activation: isCorePower(power.name, background) ? power.activation : power.activation + 2 });\r\n                        }\r\n                    }}\r\n                    className={isPowerSelected(power) ? \"power-selection emphasized selected\" : selectedPower ? \"power-selection disabled\" : \"power-selection\"}\r\n                    key={`add_dialog_x_stat_${power.name}`}>\r\n\r\n                    <div>{power.name}</div>\r\n                    <div style={{\r\n                        fontSize: \"0.8rem\",\r\n                        fontWeight: \"normal\",\r\n                    }}>\r\n                        {isCorePower(power.name, background) ? power.activation : power.activation + 2} / {power.strain} / {Array.isArray(power.category) ? `${power.category.join(\", \")}` : power.category}\r\n                    </div>\r\n                </div>\r\n            )}\r\n        />\r\n    </React.Fragment>;\r\n};\r\n","import React, { useContext, useState } from \"react\";\r\nimport { ReactReduxContext, useDispatch } from \"react-redux\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { Carousel } from \"../../components/common/Carousel\";\r\nimport { CustomBackButtonComponent } from \"../../components/common/CustomBackButton\";\r\nimport { SelectNewPowers } from \"../../components/SelectNewPowers\";\r\nimport { REWIND_XP, SET_CAPTAIN, SET_FIRST_MATE } from \"../../redux/actions\";\r\nimport { BackgroundEnum, CrewState, LevelImprovements, LevelUpState, ModifiedPower, Power, Stats, StatsEnum } from \"../../types\";\r\nimport { getAdvancePerLevel, getPower } from \"../../Utils\";\r\ninterface LvlImprov {\r\n    LevelImprovement: LevelImprovements;\r\n    amount: number;\r\n}\r\nexport const LevelUpCharacterPage = ({ isCaptainCharacter, pageState }: { isCaptainCharacter: boolean; pageState: LevelUpState }) => {\r\n    const { store } = useContext(ReactReduxContext);\r\n    const state = store.getState() as CrewState;\r\n    const character = isCaptainCharacter ? state.Captain : state.FirstMate;\r\n    const dispatch = useDispatch();\r\n    const history = useHistory();\r\n    const levelsGained = isCaptainCharacter ? pageState.captainLevels : pageState.firstMateLevels;\r\n    const [selectedPowers, setSelectedPowers] = useState<ModifiedPower[]>([]);\r\n    const [newPower, setNewPower] = useState<ModifiedPower | undefined>(undefined);\r\n    const [selections, setSelections] = useState<Array<Partial<Stats>>>([]);\r\n    const isPowerSelected = (power: ModifiedPower) => !!selectedPowers.find((pwr) => pwr.name === power.name);\r\n    const isStatSelected = (statName: string) => selections.find((stat) => stat[statName as StatsEnum] !== undefined);\r\n    const improvedStats = () => {\r\n        const captainStats = character.stats;\r\n        let newStats: Stats = { ...captainStats };\r\n        selections.forEach((sel) => newStats = { ...newStats, ...sel });\r\n        return newStats;\r\n    };\r\n    const actualAdvances = () => {\r\n        const currentLevel = character.level;\r\n        const advances: LvlImprov[] = [];\r\n        for (let i = currentLevel + 1; i < currentLevel + 1 + levelsGained; i++) {\r\n            const advance = getAdvancePerLevel(i);\r\n            if (advance) {\r\n                const foundAdvance = advances.find((adv) => adv.LevelImprovement === advance);\r\n                if (foundAdvance) {\r\n                    const foundIdx = advances.findIndex((adv) => adv.LevelImprovement === advance);\r\n                    advances[foundIdx] = { LevelImprovement: advance, amount: foundAdvance.amount + 1 };\r\n                } else {\r\n                    advances.push({ LevelImprovement: advance, amount: 1 });\r\n                }\r\n            }\r\n        }\r\n        return advances;\r\n    };\r\n    const allDoneFn = () => {\r\n        const advances = actualAdvances();\r\n        let allDone = true;\r\n        for (const advance of advances) {\r\n            switch (advance.LevelImprovement) {\r\n                case LevelImprovements.LowerActivation:\r\n                    allDone = (advance.amount <= selectedPowers.length);\r\n                    break;\r\n                case LevelImprovements.ImproveStat:\r\n                    allDone = (advance.amount <= selections.length);\r\n                    break;\r\n                case LevelImprovements.NewPower:\r\n                    allDone = !!newPower;\r\n                    break;\r\n                case LevelImprovements.NewPowerOrImproveStat:\r\n                    if (pageState.choice === LevelImprovements.NewPower) {\r\n                        allDone = !!newPower;\r\n                    } else if (pageState.choice === LevelImprovements.ImproveStat) {\r\n                        allDone = (advance.amount <= selections.length);\r\n                    }\r\n            }\r\n        }\r\n        return allDone;\r\n    };\r\n    const statMaxed = (statName: StatsEnum) => {\r\n        switch (statName) {\r\n            case StatsEnum.Move:\r\n                return character.stats[StatsEnum.Move] >= 7;\r\n            case StatsEnum.Fight:\r\n                return character.stats[StatsEnum.Fight] >= 6;\r\n            case StatsEnum.Shoot:\r\n                return character.stats[StatsEnum.Shoot] >= 6;\r\n            case StatsEnum.Will:\r\n                return character.stats[StatsEnum.Will] >= 8;\r\n            case StatsEnum.Health:\r\n                return character.stats[StatsEnum.Health] >= 25;\r\n            default:\r\n                return true;\r\n        }\r\n    };\r\n    const renderPowerChoice = (advance: LvlImprov) => <React.Fragment>\r\n        <div className=\"modal-header\">{LevelImprovements.LowerActivation}\r\n            <div className=\"modal-sub-header\">Choose {advance.amount} {advance.amount > 1 ? \"different Powers\" : \"Power\"} </div>\r\n        </div>\r\n        {character.powers?.map((power) =>\r\n            <div\r\n                style={{ fontWeight: \"bold\" }}\r\n                className={isPowerSelected(power) ? \"background-power-selection full-width selected\" : selectedPowers.length >= advance.amount ? \"background-power-selection full-width disabled\" : \"background-power-selection full-width\"}\r\n                onClick={() => {\r\n                    if (selectedPowers.find((pwr) => pwr.name === power.name)) {\r\n                        setSelectedPowers(selectedPowers.filter((pwr) => pwr.name !== power.name));\r\n                    } else {\r\n                        if (selectedPowers.length >= advance.amount) {\r\n                            return;\r\n                        }\r\n                        setSelectedPowers([...selectedPowers, { ...power, activation: power.activation - 1 }]);\r\n                    }\r\n                }}\r\n                key={`add_dialog_x_stat_${power.name}`}\r\n            >\r\n                <div>{power.name} ({isPowerSelected(power) ? power.activation - 1 : power.activation})</div>\r\n                <div\r\n                    style={{ fontSize: \"0.8rem\", fontWeight: \"normal\" }}>\r\n                    {isPowerSelected(power) ?\r\n                        power.activation - 1 : power.activation} / {getPower(power.name).strain} / {Array.isArray(getPower(power.name).category) ? `${(getPower(power.name).category as string[]).join(\", \")}` :\r\n                            getPower(power.name).category}\r\n                </div>\r\n            </div>)}\r\n    </React.Fragment>;\r\n    const renderStatsChoice = (advance: LvlImprov) => <React.Fragment>\r\n        <div className=\"modal-header\">{LevelImprovements.ImproveStat}\r\n            <div className=\"modal-sub-header\">Only stats that are not maxed can be selected</div>\r\n        </div>\r\n        {[StatsEnum.Move, StatsEnum.Fight, StatsEnum.Shoot, StatsEnum.Will, StatsEnum.Health].map((statName) =>\r\n            !statMaxed(statName) ?\r\n                <div\r\n                    onClick={() => {\r\n                        if (isStatSelected(statName)) {\r\n                            setSelections(selections.filter((stat) => stat[statName] === undefined));\r\n                        } else {\r\n                            if (selections.length >= advance.amount) {\r\n                                return;\r\n                            }\r\n                            setSelections([...selections, { [statName]: character.stats[statName] + 1 }]);\r\n                        }\r\n                    }}\r\n                    className={isStatSelected(statName) ? \"background-stat-selection selected\" : selections.length >= advance.amount || statMaxed(statName) ? \"background-stat-selection disabled\" : \"background-stat-selection\"}\r\n                    key={`add_captain_dialog_opt_stat_${statName}`}>\r\n                    {statName} ({isStatSelected(statName) ? character.stats[statName] + 1 : character.stats[statName]})\r\n            </div> : undefined)}\r\n    </React.Fragment>;\r\n    const renderNewPowerChoice = (_advance: LvlImprov) => <React.Fragment>\r\n        <SelectNewPowers currentPowers={character.powers} background={character.background as BackgroundEnum} updatePowers={setNewPower} />\r\n    </React.Fragment>;\r\n\r\n    const renderLevelImprovements = (advance: LvlImprov, renderNodes: JSX.Element[]) => {\r\n        switch (advance.LevelImprovement) {\r\n            case LevelImprovements.LowerActivation:\r\n                renderNodes.push(renderPowerChoice(advance));\r\n                break;\r\n            case LevelImprovements.ImproveStat:\r\n                renderNodes.push(renderStatsChoice(advance));\r\n                break;\r\n            case LevelImprovements.NewPower:\r\n                renderNodes.push(renderNewPowerChoice(advance));\r\n                break;\r\n            case LevelImprovements.NewPowerOrImproveStat:\r\n                if (pageState.choice) {\r\n                    renderLevelImprovements({ LevelImprovement: pageState.choice, amount: 1 }, renderNodes);\r\n                }\r\n        }\r\n    };\r\n    const improvedPowers = () => (newPower ? [...character.powers as Power[], newPower] : character.powers as Power[]).map((power) => selectedPowers.find((pwr) => power.name === pwr.name) || power);\r\n    const renderAdvances = () => {\r\n        const renderNodes: JSX.Element[] = [];\r\n        const advances: LvlImprov[] = actualAdvances();\r\n        for (const advance of advances) {\r\n            renderLevelImprovements(advance, renderNodes);\r\n        }\r\n        return <Carousel\r\n            splitSize={1}\r\n            inputDivs={renderNodes}\r\n        />;\r\n    };\r\n\r\n    return <React.Fragment>\r\n        <div className=\"chapter-header\">{character.name}</div>\r\n        {renderAdvances()}\r\n        <button\r\n            onClick={() => {\r\n                dispatch({\r\n                    type: isCaptainCharacter ? SET_CAPTAIN : SET_FIRST_MATE,\r\n                    payload: { ...character, level: character.level + levelsGained, powers: improvedPowers(), stats: improvedStats() },\r\n                });\r\n                if (isCaptainCharacter && pageState.firstMateLevels) {\r\n                    history.push(\"/LevelUpFirstMate\", pageState);\r\n                } else {\r\n                    history.push(\"/LootDeclaration\");\r\n                }\r\n            }}\r\n            className={allDoneFn() ? \"dialog-btn confirm-btn\" : \"dialog-btn confirm-btn disabled\"}\r\n        >Confirm</button>\r\n        <CustomBackButtonComponent dispatchFunction={() => isCaptainCharacter ? dispatch({ type: REWIND_XP }) : undefined} />\r\n    </React.Fragment>;\r\n};\r\n","import { useHistory } from \"react-router-dom\";\r\nimport { LevelUpState } from \"../../types\";\r\nimport { LevelUpCharacterPage } from \"./LevelUpPage\";\r\nexport const LevelUpCaptainPage = () => {\r\n    const history = useHistory();\r\n    return <LevelUpCharacterPage isCaptainCharacter={true} pageState={history.location.state as LevelUpState} />;\r\n};\r\n","import { useHistory } from \"react-router-dom\";\r\nimport { LevelUpState } from \"../../types\";\r\nimport { LevelUpCharacterPage } from \"./LevelUpPage\";\r\nexport const LevelUpFirstMatePage = () => {\r\n    const history = useHistory();\r\n    return <LevelUpCharacterPage isCaptainCharacter={false} pageState={history.location.state as LevelUpState} />;\r\n};\r\n","import React, { useContext, useState } from \"react\";\r\nimport { ReactReduxContext, useDispatch } from \"react-redux\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { BackButtonComponent } from \"../../components/common/BackButton\";\r\nimport { XPDropDown } from \"../../components/dropdowns/XPDropdown\";\r\nimport { MODIFY_SOLDIER, REMOVE_SOLDIERS, SET_CAPTAIN, SET_FIRST_MATE } from \"../../redux/actions\";\r\nimport { Character, CharactersEnum, CrewState, Soldier } from \"../../types\";\r\ninterface CrewUpdates {\r\n    member: Soldier | Character;\r\n    change: CrewInjuries | CharacterInjuries;\r\n}\r\nenum CrewInjuries {\r\n    DEAD = \"Dead (1-4)\",\r\n    WOUNDED = \"Badly Wounded (5-8)\",\r\n    RECOVERY = \"Full Recovery (9-20)\",\r\n}\r\nenum CharacterInjuries {\r\n    BARELY_ALIVE = \"Barely Alive (1-2)\",\r\n    WOUNDED = \"Badly Wounded (3-6)\",\r\n    CLOSE_CALL = \"Close Call (7-8)\",\r\n    RECOVERY = \"Full Recovery (9-20)\",\r\n}\r\nexport const PostGameSequencePage = () => {\r\n    const { store } = useContext(ReactReduxContext);\r\n    const state = store.getState() as CrewState;\r\n    const history = useHistory();\r\n    const dispatch = useDispatch();\r\n    const [crewUpdates, setCrewUpdates] = useState<CrewUpdates[]>([]);\r\n    const updateCrewMan = (crewman: Soldier, value: string) => {\r\n        const filteredList = crewUpdates.filter((member) => {\r\n            if (member.member.hasOwnProperty(\"amount\")) {\r\n                const crewmember = (member.member as Soldier);\r\n                return !(crewmember.id === crewman.id && crewmember.type === crewman.type);\r\n            }\r\n            return true;\r\n        });\r\n        setCrewUpdates([...filteredList, { member: crewman, change: value as CrewInjuries }]);\r\n    };\r\n    const updateCharacter = (char: Character, value: string) => {\r\n        const filteredList = crewUpdates.filter((ch) => {\r\n            if (ch.member.hasOwnProperty(\"name\")) {\r\n                const crewmember = (ch.member as Character);\r\n                return !(crewmember.name === char.name);\r\n            }\r\n            return true;\r\n        });\r\n        setCrewUpdates([...filteredList, { member: char, change: value as CharacterInjuries }]);\r\n    };\r\n    const aftermath = () => {\r\n        const deadSoldiers: Soldier[] = [];\r\n        crewUpdates.forEach((update) => {\r\n            const crewman = state.Soldiers.find((sol) => sol.id === (update.member as Soldier).id && sol.type === update.member.type);\r\n            switch (update.change) {\r\n                case CrewInjuries.DEAD:\r\n                    if (crewman) {\r\n                        deadSoldiers.push(crewman);\r\n                    }\r\n                    break;\r\n                case CharacterInjuries.BARELY_ALIVE:\r\n                    dispatch({\r\n                        type: update.member.type === CharactersEnum.Captain ? SET_CAPTAIN : SET_FIRST_MATE,\r\n                        payload: update.member.type === CharactersEnum.Captain ? { ...state.Captain, missNextGame: true } : { ...state.FirstMate, missNextGame: true },\r\n                    });\r\n                    break;\r\n                case CharacterInjuries.WOUNDED:\r\n                    dispatch({\r\n                        type: update.member.type === CharactersEnum.Captain ? SET_CAPTAIN : SET_FIRST_MATE,\r\n                        payload: update.member.type === CharactersEnum.Captain ?\r\n                            { ...state.Captain, currentHealth: Math.floor(state.Captain.stats.Health / 2) } :\r\n                            { ...state.FirstMate, currentHealth: Math.floor(state.FirstMate.stats.Health / 2) },\r\n                    });\r\n                    break;\r\n                case CrewInjuries.WOUNDED:\r\n                    if (crewman) {\r\n                        dispatch({\r\n                            type: MODIFY_SOLDIER,\r\n                            payload: { ...crewman, currentHealth: Math.floor(state.FirstMate.stats.Health / 2) },\r\n                        });\r\n                    }\r\n                    break;\r\n                case CharacterInjuries.CLOSE_CALL:\r\n                case CrewInjuries.RECOVERY:\r\n            }\r\n        });\r\n        dispatch({\r\n            type: REMOVE_SOLDIERS,\r\n            payload: deadSoldiers,\r\n        });\r\n    };\r\n    const renderInjuryAndDeathCrew = (crewman: Soldier) => <React.Fragment>\r\n        <div className=\"injuries-btn\">\r\n            <div>{crewman.type} #{crewman.id}</div>\r\n            <XPDropDown list={Object.values(CrewInjuries)} dropdownOptions={{ id: `${crewman.type}#${crewman.id}`, placeholder: CrewInjuries.RECOVERY }} callbackFn={(val) => updateCrewMan(crewman, val)} />\r\n        </div>\r\n    </React.Fragment>;\r\n    const renderInjuryAndDeathCharacter = (char: Character) => <React.Fragment>\r\n        <div className=\"injuries-btn\">\r\n            <div>{char.name} ({char.level})</div>\r\n            <XPDropDown list={Object.values(CharacterInjuries)} dropdownOptions={{ id: `${char.name}`, placeholder: CharacterInjuries.RECOVERY }} callbackFn={(val) => updateCharacter(char, val)} />\r\n        </div>\r\n    </React.Fragment>;\r\n    return <React.Fragment>\r\n        <div className=\"chapter-header\">Congratulation on completing the last mission</div>\r\n        <div className=\"modal-header\">\r\n            Now you need to distribute the spoils of war and tend to your crew.\r\n            </div>\r\n        <div className=\"modal-header\">But first things first. How is your crew?</div>\r\n        {renderInjuryAndDeathCharacter(state.Captain)}\r\n        {renderInjuryAndDeathCharacter(state.FirstMate)}\r\n        {state.Soldiers.map(renderInjuryAndDeathCrew)}\r\n        <button\r\n            onClick={() => {\r\n                aftermath();\r\n                history.push(\"/Experience\");\r\n            }}\r\n            className={\"dialog-btn confirm-btn\"}\r\n        >Confirm</button>\r\n        <BackButtonComponent />\r\n    </React.Fragment>;\r\n};\r\n","import React, { useState } from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { BackButtonComponent } from \"../../components/common/BackButton\";\r\nimport { XPDropDown } from \"../../components/dropdowns/XPDropdown\";\r\nimport { ADD_LOOT } from \"../../redux/actions\";\r\nimport { PhysicalLoot } from \"./PhysicalLoot\";\r\nexport const LootPage = () => {\r\n    const dispatch = useDispatch();\r\n    const history = useHistory();\r\n    const [physicalLootTokensCollected, setPhysicalLootTokensCollected] = useState<number>(0);\r\n    const [dataLootTokensCollected, setDataLootTokensCollected] = useState<number>(0);\r\n    return <React.Fragment>\r\n        <div className=\"chapter-header\">How much loot did you secure?</div>\r\n        <div className=\"xp-btn\">\r\n            <div>Physical-Loot collected</div>\r\n            <XPDropDown list={[\"0\", \"1\", \"2\", \"3\", \"4\"]} dropdownOptions={{ id: \"lootUnlocked\", placeholder: \"0\" }} callbackFn={(nr) => setPhysicalLootTokensCollected(parseInt(nr, 10))} />\r\n        </div>\r\n        <div className=\"modal-sub-header\">Physical Loot</div>\r\n        {Array.from({ length: physicalLootTokensCollected }).map((_el, idx) => <div className=\"loot-btn\">\r\n            <div>Physical-Loot #{idx + 1}<br /></div>\r\n            <PhysicalLoot />\r\n            {/* <XPDropDown list={[\"Credits\", \"Advanced Weapon\", \"Advanced Tech\", \"Alien Artefact\"]} dropdownOptions={{ id: `physicalLootUnlocked${idx}`, placeholder: \"Credits\" }} callbackFn={(nr) => undefined} /> */}\r\n        </div>)}\r\n        <div className=\"xp-btn\">\r\n            <div>Data-Loot collected <br /></div>\r\n            <XPDropDown list={[\"0\", \"1\", \"2\", \"3\", \"4\"]} dropdownOptions={{ id: \"lootUnlocked\", placeholder: \"0\" }} callbackFn={(nr) => setDataLootTokensCollected(parseInt(nr, 10))} />\r\n        </div>\r\n        <div className=\"modal-sub-header\">Data Loot</div>\r\n        {Array.from({ length: dataLootTokensCollected }).map((_el, idx) => <div className=\"loot-btn\">\r\n            <div>Data-Loot #{idx + 1}<br /></div>\r\n            <XPDropDown list={[\"Credits\", \"Information\", \"Advanced Weapon\", \"Advanced Tech\", \"Secret\"]} dropdownOptions={{ id: `dataLootUnlocked${idx}`, placeholder: \"Credits\" }} callbackFn={(nr) => undefined} />\r\n        </div>)}\r\n\r\n        <button\r\n            onClick={() => {\r\n                dispatch({\r\n                    type: ADD_LOOT,\r\n                    payload: [],\r\n                });\r\n                history.push(\"/CrewOverview\");\r\n            }}\r\n            className={\"dialog-btn confirm-btn\"}\r\n        >Confirm</button>\r\n        <BackButtonComponent />\r\n    </React.Fragment>;\r\n};\r\n","import React from \"react\";\nimport * as ReactDOM from \"react-dom\";\nimport { connect, Provider } from \"react-redux\";\nimport { BrowserRouter, Route, Switch } from \"react-router-dom\";\nimport { compose, createStore } from \"redux\";\nimport \"./App.css\";\nimport {\n  CharacterBackgroundPage, CharacterNamePage, CharacterNonCorePowerSelectionPage, CharacterPowerImprovementsPage, CharacterPowerSelectionPage, CharacterSelectGearPage, CharacterStatsSelectionPage,\n  CrewPage, ExperiencePage, FileOperationsPage,\n  FileSystemPage, LandingPage, LevelUpCaptainPage,\n  LevelUpFirstMatePage, LevelUpPage, LootPage, PdfExportPage, PostGameSequencePage,\n  ShipNamePage, SoldierSelectionPage, TransactionHistoryPage\n} from \"./pages\";\nimport { stateReducer } from \"./redux/reducer\";\n\nconst App = () =>\n  <BrowserRouter>\n    <div className=\"app-body\">\n      <Switch>\n        <Route path=\"/ShipName\" component={ShipNamePage} />\n        <Route path=\"/CharacterName\" component={CharacterNamePage} />\n        <Route path=\"/CharacterBackground\" component={CharacterBackgroundPage} />\n        <Route path=\"/CharacterStatsSelection\" component={CharacterStatsSelectionPage} />\n        <Route path=\"/CharacterPowerSelection\" component={CharacterPowerSelectionPage} />\n        <Route path=\"/CharacterNonCorePowerSelection\" component={CharacterNonCorePowerSelectionPage} />\n        <Route path=\"/CharacterImprovePowers\" component={CharacterPowerImprovementsPage} />\n        <Route path=\"/CharacterSelectGear\" component={CharacterSelectGearPage} />\n        <Route path=\"/SoldierSelection\" component={SoldierSelectionPage} />\n        <Route path=\"/CrewOverview\" component={CrewPage} />\n        <Route path=\"/FileOperations\" component={FileOperationsPage} />\n        <Route path=\"/FileSystem\" component={FileSystemPage} />\n        <Route path=\"/Experience\" component={ExperiencePage} />\n        <Route path=\"/LevelUp\" component={LevelUpPage} />\n        <Route path=\"/LevelUpCaptain\" component={LevelUpCaptainPage} />\n        <Route path=\"/LevelUpFirstMate\" component={LevelUpFirstMatePage} />\n        <Route path=\"/LootDeclaration\" component={LootPage} />\n        <Route path=\"/PostGameSequence\" component={PostGameSequencePage} />\n        <Route path=\"/TransactionHistory\" component={TransactionHistoryPage} />\n        <Route path=\"/PdfExport\" component={PdfExportPage} />\n        <Route path=\"/\" component={LandingPage} />\n      </Switch>\n    </div>\n  </BrowserRouter>;\n\nexport const AppContainer = connect()(App);\nexport const store = createStore(stateReducer, compose(typeof window === \"object\" &&\n  typeof (window as any).devToolsExtension !== \"undefined\" ?\n  (window as any).devToolsExtension() :\n  (f: any) => f\n));\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <AppContainer />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n","import { CrewState, InitialCrewState } from \"../types\";\r\nimport * as ReduxActions from \"./actions\";\r\n\r\n// tslint:disable-next-line: cyclomatic-complexity\r\nexport function stateReducer(state: CrewState = InitialCrewState, action: ReduxActions.Actions): CrewState {\r\n    const xpRecords = state.ExperienceRecords;\r\n    switch (action.type) {\r\n        case ReduxActions.ADD_XP:\r\n            return { ...state, Experience: state.Experience + action.payload, ExperienceRecords: [...xpRecords, state.Experience + action.payload] };\r\n        case ReduxActions.SPEND_XP:\r\n            return { ...state, Experience: state.Experience - action.payload, ExperienceRecords: [...xpRecords, state.Experience - action.payload] };\r\n        case ReduxActions.REWIND_XP:\r\n            return { ...state, Experience: xpRecords.length > 1 ? xpRecords[xpRecords.length - 2] : xpRecords[0], ExperienceRecords: xpRecords.length > 1 ? xpRecords.slice(0, xpRecords.length - 1) : xpRecords };\r\n        case ReduxActions.SET_CREW:\r\n            return action.payload;\r\n        case ReduxActions.SET_SHIPNAME:\r\n            return { ...state, ShipName: action.payload };\r\n        case ReduxActions.SET_CAPTAINS_NAME:\r\n            return { ...state, Captain: { ...state.Captain, name: action.payload } };\r\n        case ReduxActions.SET_CAPTAINS_BACKGROUND:\r\n            return { ...state, Captain: { ...state.Captain, background: action.payload } };\r\n        case ReduxActions.SET_CAPTAINS_GEAR:\r\n            return { ...state, Captain: { ...state.Captain, gear: action.payload } };\r\n        case ReduxActions.SET_CAPTAINS_POWERS:\r\n            return { ...state, Captain: { ...state.Captain, powers: action.payload } };\r\n        case ReduxActions.SET_CAPTAINS_STATS:\r\n            return { ...state, Captain: { ...state.Captain, stats: action.payload } };\r\n        case ReduxActions.SET_FIRSTMATE_NAME:\r\n            return { ...state, FirstMate: { ...state.FirstMate, name: action.payload } };\r\n        case ReduxActions.SET_FIRSTMATE_BACKGROUND:\r\n            return { ...state, FirstMate: { ...state.FirstMate, background: action.payload } };\r\n        case ReduxActions.SET_FIRSTMATE_GEAR:\r\n            return { ...state, FirstMate: { ...state.FirstMate, gear: action.payload } };\r\n        case ReduxActions.SET_FIRSTMATE_POWERS:\r\n            return { ...state, FirstMate: { ...state.FirstMate, powers: action.payload } };\r\n        case ReduxActions.SET_FIRSTMATE_STATS:\r\n            return { ...state, FirstMate: { ...state.FirstMate, stats: action.payload } };\r\n        case ReduxActions.SET_CAPTAIN:\r\n            return { ...state, Captain: action.payload };\r\n        case ReduxActions.SET_FIRST_MATE:\r\n            return { ...state, FirstMate: action.payload };\r\n        case ReduxActions.ADD_SOLDIERS:\r\n            const transactionList = action.payload.map((soldier) => ({ credits: soldier.amount * soldier.cost, sign: false, record: `Hired ${soldier.amount} ${soldier.type}` }));\r\n            return {\r\n                ...state,\r\n                Soldiers: state.Soldiers ? [...state.Soldiers, ...action.payload] : action.payload,\r\n                Credits: state.Credits - action.payload.reduce((acc, soldier) => acc + (soldier.amount * soldier.cost), 0),\r\n                CreditRecords: [...state.CreditRecords, ...transactionList],\r\n            };\r\n        case ReduxActions.MODIFY_SOLDIER:\r\n            const idx = state.Soldiers.findIndex((sol) => sol.id === action.payload.id && sol.type === action.payload.type);\r\n            state.Soldiers[idx] = action.payload;\r\n            return state;\r\n        case ReduxActions.REMOVE_SOLDIERS:\r\n            const removalIdxs: number[] = [];\r\n            const currentSoldiers = state.Soldiers;\r\n            action.payload.forEach((soldier) => {\r\n                removalIdxs.push(currentSoldiers.findIndex((sold) => sold.id === soldier.id && sold.type === soldier.type));\r\n            });\r\n            for (const index of removalIdxs) {\r\n                currentSoldiers.splice(index, 1);\r\n            }\r\n            return {\r\n                ...state, Soldiers: currentSoldiers.map((sol) => {\r\n                    const typeAmount = currentSoldiers.filter((fil) => fil.type === sol.type).length;\r\n                    return sol.id > typeAmount ? { ...sol, id: typeAmount } : sol;\r\n                }),\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n"],"sourceRoot":""}