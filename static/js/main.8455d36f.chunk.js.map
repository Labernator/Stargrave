{"version":3,"sources":["types/index.ts","components/common/CustomBackButton.tsx","Utils.ts","components/StatsRenderer.tsx","components/CharacterStatusBarTable.tsx","components/statusbar/CharacterStatsHeader.tsx","images/AdvTech1.png","images/AdvWeapons.png","images/AdvTech2.png","images/Alien.png","images/Aristocrat.png","images/Biomorph.png","images/CreateCrew.png","images/Cyborg.png","images/Hunter.png","images/icons/Add.png","images/icons/Crew.png","images/icons/Captain.png","images/icons/Minus.png","images/icons/Delete.png","images/icons/Info.png","images/icons/Save.png","images/icons/SavePdf.png","images/icons/Treasury.png","images/ImportCrew.png","images/Information.png","images/Mystic.png","images/PostGame.png","images/Psionicist.png","images/RoboticsExpert.png","images/resources/Stargrave_Reference-1.png","images/resources/Stargrave_Reference-2.png","images/Rogue.png","images/Secret.png","images/soldiers/ArmouredTrooper.png","images/soldiers/Burner.png","images/soldiers/Casecracker.png","images/soldiers/Chiseler.png","images/soldiers/Codebreaker.png","images/soldiers/Commando.png","images/soldiers/Grenadier.png","images/soldiers/GuardDog.png","images/soldiers/Gunner.png","images/soldiers/Hacker.png","images/soldiers/Medic.png","images/soldiers/Pathfinder.png","images/soldiers/Recruit.png","images/soldiers/Runner.png","images/soldiers/Sentry.png","images/soldiers/Sniper.png","images/soldiers/Trooper.png","images/Starship.png","images/Tekker.png","images/TradeGoods.png","images/Unknown.png","images/UseSample.png","images/Veteran.png","images/index.ts","redux/actions.ts","pages/Creation/CharacterBackground.tsx","UseComponentVisible.tsx","components/dropdowns/GearDropdown.tsx","pages/Overview/ShoppingPage.tsx","pages/Creation/CharacterGearSelection.tsx","components/InputComponent.tsx","components/NameComponent.tsx","pages/Creation/CharacterName.tsx","components/common/Carousel.tsx","pages/Creation/CharacterNonCorePowerSelection.tsx","pages/Creation/CharacterPowerImprovements.tsx","pages/Creation/CharacterPowerSelection.tsx","pages/Creation/CharacterStatsImprovements.tsx","components/common/BackButton.tsx","pages/Creation/SetShipNamePage.tsx","components/CharacterTileGearAndPowers.tsx","components/CharacterTileHeader.tsx","components/SoldierComponent.tsx","components/statusbar/CrewSizeComponent.tsx","components/statusbar/TreasuryComponent.tsx","components/SoldierSelection.tsx","pages/Creation/SoldierSelectionPage.tsx","components/CharacterInjuries.tsx","components/CharacterComponent.tsx","components/statusbar/AdvanceComponent.tsx","components/statusbar/FileComponent.tsx","components/statusbar/Shipname.tsx","images/icons/Leave.png","components/statusbar/StatusBarComponent.tsx","pages/Overview/CrewPage.tsx","pages/Overview/FileOperationsPage.tsx","pages/Overview/FileSystem.tsx","pages/Overview/LandingPage.tsx","components/pdf/PdfPowerCards.tsx","components/pdf/PdfRosterComponents.tsx","components/pdf/PdfRenderer.tsx","pages/Overview/PdfPage.tsx","pages/Overview/ShipsHold.tsx","pages/PostGame/PostGameSequencePage.tsx","components/dropdowns/XPDropdown.tsx","pages/PostGame/BuyLevels.tsx","pages/PostGame/Loot.tsx","pages/PostGame/DataLoot.tsx","pages/PostGame/ExperiencePage.tsx","components/SelectNewPowers.tsx","pages/PostGame/LevelUpPage.tsx","pages/PostGame/LevelUpCaptain.tsx","pages/PostGame/LevelUpFirstMate.tsx","pages/PostGame/PhysicalLoot.tsx","pages/Overview/TransactionHistoryPage.tsx","index.tsx","redux/reducer.ts"],"names":["BackgroundEnum","PowerCategory","StatsEnum","CharactersEnum","SoldierEnum","SoldierGroups","CustomBackButtonComponent","dispatchFunction","customHistory","history","useHistory","onClick","event","goBack","preventDefault","stopPropagation","className","LevelImprovements","LootType","PhysicalCategories","DataCategories","TradeGoods","Information","LootCategories","InitialCrewState","Credits","Soldiers","ShipName","Captain","name","level","stats","Move","Fight","Shoot","Will","Armour","Health","gearSlots","type","powers","gear","FirstMate","Experience","ExperienceRecords","CreditRecords","credits","sign","record","ShipsHold","allPowers","PowerList","allBackgrounds","BackgroundList","allGear","GearItems","advancedWeapons","advancedTech","alienArtefacts","getBackgroundInfos","ShipUpgrades","background","find","bg","numberOfCrewMembers","state","store","getState","reduce","acc","soldier","amount","getCurrentStatStrings","currentHealth","toString","getPower","power","getBackground","isCorePower","powerName","backgroundName","corePowers","isCaptain","isCharacter","crewMember","getNonCorePowers","isCaptainCharacter","filter","includes","map","activation","getGeneralGearDetails","gearName","foundGear","getAdvancedWeapons","getAdvancedTech","getAlienArtefacts","getGearByType","gearType","getActualNotes","gearList","gearItem","notes","getStatsWithGear","updateStats","updatedStatsByGear","updatedStatsWithGear","item","Object","keys","stat","getDamageModifierString","weapon","damageModifier","gearSortAlgorithm","count","length","getAdvancePerLevel","LowerActivation","ImproveStat","NewPower","NewPowerOrImproveStat","getBaseCaptain","getBaseFirstMate","StatsRenderer","member","cells","entries","key","value","push","Fragment","CharacterStatusBarTable","character","gearSlotsUsed","isTileTable","style","width","SoldierStatusBarTable","CharacterStatsHeader","characterType","useContext","ReactReduxContext","id","display","float","CustomStatsHeader","CyborgIcon","CyborgPng","BiomorphIcon","BiomorphPng","MysticIcon","MysticPng","PsionicistIcon","PsionicistPng","RoboticsExpertIcon","RoboticsExpertPng","RogueIcon","RoguePng","StarshipIcon","StarshipPng","TekkerIcon","TekkerPng","VeteranIcon","VeteranPng","AristocratIcon","AristocratPng","HunterIcon","HunterPng","BurnerIcon","BurnerPng","GrenadierIcon","GrenadierPng","SniperIcon","SniperPng","CodebreakerIcon","CodebreakerPng","GuardDogIcon","GuardDogPng","CasecrackerIcon","CasecrackerPng","GunnerIcon","GunnerPng","MedicIcon","MedicPng","PathfinderIcon","PathfinderPng","ArmouredTrooperIcon","ArmouredTrooperPng","RecruitIcon","RecruitPng","RunnerIcon","RunnerPng","SentryIcon","SentryPng","TrooperIcon","TrooperPng","HackerIcon","HackerPng","ChiselerIcon","ChiselerPng","CommandoIcon","CommandoPng","AdvancedTech1Icon","AdvancedTech1Png","AlienArtefactsIcon","AlienArtefactsPng","AdvancedWeaponsIcon","AdvancedWeaponsPng","getBackgroundImage","Biomorph","Cyborg","Mystic","Psionicist","RoboticsExpert","Rogue","Tekker","Veteran","Hunter","Aristocrat","UnknownPng","getSoldierImage","soldierType","Burner","Grenadier","Sniper","Casecracker","Codebreaker","GuardDog","Gunner","Medic","Pathfinder","ArmouredTrooper","Recruit","Runner","Sentry","Trooper","Hacker","Chiseler","Commando","UseSampleIcon","UseSamplePng","CreateCrewIcon","CreateCrewPng","ImportCrewIcon","ImportCrewPng","InformationIcon","InformationPng","TradeGoodsIcon","TradeGoodsPng","SecretIcon","SecretPng","TreasuryIcon","TreasuryPng","CrewIcon","CrewPng","AddIcon","AddPng","SaveIcon","SavePng","MinusIcon","MinusPng","PdfIcon","PdfPng","PostGameIcon","PostGamePng","ADD_XP","ADD_LOOT","SPEND_XP","REWIND_XP","ADD_SOLDIERS","SET_CAPTAINS_NAME","SET_CAPTAINS_BACKGROUND","SET_CAPTAINS_STATS","SET_CAPTAINS_POWERS","SET_CAPTAINS_GEAR","SET_FIRSTMATE_NAME","SET_FIRSTMATE_BACKGROUND","SET_FIRSTMATE_GEAR","SET_FIRSTMATE_STATS","SET_FIRSTMATE_POWERS","SET_FIRST_MATE","SET_CAPTAIN","SET_CREW","SET_SHIPNAME","MODIFY_SOLDIER","REMOVE_SOLDIERS","SELL_LOOT","ADD_CREDITS","CONVERT_INFORMATION","CharacterBackgroundPage","dispatch","useDispatch","location","useState","setBackground","backgroundEnumEntry","undefined","src","alt","payload","useComponentVisible","initialIsVisible","isComponentVisible","setIsComponentVisible","ref","useRef","handleHideDropdown","handleClickOutside","current","contains","target","useEffect","document","addEventListener","removeEventListener","openMenu","ShoppingCategories","GearLabel","fontSize","maxRange","armourModifier","GearDropDown","list","dropdownOptions","callbackFn","placeholder","selectedItem","setSelectedItem","position","getElementById","getBoundingClientRect","top","left","getCssProps","listItem","onMouseDown","CharacterSelectGearPage","defaultKnife","defaultArmour","selectedGear","setSelectedGear","isGearSelected","gr","maxGear","getSelectedArmour","armour","getCSSClasses","withMax","itemTooLarge","onClickHandler","gearDetails","selGear","melee","getSelectedMelee","equi","sort","a","b","localeCompare","InputComponent","currentState","tooltip","cssClass","callback","setName","inputVisible","setInputVisible","inputRef","useLayoutEffect","focus","onChange","currentTarget","onKeyUp","code","onBlur","placeSelf","padding","NameComponent","currentStateValue","inputCallback","CharacterNamePage","Carousel","reactSwipeEl","inputDivs","splitSize","resetPage","cnt","sectionCnt","Math","ceil","currentSection","setCurrentSection","slide","swipeOptions","continuous","el","childCount","sectionDivs","i","slice","getContent","getPos","prev","gridArea","next","CharacterNonCorePowerSelectionPage","selectedPowers","setSelectedPowers","previewPower","setPreviewPower","lastPreviewPower","setLastPreviewPower","isPowerSelected","pwr","maxCorePowersSelected","powersRemaining2","powersRemaining","strain","Array","isArray","category","join","effect","findIndex","idx","CharacterPowerImprovementsPage","actualPower","x","concat","CharacterPowerSelectionPage","powerNames","minPowersSelected","maxPowersSelected","pow","CharacterStatsSelectionPage","selections","setSelections","isStatSelected","statName","statModificationsForBackground","statModifications","maxStatsReached","chooseOptionals","calcPayload","newStats","mandatory","marginTop","statValue","optional","rest","BackButtonComponent","ShipNamePage","renderGear","renderSoldier","isPdf","paddingRight","fontWeight","CharacterTileGearAndPowers","textAlign","SoldierTileGearAndPowers","CharacterTileHeader","SoldierTileHeader","cost","SoldierComponent","CrewSizeComponent","externalStyles","virtualCrewSize","title","TreasuryComponent","virtualCredits","listOfSoldiers","SoldierList","SoldierSelectionComponent","soldiers","setSoldiers","previewSoldier","setPreviewSoldier","lastPreviewSoldier","setLastPreviewSoldier","getCurrentSoldierAmount","soldierCount","specialistCount","group","Specialist","specialist","hiringCost","canSubmit","height","sum","sol","soldiersOfType","soldierIdx","paddingTop","e","SoldierSelectionPage","CharacterInjuries","missNextGame","CharacterComponent","AdvanceComponent","paddingLeft","FileComponent","ShipnameComponent","StatusbarComponent","flex","CrewPage","myStorage","localStorage","areEqual","restFirstItem","every","val","restVal","JSON","stringify","setItem","sold","y","FileOperationsPage","fileName","borderTop","anchor","createElement","body","appendChild","json","blob","Blob","url","window","URL","createObjectURL","href","download","click","revokeObjectURL","removeChild","paddingBottom","FileSystemPage","selectedStorage","setSelectedStorage","isStorageSelected","htmlFor","marginBottom","accept","reader","FileReader","onload","ev","parse","result","readAsText","querySelector","files","values","stateString","colSpan","getStorageTable","removeItem","LandingPage","Crew","PrintablePowerCards","printAll","printablePowers","renderHeader","border","margin","marginLeft","renderCrewmanHeader","crewman","renderPowers","gridTemplateColumns","clear","grid","renderCharacterStats","minWidth","renderCrewStats","PdfCharacter","PdfSoldier","PdfCharacters","PdfSoldiers","PdfRenderer","PdfExportPage","printPowerCards","setPrintPowerCards","exportPdf","jsPdf","jsPDF","container","from","querySelectorAll","addPage","html2canvas","scale","letterRendering","canvas","addImage","toDataURL","internal","pageSize","getWidth","getHeight","save","borderLeft","ShipsCargoPage","cargo","confirmation","setConfirmation","getTradeGoodsValue","TradeGoods75","TradeGoods150","TradeGoods200","TradeGoods250","TradeGoods300","TradeGoods400","getInformationValue","Information75","Information150","Information200","Information125","Information100","renderDialogTile","borderBottom","loot","Secret","AdvancedTechnology","technology","tech","sell","AdvancedWeapons","advWeapon","str","AlienTech","artefact","art","SellConfirmationDialog","borderRadius","ItemDetails","CargoTable","CrewInjuries","XPDropDown","LevelUpPage","captainLevels","setCaptainLevels","firstMateLevels","setfirstMateLevels","deciChoice","setDeciChoice","setX","setY","getCaptainLevels","getFirstMateLevels","difference","experienceAvailable","min","floor","nr","renderImprovements","lvl","nodes","parseInt","flexDirection","choice","LootPage","lootType","lootTokensCollected","setLootTokensCollected","selectedItems","setSelectedItems","selectedCategory","setSelectedCategory","advTech","alienTech","advWeapons","isCategorySelected","lootId","isItemSelected","updateSelectedItems","selIt","isIdSelected","updateSelectedCategory","isCategoryIdSelected","getTradeGoods","getInformation","CategorySelection","Data","flexWrap","Physical","LootSelection","cat","RenderSection","_val","forEach","DataLootPage","ExperiencePage","crewMemberDied","setCrewMemberDied","lootUnlocked","setLootUnlocked","powerActivations","setPowerActivations","rivalsKilled","setRivalsKilled","npcsKilled","setNPCsKilled","scenarioSpecific","setScenarioSpecific","getTotalXp","opacity","answer","SelectNewPowers","currentPowers","updatePowers","selectedPower","setSelectedPower","some","LevelUpCharacterPage","pageState","levelsGained","newPower","setNewPower","improvedStats","captainStats","sel","actualAdvances","currentLevel","advances","advance","foundAdvance","adv","LevelImprovement","foundIdx","statMaxed","renderLevelImprovements","renderNodes","renderPowerChoice","renderStatsChoice","renderAdvances","allDone","allDoneFn","LevelUpCaptainPage","LevelUpFirstMatePage","PhysicalLootPage","PostGameSequencePage","crewUpdates","setCrewUpdates","renderInjuryAndDeathCharacter","char","RECOVERY","filteredList","ch","hasOwnProperty","change","updateCharacter","crewmember","updateCrewMan","deadSoldiers","update","DEAD","BARELY_ALIVE","WOUNDED","CLOSE_CALL","aftermath","TransactionHistoryPage","AppContainer","connect","path","component","createStore","action","xpRecords","ReduxActions","inventoryId","hold","splice","transactionList","removalIdxs","currentSoldiers","index","typeAmount","fil","invId","compose","devToolsExtension","f","ReactDOM","StrictMode"],"mappings":"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","file":"static/js/main.8455d36f.chunk.js","sourcesContent":["export enum BackgroundEnum {\r\n    Biomorph = \"Biomorph\",\r\n    Cyborg = \"Cyborg\",\r\n    Mystic = \"Mystic\",\r\n    Psionicist = \"Psionicist\",\r\n    RoboticsExpert = \"RoboticsExpert\",\r\n    Rogue = \"Rogue\",\r\n    Tekker = \"Tekker\",\r\n    Veteran = \"Veteran\",\r\n    Aristocrat = \"Aristocrat\",\r\n    Hunter = \"Hunter\",\r\n}\r\n\r\nexport enum PowerCategory {\r\n    LineOfSight = \"Line of Sight\",\r\n    Touch = \"Touch\",\r\n    SelfOnly = \"Self-only\",\r\n    OutOfGameA = \"Out of Game (A)\",\r\n    OutOfGameB = \"Out of Game (B)\",\r\n}\r\nexport enum StatsEnum {\r\n    Move = \"Move\",\r\n    Fight = \"Fight\",\r\n    Shoot = \"Shoot\",\r\n    Armour = \"Armour\",\r\n    Will = \"Will\",\r\n    Health = \"Health\",\r\n}\r\n\r\nexport enum CharactersEnum {\r\n    Captain = \"Captain\",\r\n    FirstMate = \"FirstMate\",\r\n}\r\n\r\nexport enum SoldierEnum {\r\n    Burner = \"Burner\",\r\n    Grenadier = \"Grenadier\",\r\n    Sniper = \"Sniper\",\r\n    GuardDog = \"Guard Dog\",\r\n    Casecracker = \"Casecracker\",\r\n    Gunner = \"Gunner\",\r\n    Codebreaker = \"Codebreaker\",\r\n    Medic = \"Medic\",\r\n    Pathfinder = \"Pathfinder\",\r\n    ArmouredTrooper = \"Armoured Trooper\",\r\n    Recruit = \"Recruit\",\r\n    Runner = \"Runner\",\r\n    Commando = \"Commando\",\r\n    Trooper = \"Trooper\",\r\n    Hacker = \"Hacker\",\r\n    Chiseler = \"Chiseler\",\r\n    Sentry = \"Sentry\",\r\n}\r\n\r\nexport enum SoldierGroups {\r\n    Standard = \"Standard\",\r\n    Specialist = \"Specialist\",\r\n}\r\nexport interface Background {\r\n    name: string;\r\n    powers: Power[];\r\n}\r\n\r\nexport type Stats = { [key in StatsEnum]: number; };\r\nexport type StatStrings = { [key in StatsEnum]: string; };\r\nexport interface BackgroundMetadata {\r\n    name: string;\r\n    statModifications: {\r\n        mandatory: Partial<Stats>;\r\n        optional: Partial<Stats>;\r\n        chooseOptionals: number;\r\n    };\r\n    corePowers: string[];\r\n    description: string;\r\n}\r\n\r\nexport interface BackgroundModifications {\r\n    name: BackgroundEnum;\r\n    statModifications: StatsImprovements;\r\n    powers: Power[];\r\n}\r\n\r\nexport interface BackgroundOptions {\r\n    name: BackgroundEnum;\r\n    statModifications: {\r\n        mandatory: Partial<Stats>;\r\n        optional: Partial<Stats>;\r\n        chooseOptionals: number;\r\n    };\r\n    corePowers: string[];\r\n    description: string;\r\n}\r\n\r\nexport interface StatsImprovements {\r\n    mandatory: Partial<Stats>;\r\n    optional: Partial<Stats>;\r\n}\r\n\r\nexport interface Power {\r\n    name: string;\r\n    activation: number;\r\n    strain: number;\r\n    category: string | string[];\r\n    effect: string;\r\n}\r\n\r\nexport interface ModifiedPower {\r\n    name: string;\r\n    activation: number;\r\n}\r\n\r\nexport interface ModifiedGear {\r\n    name: string;\r\n    gearSlots: number;\r\n}\r\nexport interface Gear extends ModifiedGear {\r\n    type: string;\r\n    notes?: string;\r\n    damageModifier?: number;\r\n    maxRange?: string | number;\r\n    armourModifier?: number;\r\n}\r\nexport interface AdvancedWeapons extends ModifiedGear {\r\n    type: string;\r\n    notes?: string;\r\n    damageModifier?: number;\r\n    maxRange?: string | number;\r\n    cost: number;\r\n    sell: number;\r\n}\r\nexport interface AdvancedTech extends ModifiedGear {\r\n    type: string;\r\n    notes?: string;\r\n    armourModifier?: number;\r\n    cost: number;\r\n    sell: number;\r\n    shipGear?: boolean;\r\n    characterOnly?: boolean;\r\n    list: number;\r\n}\r\n\r\nexport interface AlienArtefact extends ModifiedGear {\r\n    type: string;\r\n    notes: string;\r\n    cost: number;\r\n    sell: number;\r\n}\r\n\r\nexport interface ShipUpgrade {\r\n    name: string;\r\n    notes: string;\r\n    cost: number;\r\n}\r\n\r\nexport interface Character {\r\n    name: string;\r\n    stats: Stats;\r\n    level: number;\r\n    gearSlots: number;\r\n    type: string;\r\n    background?: string;\r\n    powers: ModifiedPower[];\r\n    gear: ModifiedGear[];\r\n    missNextGame?: boolean;\r\n    currentHealth?: number;\r\n}\r\n\r\nexport interface Soldier {\r\n    type: string;\r\n    stats: Stats;\r\n    cost: number;\r\n    gearSlots: number;\r\n    gear: string[];\r\n    group: SoldierGroups;\r\n    amount: number;\r\n    id: number;\r\n    currentHealth?: number;\r\n}\r\n\r\nexport interface SoldierMetadata {\r\n    type: string;\r\n    cost: number;\r\n    stats: Stats;\r\n    gear: string[];\r\n    group: SoldierGroups;\r\n}\r\n\r\nexport interface CharacterMetadata {\r\n    stats: Stats;\r\n    level: number;\r\n    gearSlots: number;\r\n    type: string;\r\n}\r\nexport interface Transaction {\r\n    credits: number;\r\n    sign: boolean;\r\n    record: string;\r\n}\r\nexport interface CrewState {\r\n    Credits: number;\r\n    Captain: Character;\r\n    FirstMate: Character;\r\n    Soldiers: Soldier[];\r\n    ShipName: string;\r\n    Experience: number;\r\n    ExperienceRecords: number[];\r\n    CreditRecords: Transaction[];\r\n    ShipsHold: LootItem[];\r\n}\r\n\r\nexport const InitialCrewState: CrewState = {\r\n    Credits: 400,\r\n    Soldiers: [],\r\n    ShipName: \"\",\r\n    Captain: { name: \"\", level: 15, stats: { Move: 6, Fight: 3, Shoot: 2, Will: 3, Armour: 9, Health: 16 }, gearSlots: 6, type: CharactersEnum.Captain, powers: [], gear: [] },\r\n    FirstMate: { name: \"\", level: 0, stats: { Move: 6, Fight: 2, Shoot: 2, Will: 2, Armour: 9, Health: 14 }, gearSlots: 5, type: CharactersEnum.FirstMate, powers: [], gear: [] },\r\n    Experience: 0,\r\n    ExperienceRecords: [0],\r\n    CreditRecords: [{ credits: 400, sign: true, record: \"Initial Crew Treasury\" }],\r\n    ShipsHold: [],\r\n};\r\n\r\nexport enum LevelImprovements {\r\n    LowerActivation = \"Lower an Activation Number\",\r\n    ImproveStat = \"Improve a Stat\",\r\n    NewPower = \"Learn a new Power\",\r\n    NewPowerOrImproveStat = \"New Power or Improve Stat\",\r\n}\r\n\r\nexport interface LevelUpState {\r\n    captainLevels: number;\r\n    firstMateLevels: number;\r\n    choice?: LevelImprovements.NewPower | LevelImprovements.ImproveStat;\r\n}\r\n\r\nexport interface DropdownOptions {\r\n    placeholder: string | Gear;\r\n    id: string;\r\n}\r\n\r\nexport enum LootType {\r\n    Physical = \"Physical Loot\",\r\n    Data = \"Data Loot\",\r\n}\r\n\r\nexport enum PhysicalCategories {\r\n    TradeGoods = \"Trade Goods\",\r\n    AdvancedTechnology = \"Advanced Technology\",\r\n    AdvancedWeapons = \"Advanced Weapons\",\r\n    AlienTech = \"Alien Artefact\",\r\n}\r\n\r\nexport enum DataCategories {\r\n    Credits = \"Credits\",\r\n    Information = \"Information\",\r\n    AdvancedTechnology = \"Advanced Technology\",\r\n    AdvancedWeapons = \"Advanced Weapons\",\r\n    Secret = \"Secret\",\r\n}\r\nexport interface SelectedCategory {\r\n    lootId: number;\r\n    selectedCategory: PhysicalCategories | DataCategories;\r\n}\r\n\r\nexport enum TradeGoods {\r\n    TradeGoods75 = \"Trade Goods 75 \\xA5\",\r\n    TradeGoods150 = \"Trade Goods 150 \\xA5\",\r\n    TradeGoods200 = \"Trade Goods 200 \\xA5\",\r\n    TradeGoods250 = \"Trade Goods 250 \\xA5\",\r\n    TradeGoods300 = \"Trade Goods 300 \\xA5\",\r\n    TradeGoods400 = \"Trade Goods 400 \\xA5\",\r\n}\r\n\r\nexport enum Information {\r\n    Information75 = \"Information 75 \\xA5\",\r\n    Information100 = \"Information 100 \\xA5\",\r\n    Information125 = \"Information 125 \\xA5\",\r\n    Information150 = \"Information 150 \\xA5\",\r\n    Information200 = \"Information 200 \\xA5\",\r\n}\r\n\r\nexport enum LootCategories {\r\n    Information,\r\n    TradeGoods,\r\n    AdvancedTechnology,\r\n    AdvancedWeapons,\r\n    Secret,\r\n    Credits,\r\n    AlienTech,\r\n}\r\n\r\nexport interface LootItem {\r\n    name: string;\r\n    type: LootCategories;\r\n}\r\n","import { useHistory } from \"react-router-dom\";\r\n\r\nexport const CustomBackButtonComponent = ({ dispatchFunction, customHistory }: { dispatchFunction(): void; customHistory?(): void }) => {\r\n\r\n    const history = useHistory();\r\n    return <button\r\n        onClick={(event) => {\r\n            dispatchFunction();\r\n            customHistory ? customHistory() : history.goBack();\r\n            event.preventDefault();\r\n            event.stopPropagation();\r\n        }}\r\n        className={\"dialog-btn back-btn\"}\r\n    >Back</button>;\r\n};\r\n","import { store } from \".\";\r\nimport * as BackgroundList from \"./data/Backgrounds.json\";\r\nimport * as GearItems from \"./data/Gear.json\";\r\nimport * as PowerList from \"./data/Powers.json\";\r\nimport * as ShipUpgrades from \"./data/ShipUpgrades.json\";\r\nimport {\r\n    AdvancedTech, AdvancedWeapons, AlienArtefact, BackgroundEnum, BackgroundMetadata, BackgroundOptions, Character, CharactersEnum, Gear, LevelImprovements, ModifiedGear, ModifiedPower, Power, ShipUpgrade, Soldier, Stats, StatsEnum, StatStrings\r\n} from \"./types\";\r\n\r\nconst allPowers: Power[] = PowerList.Powers;\r\nconst allBackgrounds: BackgroundMetadata[] = BackgroundList.backgrounds;\r\nconst allGear: Gear[] = GearItems.general;\r\nconst advancedWeapons: AdvancedWeapons[] = GearItems.advancedWeapons;\r\nconst advancedTech: AdvancedTech[] = GearItems.advancedTech;\r\nconst alienArtefacts: AlienArtefact[] = GearItems.alienTech;\r\nconst upgrades: ShipUpgrade[] = ShipUpgrades.upgrades;\r\n\r\nexport const getBackgroundInfos = (background: BackgroundEnum) => allBackgrounds.find((bg) => bg.name === background) as BackgroundOptions;\r\n\r\nexport const numberOfCrewMembers = () => {\r\n    const state = store.getState();\r\n    return (state.Soldiers.reduce((acc, soldier) => soldier.amount + acc, 0) || 0) + (state.Captain ? 1 : 0) + (state.FirstMate ? 1 : 0);\r\n};\r\n\r\nexport const numberOfSoldiers = () => {\r\n    const state = store.getState();\r\n    return state.Soldiers.reduce((acc, soldier) => soldier.amount + acc, 0);\r\n};\r\n\r\nexport const getCurrentStatStrings = (stats: Stats, currentHealth?: number): StatStrings => ({\r\n    [StatsEnum.Move]: stats.Move.toString(),\r\n    [StatsEnum.Fight]: `+${stats.Fight.toString()}`,\r\n    [StatsEnum.Shoot]: `+${stats.Shoot.toString()}`,\r\n    [StatsEnum.Armour]: stats.Armour.toString(),\r\n    [StatsEnum.Will]: `+${stats.Will.toString()}`,\r\n    [StatsEnum.Health]: currentHealth ? currentHealth.toString() : stats.Health.toString(),\r\n});\r\n\r\nexport const getPower = (name: string) => allPowers.find((power) => power.name === name) as Power;\r\n\r\nexport const getUnselectedPowers = (powerNames: ModifiedPower[]) => allPowers.filter((power) => !powerNames.some((pwr) => pwr.name === power.name));\r\n\r\nexport const getPowerInfos = (powerNames: string[]): Power[] => powerNames.map(getPower);\r\n\r\nconst getBackground = (name: string) => allBackgrounds.find((background) => background.name === name) as BackgroundMetadata;\r\n\r\nexport const isCorePower = (powerName: string, backgroundName: string) => !!getBackground(backgroundName).corePowers.find((power) => power === powerName);\r\n\r\nexport const isCaptain = (type: string) => type === CharactersEnum.Captain;\r\n\r\nexport const isCharacter = (crewMember: Character | Soldier): crewMember is Character => crewMember.type === CharactersEnum.Captain || crewMember.type === CharactersEnum.FirstMate;\r\n\r\nexport const getNonCorePowers = (backgroundName: string, isCaptainCharacter: boolean) =>\r\n    allPowers.filter((power) => !getBackground(backgroundName).corePowers.includes(power.name)).map((power) => isCaptainCharacter ? { ...power, activation: power.activation + 2 } : { ...power, activation: power.activation + 4 });\r\n\r\nexport const getStatsMaximums = () => ({ \"Move\": 7, \"Fight\": 6, \"Shoot\": 6, \"Will\": 8, \"Health\": 25, \"Armour\": 14 });\r\n\r\nexport const getGeneralGearDetails = (gearName: string | ModifiedGear) => {\r\n    const foundGear = allGear.find((gear) => (typeof (gearName) === \"string\" ? gearName : gearName.name) === gear.name) as Gear;\r\n    if (typeof (gearName) !== \"string\") {\r\n        foundGear.gearSlots = gearName.gearSlots;\r\n    }\r\n    return foundGear;\r\n};\r\n\r\nexport const getAdvancedWeapons = () => advancedWeapons;\r\nexport const getAdvancedTech = () => advancedTech;\r\nexport const getAlienArtefacts = () => alienArtefacts;\r\nexport const getShipUpgrades = () => upgrades;\r\n\r\nexport const getGearByType = (gearType: string) => {\r\n    switch (gearType) {\r\n        case \"Armour\": return allGear.filter((gear) => gear.type === \"Armour\");\r\n        case \"Weapon\": return allGear.filter((gear) => gear.type === \"Weapon\");\r\n        case \"Equipment\": return allGear.filter((gear) => gear.type === \"Equipment\");\r\n    }\r\n};\r\n\r\nexport const getActualNotes = (gearList: Array<string | ModifiedGear>, gearItem: Gear) => {\r\n    let notes = gearItem.notes;\r\n    switch (gearItem.name) {\r\n        case \"Flamethrower\":\r\n            notes = gearList.find((gear: ModifiedGear | string) => (typeof (gear) === \"string\" ? gear : gear.name) === \"Heavy Armour\") || gearList.find((gear: ModifiedGear | string) => (typeof (gear) === \"string\" ? gear : gear.name) === \"Combat Armour\") ? \"Target Armour and Cover Modifiers\" : \"Target Armour and Cover Modifiers. -1 Move\";\r\n            break;\r\n        case \"Rapid Fire\":\r\n            notes = gearList.find((gear: ModifiedGear | string) => (typeof (gear) === \"string\" ? gear : gear.name) === \"Heavy Armour\") || gearList.find((gear: ModifiedGear | string) => (typeof (gear) === \"string\" ? gear : gear.name) === \"Combat Armour\") ? \"2 Targets\" : \"2 Targets. -1 Move\";\r\n            break;\r\n        case \"Combat Armour\":\r\n            notes = \"50gc upkeep fee\";\r\n    }\r\n    return notes || \"\";\r\n};\r\n\r\nexport const getStatsWithGear = (stats: Stats, updateStats: Partial<Stats>, gear: ModifiedGear[] | undefined): Stats => {\r\n    const updatedStatsByGear = gear ? gear.reduce((updatedStatsWithGear, gearItem) => {\r\n        switch (gearItem.name) {\r\n            case \"Light Armour\": updatedStatsWithGear.Armour = 1; break;\r\n            case \"Heavy Armour\":\r\n                updatedStatsWithGear.Armour = 2;\r\n                updatedStatsWithGear.Move = -1;\r\n                break;\r\n            case \"Combat Armour\":\r\n                updatedStatsWithGear.Armour = 4;\r\n                break;\r\n            case \"Unarmed\":\r\n                updatedStatsWithGear.Fight = -2;\r\n                break;\r\n            case \"Flamethrower\":\r\n            case \"Rapid Fire\":\r\n                if (!gear.find((item) => item.name === \"Heavy Armour\") && !gear.find((item) => item.name === \"Combat Armour\")) {\r\n                    updatedStatsWithGear.Move = -1;\r\n                }\r\n        }\r\n        return updatedStatsWithGear;\r\n    }, { \"Move\": 0, \"Fight\": 0, \"Shoot\": 0, \"Armour\": 0, \"Will\": 0, \"Health\": 0 }) : { \"Move\": 0, \"Fight\": 0, \"Shoot\": 0, \"Armour\": 0, \"Will\": 0, \"Health\": 0 };\r\n\r\n    return Object.keys(stats).reduce(\r\n        (acc, stat) => ({ ...acc, [stat]: (stats[stat as StatsEnum] || 0) + (updateStats[stat as StatsEnum] || 0) + (updatedStatsByGear[stat as StatsEnum] || 0) }),\r\n        { \"Move\": 0, \"Fight\": 0, \"Shoot\": 0, \"Armour\": 0, \"Will\": 0, \"Health\": 0 });\r\n};\r\n\r\nexport const getDamageModifierString = (weapon: Gear) => {\r\n    if (!weapon.damageModifier) {\r\n        return \"+0\";\r\n    }\r\n    if (weapon.damageModifier > 0) {\r\n        return `+${weapon.damageModifier}`;\r\n    }\r\n\r\n    return `${weapon.damageModifier}`;\r\n};\r\n\r\nexport const gearSortAlgorithm = (gear: Gear) => {\r\n    let count = 0;\r\n    if (gear.type === \"Weapon\" || gear.type === \"Armour\") {\r\n        count += 1;\r\n    }\r\n    if (gear.name.length > 19) {\r\n        count += 0.4;\r\n    }\r\n    if (gear.notes) {\r\n        count += 1;\r\n        if (gear.notes.length > 40) {\r\n            count += 0.5;\r\n        }\r\n    }\r\n    return count;\r\n};\r\n\r\nexport const getAdvancePerLevel = (level: number) => {\r\n    const rest = (level) % 10;\r\n    switch (rest) {\r\n        case 1:\r\n        case 3:\r\n        case 4:\r\n        case 6:\r\n        case 8:\r\n        case 9:\r\n            return LevelImprovements.LowerActivation;\r\n        case 2:\r\n        case 7:\r\n            return LevelImprovements.ImproveStat;\r\n        case 5:\r\n            return LevelImprovements.NewPower;\r\n        case 0:\r\n            return LevelImprovements.NewPowerOrImproveStat;\r\n        default:\r\n    }\r\n};\r\n\r\nexport const getBaseCaptain = (): Character => ({\r\n    name: \"\",\r\n    stats: {\r\n        \"Move\": 6,\r\n        \"Fight\": 3,\r\n        \"Shoot\": 2,\r\n        \"Armour\": 9,\r\n        \"Will\": 3,\r\n        \"Health\": 16,\r\n    },\r\n    level: 15,\r\n    gearSlots: 6,\r\n    type: CharactersEnum.Captain,\r\n    powers: [],\r\n    gear: [],\r\n});\r\n\r\nexport const getBaseFirstMate = (): Character => ({\r\n    name: \"\",\r\n    stats: {\r\n        \"Move\": 6,\r\n        \"Fight\": 2,\r\n        \"Shoot\": 2,\r\n        \"Armour\": 9,\r\n        \"Will\": 2,\r\n        \"Health\": 14,\r\n    },\r\n    level: 0,\r\n    gearSlots: 5,\r\n    type: CharactersEnum.FirstMate,\r\n    powers: [],\r\n    gear: [],\r\n});\r\n","import React from \"react\";\r\nimport { Character, Soldier, Stats, StatsEnum } from \"../types\";\r\nimport { getBaseCaptain, getBaseFirstMate, getCurrentStatStrings, isCaptain, isCharacter } from \"../Utils\";\r\n\r\nexport const StatsRenderer = ({ stats, member }: { stats: Stats; member: Character | Soldier }) => {\r\n    const currentStats = Object.entries(getCurrentStatStrings(stats, member.currentHealth));\r\n    const cells: JSX.Element[] = [];\r\n    for (const [key, value] of currentStats) {\r\n        cells.push(<td\r\n            className={\r\n                isCharacter(member) && stats[key as StatsEnum] !== (isCaptain(member.type) ?\r\n                    getBaseCaptain() : getBaseFirstMate()).stats[key as StatsEnum] ? \"improved-stat\" : \"\"\r\n            }\r\n            key={`add_dialog_${isCharacter(member) ? member.name : member.type}_stat_${key}`\r\n            }>\r\n            {value}\r\n        </td>);\r\n    }\r\n    return <React.Fragment>{cells}</React.Fragment>;\r\n};\r\n","import { Character, Soldier, StatsEnum } from \"../types\";\r\nimport { getStatsWithGear } from \"../Utils\";\r\nimport { StatsRenderer } from \"./StatsRenderer\";\r\n\r\nexport const CharacterStatusBarTable = ({ character, gearSlotsUsed, isTileTable }: { character: Character; gearSlotsUsed: number; isTileTable?: boolean }) =>\r\n    <table className={isTileTable ? \"character-tile-table\" : \"character-statusbar-table\"}>\r\n        <colgroup>\r\n            <col style={{ width: \"14%\" }} />\r\n            <col style={{ width: \"14%\" }} />\r\n            <col style={{ width: \"14%\" }} />\r\n            <col style={{ width: \"14%\" }} />\r\n            <col style={{ width: \"14%\" }} />\r\n            <col style={{ width: \"14%\" }} />\r\n            <col style={{ width: \"14%\" }} />\r\n        </colgroup>\r\n        <thead>\r\n            <tr className={isTileTable ? \"small-text centered-text\" : \"small-text\"}>\r\n                {Object.keys(StatsEnum).map((stat) => <td key={`add_dialog__stat_header_${stat}`}>{stat}</td>)}\r\n                <td key={\"add_dialog_stat_header_gear\"}>Gear</td>\r\n            </tr>\r\n        </thead>\r\n        <tbody>\r\n            <tr className={isTileTable ? \"centered-text\" : \"\"}>\r\n                <StatsRenderer member={character} stats={getStatsWithGear(character.stats, {}, character.gear)} />\r\n                <td>{`${gearSlotsUsed}/${character.gearSlots}`}</td>\r\n            </tr>\r\n        </tbody>\r\n    </table>;\r\n\r\nexport const SoldierStatusBarTable = ({ soldier, gearSlotsUsed, isTileTable }: { soldier: Soldier; gearSlotsUsed: number; isTileTable?: boolean }) =>\r\n    <table className={isTileTable ? \"character-tile-table\" : \"character-statusbar-table\"}>\r\n        <colgroup>\r\n            <col style={{ width: \"14%\" }} />\r\n            <col style={{ width: \"14%\" }} />\r\n            <col style={{ width: \"14%\" }} />\r\n            <col style={{ width: \"14%\" }} />\r\n            <col style={{ width: \"14%\" }} />\r\n            <col style={{ width: \"14%\" }} />\r\n            <col style={{ width: \"14%\" }} />\r\n        </colgroup>\r\n        <thead>\r\n            <tr className={isTileTable ? \"small-text centered-text\" : \"small-text\"}>\r\n                {Object.keys(StatsEnum).map((stat) => <td key={`add_dialog__stat_header_${stat}`}>{stat}</td>)}\r\n                <td key={\"add_dialog_stat_header_gear\"}>Gear</td>\r\n            </tr>\r\n        </thead>\r\n        <tbody>\r\n            <tr className={isTileTable ? \"centered-text\" : \"\"}>\r\n                <StatsRenderer member={soldier} stats={soldier.stats} />\r\n                <td>{`${gearSlotsUsed}/1`}</td>\r\n            </tr>\r\n        </tbody>\r\n    </table>;\r\n","import { useContext } from \"react\";\r\nimport { ReactReduxContext } from \"react-redux\";\r\nimport { Character, CharactersEnum, CrewState } from \"../../types\";\r\nimport { CharacterStatusBarTable } from \"../CharacterStatusBarTable\";\r\n\r\nexport const CharacterStatsHeader = ({ characterType, gearSlots }: { characterType: CharactersEnum; gearSlots?: number }) => {\r\n    const { store } = useContext(ReactReduxContext);\r\n    const state = store.getState() as CrewState;\r\n    const character = characterType === CharactersEnum.Captain ? state.Captain : state.FirstMate;\r\n    return <div key=\"statusbar\" id=\"statusbar\" className=\"statusbar\" >\r\n        <div className=\"statusbar-tiles\" style={{ display: \"block\", float: \"none\" }}>{`${characterType === CharactersEnum.Captain ? \"Cpt.\" : \"Ltn.\"} ${character.name}` || \"Unnamed Character\"}</div>\r\n        <CharacterStatusBarTable\r\n            character={character}\r\n            gearSlotsUsed={gearSlots || character.gear?.reduce((acc, gearItem) => acc + gearItem.gearSlots, 0) || 0} />\r\n    </div>;\r\n};\r\n\r\nexport const CustomStatsHeader = ({ character, gearSlots }: { character: Character; gearSlots?: number }) => <div key=\"statusbar\" id=\"statusbar\" className=\"statusbar\" >\r\n    <div className=\"statusbar-tiles\" style={{ display: \"block\", float: \"none\" }}>{`${character.name}` || \"Unnamed Character\"}</div>\r\n    <CharacterStatusBarTable\r\n        character={character}\r\n        gearSlotsUsed={gearSlots || character.gear?.reduce((acc, gearItem) => acc + gearItem.gearSlots, 0) || 0} />\r\n</div>;\r\n","export default __webpack_public_path__ + \"static/media/AdvTech1.ab5108aa.png\";","export default __webpack_public_path__ + \"static/media/AdvWeapons.48e048cd.png\";","export default __webpack_public_path__ + \"static/media/AdvTech2.7512fa6b.png\";","export default __webpack_public_path__ + \"static/media/Alien.2f295dc5.png\";","export default __webpack_public_path__ + \"static/media/Aristocrat.04b8cbcb.png\";","export default __webpack_public_path__ + \"static/media/Biomorph.30852fce.png\";","export default __webpack_public_path__ + \"static/media/CreateCrew.aa96e00e.png\";","export default __webpack_public_path__ + \"static/media/Cyborg.1d6e41d1.png\";","export default __webpack_public_path__ + \"static/media/Hunter.eae2f250.png\";","export default __webpack_public_path__ + \"static/media/Add.94030173.png\";","export default __webpack_public_path__ + \"static/media/Crew.517fe591.png\";","export default __webpack_public_path__ + \"static/media/Captain.95237b5a.png\";","export default __webpack_public_path__ + \"static/media/Minus.d38fdb57.png\";","export default __webpack_public_path__ + \"static/media/Delete.17e835d8.png\";","export default __webpack_public_path__ + \"static/media/Info.9c4331cd.png\";","export default __webpack_public_path__ + \"static/media/Save.62c16956.png\";","export default __webpack_public_path__ + \"static/media/SavePdf.2060f485.png\";","export default __webpack_public_path__ + \"static/media/Treasury.94a0facb.png\";","export default __webpack_public_path__ + \"static/media/ImportCrew.e5abae4c.png\";","export default __webpack_public_path__ + \"static/media/Information.889dce96.png\";","export default __webpack_public_path__ + \"static/media/Mystic.41443507.png\";","export default __webpack_public_path__ + \"static/media/PostGame.021b5206.png\";","export default __webpack_public_path__ + \"static/media/Psionicist.3e8db9d2.png\";","export default __webpack_public_path__ + \"static/media/RoboticsExpert.62afca10.png\";","export default __webpack_public_path__ + \"static/media/Stargrave_Reference-1.19c89dcc.png\";","export default __webpack_public_path__ + \"static/media/Stargrave_Reference-2.ede3e341.png\";","export default __webpack_public_path__ + \"static/media/Rogue.67294730.png\";","export default __webpack_public_path__ + \"static/media/Secret.3f8d8168.png\";","export default __webpack_public_path__ + \"static/media/ArmouredTrooper.47e7ee5c.png\";","export default __webpack_public_path__ + \"static/media/Burner.5074a0f0.png\";","export default __webpack_public_path__ + \"static/media/Casecracker.abae2ba0.png\";","export default __webpack_public_path__ + \"static/media/Chiseler.d137b278.png\";","export default __webpack_public_path__ + \"static/media/Codebreaker.9302a5e3.png\";","export default __webpack_public_path__ + \"static/media/Commando.9132f9b1.png\";","export default __webpack_public_path__ + \"static/media/Grenadier.f2ee0436.png\";","export default __webpack_public_path__ + \"static/media/GuardDog.eff5a8b3.png\";","export default __webpack_public_path__ + \"static/media/Gunner.a4b8a36f.png\";","export default __webpack_public_path__ + \"static/media/Hacker.de209c8c.png\";","export default __webpack_public_path__ + \"static/media/Medic.e34105fc.png\";","export default __webpack_public_path__ + \"static/media/Pathfinder.7a315f4e.png\";","export default __webpack_public_path__ + \"static/media/Recruit.99efe4a8.png\";","export default __webpack_public_path__ + \"static/media/Runner.b629c18a.png\";","export default __webpack_public_path__ + \"static/media/Sentry.208deaab.png\";","export default __webpack_public_path__ + \"static/media/Sniper.e17677ee.png\";","export default __webpack_public_path__ + \"static/media/Trooper.77aded42.png\";","export default __webpack_public_path__ + \"static/media/Starship.2d00d62f.png\";","export default __webpack_public_path__ + \"static/media/Tekker.9c3b86f0.png\";","export default __webpack_public_path__ + \"static/media/TradeGoods.6fd3f852.png\";","export default __webpack_public_path__ + \"static/media/Unknown.c12505bd.png\";","export default __webpack_public_path__ + \"static/media/UseSample.3dd4980b.png\";","export default __webpack_public_path__ + \"static/media/Veteran.9d33839f.png\";","import { BackgroundEnum, SoldierEnum } from \"../types\";\r\nimport AdvancedTech1Png from \"./AdvTech1.png\";\r\nimport AdvancedTech2Png from \"./AdvTech2.png\";\r\nimport AdvancedWeaponsPng from \"./AdvWeapons.png\";\r\nimport AlienArtefactsPng from \"./Alien.png\";\r\nimport AristocratPng from \"./Aristocrat.png\";\r\nimport BiomorphPng from \"./Biomorph.png\";\r\nimport CreateCrewPng from \"./CreateCrew.png\";\r\nimport CyborgPng from \"./Cyborg.png\";\r\nimport HunterPng from \"./Hunter.png\";\r\nimport AddPng from \"./icons/Add.png\";\r\nimport CaptainPng from \"./icons/Captain.png\";\r\nimport CreditsPng from \"./icons/Credits.png\";\r\nimport CrewPng from \"./icons/Crew.png\";\r\nimport DeletePng from \"./icons/Delete.png\";\r\nimport ExitPng from \"./icons/Exit.png\";\r\nimport InfoPng from \"./icons/Info.png\";\r\nimport LeavePng from \"./icons/Leave.png\";\r\nimport MinusPng from \"./icons/Minus.png\";\r\nimport SavePng from \"./icons/Save.png\";\r\nimport PdfPng from \"./icons/SavePdf.png\";\r\nimport TreasuryPng from \"./icons/Treasury.png\";\r\nimport ImportCrewPng from \"./ImportCrew.png\";\r\nimport InformationPng from \"./Information.png\";\r\nimport MysticPng from \"./Mystic.png\";\r\nimport PostGamePng from \"./PostGame.png\";\r\nimport PsionicistPng from \"./Psionicist.png\";\r\nimport QuickReferenceSheet1Png from \"./resources/Stargrave_Reference-1.png\";\r\nimport QuickReferenceSheet2Png from \"./resources/Stargrave_Reference-2.png\";\r\nimport RoboticsExpertPng from \"./RoboticsExpert.png\";\r\nimport RoguePng from \"./Rogue.png\";\r\nimport SecretPng from \"./Secret.png\";\r\nimport ArmouredTrooperPng from \"./soldiers/ArmouredTrooper.png\";\r\nimport BurnerPng from \"./soldiers/Burner.png\";\r\nimport CasecrackerPng from \"./soldiers/Casecracker.png\";\r\nimport ChiselerPng from \"./soldiers/Chiseler.png\";\r\nimport CodebreakerPng from \"./soldiers/Codebreaker.png\";\r\nimport CommandoPng from \"./soldiers/Commando.png\";\r\nimport GrenadierPng from \"./soldiers/Grenadier.png\";\r\nimport GuardDogPng from \"./soldiers/GuardDog.png\";\r\nimport GunnerPng from \"./soldiers/Gunner.png\";\r\nimport HackerPng from \"./soldiers/Hacker.png\";\r\nimport MedicPng from \"./soldiers/Medic.png\";\r\nimport PathfinderPng from \"./soldiers/Pathfinder.png\";\r\nimport RecruitPng from \"./soldiers/Recruit.png\";\r\nimport RunnerPng from \"./soldiers/Runner.png\";\r\nimport SentryPng from \"./soldiers/Sentry.png\";\r\nimport SniperPng from \"./soldiers/Sniper.png\";\r\nimport TrooperPng from \"./soldiers/Trooper.png\";\r\nimport StarshipPng from \"./Starship.png\";\r\nimport TekkerPng from \"./Tekker.png\";\r\nimport TradeGoodsPng from \"./TradeGoods.png\";\r\nimport UnknownPng from \"./Unknown.png\";\r\nimport UseSamplePng from \"./UseSample.png\";\r\nimport VeteranPng from \"./Veteran.png\";\r\n\r\nexport const QuickReferenceSheet1 = QuickReferenceSheet1Png;\r\nexport const QuickReferenceSheet2 = QuickReferenceSheet2Png;\r\nexport const CyborgIcon = CyborgPng;\r\nexport const BiomorphIcon = BiomorphPng;\r\nexport const MysticIcon = MysticPng;\r\nexport const PsionicistIcon = PsionicistPng;\r\nexport const RoboticsExpertIcon = RoboticsExpertPng;\r\nexport const RogueIcon = RoguePng;\r\nexport const StarshipIcon = StarshipPng;\r\nexport const TekkerIcon = TekkerPng;\r\nexport const VeteranIcon = VeteranPng;\r\nexport const AristocratIcon = AristocratPng;\r\nexport const HunterIcon = HunterPng;\r\n\r\nexport const BurnerIcon = BurnerPng;\r\nexport const GrenadierIcon = GrenadierPng;\r\nexport const SniperIcon = SniperPng;\r\nexport const CodebreakerIcon = CodebreakerPng;\r\nexport const GuardDogIcon = GuardDogPng;\r\nexport const CasecrackerIcon = CasecrackerPng;\r\nexport const GunnerIcon = GunnerPng;\r\nexport const MedicIcon = MedicPng;\r\nexport const PathfinderIcon = PathfinderPng;\r\nexport const ArmouredTrooperIcon = ArmouredTrooperPng;\r\nexport const RecruitIcon = RecruitPng;\r\nexport const RunnerIcon = RunnerPng;\r\nexport const SentryIcon = SentryPng;\r\nexport const TrooperIcon = TrooperPng;\r\nexport const HackerIcon = HackerPng;\r\nexport const ChiselerIcon = ChiselerPng;\r\nexport const CommandoIcon = CommandoPng;\r\n\r\nexport const AdvancedTech1Icon = AdvancedTech1Png;\r\nexport const AdvancedTech2Icon = AdvancedTech2Png;\r\nexport const AlienArtefactsIcon = AlienArtefactsPng;\r\nexport const AdvancedWeaponsIcon = AdvancedWeaponsPng;\r\n\r\nexport const getBackgroundImage = (background: string | undefined) => {\r\n    switch (background) {\r\n        case BackgroundEnum.Biomorph: return BiomorphIcon;\r\n        case BackgroundEnum.Cyborg: return CyborgIcon;\r\n        case BackgroundEnum.Mystic: return MysticIcon;\r\n        case BackgroundEnum.Psionicist: return PsionicistIcon;\r\n        case BackgroundEnum.RoboticsExpert: return RoboticsExpertIcon;\r\n        case BackgroundEnum.Rogue: return RogueIcon;\r\n        case BackgroundEnum.Tekker: return TekkerIcon;\r\n        case BackgroundEnum.Veteran: return VeteranIcon;\r\n        case BackgroundEnum.Hunter: return HunterIcon;\r\n        case BackgroundEnum.Aristocrat: return AristocratIcon;\r\n        default:\r\n            return UnknownPng;\r\n    }\r\n};\r\n\r\nexport const getSoldierImage = (soldierType: string) => {\r\n    switch (soldierType) {\r\n        case SoldierEnum.Burner: return BurnerIcon;\r\n        case SoldierEnum.Grenadier: return GrenadierIcon;\r\n        case SoldierEnum.Sniper: return SniperIcon;\r\n        case SoldierEnum.Casecracker: return CasecrackerIcon;\r\n        case SoldierEnum.Codebreaker: return CodebreakerIcon;\r\n        case SoldierEnum.GuardDog: return GuardDogIcon;\r\n        case SoldierEnum.Gunner: return GunnerIcon;\r\n        case SoldierEnum.Medic: return MedicIcon;\r\n        case SoldierEnum.Pathfinder: return PathfinderIcon;\r\n        case SoldierEnum.ArmouredTrooper: return ArmouredTrooperIcon;\r\n        case SoldierEnum.Recruit: return RecruitIcon;\r\n        case SoldierEnum.Runner: return RunnerIcon;\r\n        case SoldierEnum.Sentry: return SentryIcon;\r\n        case SoldierEnum.Trooper: return TrooperIcon;\r\n        case SoldierEnum.Hacker: return HackerIcon;\r\n        case SoldierEnum.Chiseler: return ChiselerIcon;\r\n        case SoldierEnum.Commando: return CommandoIcon;\r\n        default:\r\n            return UnknownPng;\r\n    }\r\n};\r\n\r\nexport const CaptainIcon = CaptainPng;\r\nexport const UseSampleIcon = UseSamplePng;\r\nexport const CreateCrewIcon = CreateCrewPng;\r\nexport const ImportCrewIcon = ImportCrewPng;\r\nexport const CreditsIcon = CreditsPng;\r\nexport const InformationIcon = InformationPng;\r\nexport const TradeGoodsIcon = TradeGoodsPng;\r\nexport const SecretIcon = SecretPng;\r\nexport const TreasuryIcon = TreasuryPng;\r\nexport const CrewIcon = CrewPng;\r\nexport const LeaveIcon = LeavePng;\r\nexport const AddIcon = AddPng;\r\nexport const SaveIcon = SavePng;\r\nexport const ExitIcon = ExitPng;\r\nexport const InfoIcon = InfoPng;\r\nexport const MinusIcon = MinusPng;\r\nexport const PdfIcon = PdfPng;\r\nexport const DeleteItemIcon = DeletePng;\r\nexport const PostGameIcon = PostGamePng;\r\n","import { BackgroundEnum, Character, CrewState, LootItem, ModifiedGear, ModifiedPower, Soldier, Stats, Transaction } from \"../types\";\r\n\r\nexport const ADD_XP = \"ADD_XP\";\r\nexport const ADD_LOOT = \"ADD_LOOT\";\r\nexport const SPEND_XP = \"SPEND_XP\";\r\nexport const REWIND_XP = \"REWIND_XP\";\r\nexport const ADD_SOLDIERS = \"ADD_SOLDIERS\";\r\nexport const SET_CAPTAINS_NAME = \"SET_CAPTAINS_NAME\";\r\nexport const SET_CAPTAINS_BACKGROUND = \"SET_CAPTAINS_BACKGROUND\";\r\nexport const SET_CAPTAINS_STATS = \"SET_CAPTAINS_STATS\";\r\nexport const SET_CAPTAINS_POWERS = \"SET_CAPTAINS_POWERS\";\r\nexport const SET_CAPTAINS_GEAR = \"SET_CAPTAINS_GEAR\";\r\nexport const SET_FIRSTMATE_NAME = \"SET_FIRSTMATE_NAME\";\r\nexport const SET_FIRSTMATE_BACKGROUND = \"SET_FIRSTMATE_BACKGROUND\";\r\nexport const SET_FIRSTMATE_GEAR = \"SET_FIRSTMATE_GEAR\";\r\nexport const SET_FIRSTMATE_STATS = \"SET_FIRSTMATE_STATS\";\r\nexport const SET_FIRSTMATE_POWERS = \"SET_FIRSTMATE_POWERS\";\r\nexport const SET_FIRST_MATE = \"SET_FIRST_MATE\";\r\nexport const SET_CAPTAIN = \"SET_CAPTAIN\";\r\nexport const SET_CREW = \"SET_CREW\";\r\nexport const SET_SHIPNAME = \"SET_SHIPNAME\";\r\nexport const MODIFY_SOLDIER = \"MODIFY_SOLDIER\";\r\nexport const REMOVE_SOLDIERS = \"REMOVE_SOLDIERS\";\r\nexport const SELL_LOOT = \"SELL_LOOT\";\r\nexport const ADD_CREDITS = \"ADD_CREDITS\";\r\nexport const CONVERT_INFORMATION = \"CONVERT_INFORMATION\";\r\ninterface SetCrew {\r\n    type: typeof SET_CREW;\r\n    payload: CrewState;\r\n}\r\n\r\ninterface AddXp {\r\n    type: typeof ADD_XP;\r\n    payload: number;\r\n}\r\n\r\ninterface SpendXp {\r\n    type: typeof SPEND_XP;\r\n    payload: number;\r\n}\r\n\r\ninterface RewindXp {\r\n    type: typeof REWIND_XP;\r\n}\r\n\r\ninterface SetCrewName {\r\n    type: typeof SET_SHIPNAME;\r\n    payload: string;\r\n}\r\n\r\ninterface SetCaptainsName {\r\n    type: typeof SET_CAPTAINS_NAME;\r\n    payload: string;\r\n}\r\n\r\ninterface SetFirstMateName {\r\n    type: typeof SET_FIRSTMATE_NAME;\r\n    payload: string;\r\n}\r\ninterface SetFirstMateBackground {\r\n    type: typeof SET_FIRSTMATE_BACKGROUND;\r\n    payload: BackgroundEnum | undefined;\r\n}\r\ninterface SetCaptainsBackground {\r\n    type: typeof SET_CAPTAINS_BACKGROUND;\r\n    payload: BackgroundEnum | undefined;\r\n}\r\ninterface SetCaptainsPowers {\r\n    type: typeof SET_CAPTAINS_POWERS;\r\n    payload: ModifiedPower[];\r\n}\r\n\r\ninterface SetCaptainsGear {\r\n    type: typeof SET_CAPTAINS_GEAR;\r\n    payload: ModifiedGear[];\r\n}\r\n\r\ninterface SetFirstMateGear {\r\n    type: typeof SET_FIRSTMATE_GEAR;\r\n    payload: ModifiedGear[];\r\n}\r\n\r\ninterface SetFirstMatePowers {\r\n    type: typeof SET_FIRSTMATE_POWERS;\r\n    payload: ModifiedPower[];\r\n}\r\n\r\ninterface SetCaptainsStats {\r\n    type: typeof SET_CAPTAINS_STATS;\r\n    payload: Stats;\r\n}\r\n\r\ninterface SetFirstMateStats {\r\n    type: typeof SET_FIRSTMATE_STATS;\r\n    payload: Stats;\r\n}\r\ninterface SetCaptain {\r\n    type: typeof SET_CAPTAIN;\r\n    payload: Character;\r\n}\r\n\r\ninterface SetFirstMate {\r\n    type: typeof SET_FIRST_MATE;\r\n    payload: Character;\r\n}\r\n\r\ninterface AddSoldiers {\r\n    type: typeof ADD_SOLDIERS;\r\n    payload: Soldier[];\r\n}\r\n\r\ninterface ModifySoldier {\r\n    type: typeof MODIFY_SOLDIER;\r\n    payload: Soldier;\r\n}\r\ninterface RemoveSoldiers {\r\n    type: typeof REMOVE_SOLDIERS;\r\n    payload: Soldier[];\r\n}\r\n\r\ninterface AddLoot {\r\n    type: typeof ADD_LOOT;\r\n    payload: LootItem;\r\n}\r\n\r\ninterface SellLoot {\r\n    type: typeof SELL_LOOT;\r\n    payload: { loot: LootItem; credits: number };\r\n}\r\n\r\ninterface ConvertInformation {\r\n    type: typeof CONVERT_INFORMATION;\r\n    payload: { loot: LootItem };\r\n}\r\n\r\ninterface AddCredits {\r\n    type: typeof ADD_CREDITS;\r\n    payload: Transaction;\r\n}\r\n\r\nexport type Actions = AddCredits | AddLoot | AddSoldiers | AddXp | ConvertInformation | ModifySoldier | SellLoot | RemoveSoldiers |\r\n    RewindXp | SetCrew | SetCrewName | SetCaptainsBackground | SetCaptainsGear | SetCaptainsName | SetCaptainsPowers |\r\n    SetCaptainsStats | SetCaptain | SetFirstMate | SetFirstMateBackground | SetFirstMateGear | SetFirstMateStats | SetFirstMatePowers |\r\n    SetFirstMateName | SpendXp;\r\n","import React, { useState } from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { CustomBackButtonComponent } from \"../../components/common/CustomBackButton\";\r\nimport { CharacterStatsHeader } from \"../../components/statusbar/CharacterStatsHeader\";\r\nimport { getBackgroundImage } from \"../../images/index\";\r\nimport { SET_CAPTAINS_BACKGROUND, SET_CAPTAINS_NAME, SET_FIRSTMATE_BACKGROUND, SET_FIRSTMATE_NAME } from \"../../redux/actions\";\r\nimport { BackgroundEnum, CharactersEnum } from \"../../types\";\r\n\r\nexport const CharacterBackgroundPage = () => {\r\n    const history = useHistory();\r\n    const dispatch = useDispatch();\r\n    const characterType = history.location.state as CharactersEnum;\r\n    const [background, setBackground] = useState<BackgroundEnum | undefined>();\r\n    const renderBackgroundTile = (bg: BackgroundEnum) => <div\r\n        key={`add-character-${bg}`}\r\n        className={bg === background ? \"add-character-background selected\" : \"add-character-background\"}\r\n        onClick={() => setBackground(\r\n            bg === background ?\r\n                undefined : bg\r\n        )}>\r\n        <img className=\"add-character-background-icons\" src={getBackgroundImage(bg)} alt={`add-character-${bg}-icon`} />\r\n        <div className=\"large-text\">{`${bg}`}</div>\r\n    </div>;\r\n\r\n    return <React.Fragment>\r\n        <CharacterStatsHeader characterType={characterType} />\r\n        <div className=\"modal-header\">{`Select a background for your ${characterType === CharactersEnum.Captain ? CharactersEnum.Captain : \"First Mate\"}`}</div>\r\n        {Object.keys(BackgroundEnum).map((backgroundEnumEntry: string) => renderBackgroundTile(backgroundEnumEntry as BackgroundEnum))}\r\n        <button\r\n            onClick={() => {\r\n                if (background) {\r\n                    dispatch({ type: characterType === CharactersEnum.Captain ? SET_CAPTAINS_BACKGROUND : SET_FIRSTMATE_BACKGROUND, payload: background });\r\n                    history.push(\"/CharacterStatsSelection\", characterType);\r\n                }\r\n            }}\r\n            className={background ? \"dialog-btn confirm-btn\" : \"dialog-btn confirm-btn disabled\"}\r\n        >Confirm</button>\r\n        <CustomBackButtonComponent dispatchFunction={() => dispatch({ type: characterType === CharactersEnum.Captain ? SET_CAPTAINS_NAME : SET_FIRSTMATE_NAME, payload: \"\" })} />\r\n    </React.Fragment>;\r\n};\r\n","import { useEffect, useRef, useState } from \"react\";\r\n\r\nexport function useComponentVisible(initialIsVisible: boolean) {\r\n    const [isComponentVisible, setIsComponentVisible] = useState(initialIsVisible);\r\n    const ref = useRef<HTMLDivElement>(null);\r\n\r\n    const handleHideDropdown = (event: KeyboardEvent) => {\r\n        if (event.key === \"Escape\") {\r\n            setIsComponentVisible(false);\r\n        }\r\n    };\r\n\r\n    const handleClickOutside = (event: Event) => {\r\n        if (isComponentVisible) {\r\n            event.preventDefault();\r\n            event.stopPropagation();\r\n        }\r\n        if (ref.current && !ref.current.contains(event.target as Node)) {\r\n            setIsComponentVisible(false);\r\n        }\r\n    };\r\n\r\n    const openMenu = () => {\r\n        setIsComponentVisible(true);\r\n    };\r\n\r\n    useEffect(() => {\r\n        document.addEventListener(\"keydown\", handleHideDropdown, true);\r\n        document.addEventListener(\"click\", handleClickOutside, true);\r\n        return () => {\r\n            document.removeEventListener(\"keydown\", handleHideDropdown, true);\r\n            document.removeEventListener(\"click\", handleClickOutside, true);\r\n        };\r\n    });\r\n\r\n    return { ref, isComponentVisible, setIsComponentVisible, openMenu };\r\n}\r\n","import React, { useState } from \"react\";\r\nimport { DropdownOptions, Gear, ModifiedGear } from \"../../types\";\r\nimport { useComponentVisible } from \"../../UseComponentVisible\";\r\nimport { getActualNotes, getDamageModifierString, getGeneralGearDetails } from \"../../Utils\";\r\n\r\nconst GearLabel = ({ gear, gearList }: { gear: Gear; gearList: Array<ModifiedGear | string> }) =>\r\n    <React.Fragment>\r\n        <div className=\"emphasized\">{`${gear.name} ( ${gear.gearSlots} )`} </div>\r\n        {gear.type === \"Weapon\" ? <div style={{ fontSize: \"0.65rem\" }}>\r\n            {gear.maxRange === \"Melee\" || gear.maxRange === \"Template\" ? gear.maxRange : `Range: ${gear.maxRange}`} / {`${getDamageModifierString(gear)} dmg`}</div > :\r\n            gear.type === \"Armour\" ? <div style={{ fontSize: \"0.65rem\" }}> {`+${gear.armourModifier || 0} Armour ${getActualNotes(gearList, gear) ? \"/\" : \"\"} ${getActualNotes(gearList, gear)}`}</div> : null}\r\n        {gear.type === \"Armour\" ? null : < div style={{ fontSize: \"0.65rem\" }}> {getActualNotes(gearList, gear)} </div>}\r\n    </React.Fragment>;\r\n\r\nexport const GearDropDown = ({ list, dropdownOptions, callbackFn }: { list: Gear[]; dropdownOptions: DropdownOptions; callbackFn(item: string): void }) => {\r\n    const [selectedItem, setSelectedItem] = useState<Gear>(getGeneralGearDetails(dropdownOptions.placeholder));\r\n    const getCssProps = () => {\r\n        const position = document.getElementById(`dropdown-container-${dropdownOptions.id}`)?.getBoundingClientRect();\r\n        return { top: (position?.top || 0) + 42, left: (position?.left || 0), width: (position?.width || 0) };\r\n    };\r\n    const renderGearList = () => list.filter((item: Gear) => (item.name !== selectedItem.name)).map((listItem) =>\r\n        <div key={`dropdown-list-item-${dropdownOptions.id}-${listItem.name}`}\r\n            className=\"gear-selection dropdown-input dropdown-input-list\"\r\n            onMouseDown={() => {\r\n                setSelectedItem(listItem);\r\n                callbackFn(listItem.name);\r\n                setIsComponentVisible(false);\r\n            }}\r\n        >\r\n            <GearLabel gear={listItem} gearList={list} />\r\n        </div>\r\n    );\r\n    const { ref, isComponentVisible, setIsComponentVisible, openMenu } = useComponentVisible(false);\r\n    return <React.Fragment>\r\n        <div\r\n            className=\"gear-selection selected dropdown-input\"\r\n            onClick={openMenu}\r\n            id={`dropdown-container-${dropdownOptions.id}`}>\r\n            <GearLabel gear={getGeneralGearDetails(dropdownOptions.placeholder)} gearList={list} />\r\n        </div>\r\n        <div ref={ref}>\r\n            {isComponentVisible ?\r\n                <div style={getCssProps()} className=\"dropdown-portal\">\r\n                    {list.length > 0 ? renderGearList() : <div key={`dropdown-list-item-${dropdownOptions.id}-empty-list`} className=\"dropdown-empty-list\">No match found for search string. Please refine your search.</div>}\r\n                </div> : null}\r\n        </div>\r\n    </React.Fragment>;\r\n\r\n};\r\n","import React, { useContext, useState } from \"react\";\r\nimport { ReactReduxContext } from \"react-redux\";\r\nimport { BackButtonComponent } from \"../../components/common/BackButton\";\r\nimport { Carousel } from \"../../components/common/Carousel\";\r\nimport { TreasuryComponent } from \"../../components/statusbar/TreasuryComponent\";\r\nimport { AdvancedTech1Icon, AdvancedTech2Icon, AdvancedWeaponsIcon, AlienArtefactsIcon, StarshipIcon } from \"../../images\";\r\nimport { AdvancedTech, AdvancedWeapons, AlienArtefact, CrewState, ShipUpgrade } from \"../../types\";\r\nimport { getAdvancedTech, getAdvancedWeapons, getAlienArtefacts, getShipUpgrades } from \"../../Utils\";\r\n\r\nenum ShoppingCategories {\r\n    AlienArtefacts = \"Alien Artefacts\",\r\n    AdvancedWeapons = \"Advanced Weapons\",\r\n    AdvancedTech1 = \"Advanced Tech 1\",\r\n    AdvancedTech2 = \"Advanced Tech 2\",\r\n    ShipUpgrades = \"Ship Upgrades\",\r\n}\r\n\r\nexport const ShoppingPage = () => {\r\n    const { store } = useContext(ReactReduxContext);\r\n    const state = store.getState() as CrewState;\r\n    const [shoppingSection, setShoppingSection] = useState<ShoppingCategories | undefined>(undefined);\r\n    const [details, setDetails] = useState<AlienArtefact | AdvancedTech | AdvancedWeapons | ShipUpgrade | undefined>(undefined);\r\n    const getItemsList = (cat: ShoppingCategories) => {\r\n        switch (cat) {\r\n            case ShoppingCategories.ShipUpgrades:\r\n            // get\r\n            case ShoppingCategories.AdvancedTech1:\r\n                return getAdvancedTech().filter((tech) => tech.list === 1);\r\n            case ShoppingCategories.AdvancedTech2:\r\n                return getAdvancedTech().filter((tech) => tech.list === 2);\r\n            case ShoppingCategories.AlienArtefacts:\r\n                return getAlienArtefacts();\r\n            case ShoppingCategories.AdvancedWeapons:\r\n                return getAdvancedWeapons();\r\n        }\r\n    };\r\n    const hasSufficientFunds = (cat: ShoppingCategories) => getItemsList(cat).some((item: AlienArtefact | AdvancedTech | AdvancedWeapons) => item.cost < state.Credits);\r\n    const SelectionTiles = () => <React.Fragment>\r\n        <div className={hasSufficientFunds(ShoppingCategories.AdvancedWeapons) ? \"add-character-background\" : \"add-character-background disabled\"}\r\n            onClick={() => setShoppingSection(ShoppingCategories.AdvancedWeapons)}\r\n        >\r\n            <img className=\"add-character-background-icons\" src={AdvancedWeaponsIcon} alt={\"starship\"} />\r\n            <div className=\"large-text\">{ShoppingCategories.AdvancedWeapons}</div>\r\n        </div>\r\n        <div className={hasSufficientFunds(ShoppingCategories.AlienArtefacts) ? \"add-character-background\" : \"add-character-background disabled\"} onClick={() => setShoppingSection(ShoppingCategories.AlienArtefacts)}>\r\n            <img className=\"add-character-background-icons\" src={AlienArtefactsIcon} alt={\"starship\"} />\r\n            <div className=\"large-text\">{ShoppingCategories.AlienArtefacts}</div>\r\n        </div>\r\n        <div className={hasSufficientFunds(ShoppingCategories.AdvancedTech1) ? \"add-character-background\" : \"add-character-background disabled\"} onClick={() => setShoppingSection(ShoppingCategories.AdvancedTech1)}>\r\n            <img className=\"add-character-background-icons\" src={AdvancedTech1Icon} alt={\"starship\"} />\r\n            <div className=\"large-text\">{ShoppingCategories.AdvancedTech1}</div>\r\n        </div>\r\n        <div className={hasSufficientFunds(ShoppingCategories.AdvancedTech2) ? \"add-character-background\" : \"add-character-background disabled\"} onClick={() => setShoppingSection(ShoppingCategories.AdvancedTech2)}>\r\n            <img className=\"add-character-background-icons\" src={AdvancedTech2Icon} alt={\"starship\"} />\r\n            <div className=\"large-text\">{ShoppingCategories.AdvancedTech2}</div>\r\n        </div>\r\n        <div className={hasSufficientFunds(ShoppingCategories.ShipUpgrades) ? \"add-character-background\" : \"add-character-background disabled\"} onClick={() => setShoppingSection(ShoppingCategories.ShipUpgrades)}>\r\n            <img className=\"add-character-background-icons\" src={StarshipIcon} alt={\"starship\"} />\r\n            <div className=\"large-text\">{ShoppingCategories.ShipUpgrades}</div>\r\n        </div>\r\n    </React.Fragment>;\r\n    const Details = () => <React.Fragment><div className={hasSufficientFunds(ShoppingCategories.AdvancedWeapons) ? \"add-character-background\" : \"add-character-background disabled\"}\r\n        onClick={() => setShoppingSection(ShoppingCategories.AdvancedWeapons)}\r\n    >\r\n        <img className=\"add-character-background-icons\" src={AdvancedWeaponsIcon} alt={\"starship\"} />\r\n        <div className=\"large-text\">{details?.name}</div>\r\n        <div className=\"large-text\">{details?.cost}</div>\r\n        <div className=\"large-text\">{details?.notes}</div>\r\n    </div>\r\n        <button\r\n            onClick={() => {\r\n                // selectedItems?.forEach((item) => dispatch({\r\n                //     type: ADD_LOOT,\r\n                //     payload: item.selectedItem,\r\n                // }));\r\n                // history.push(\"/CrewOverview\", history.location.state);\r\n            }}\r\n            className={\"dialog-btn confirm-btn\"}\r\n        >Buy</button>\r\n        <BackButtonComponent />\r\n    </React.Fragment>;\r\n    const ItemList = () => {\r\n        switch (shoppingSection) {\r\n            case ShoppingCategories.ShipUpgrades:\r\n                return <React.Fragment>{getShipUpgrades().map((upgrade) =>\r\n                    <div\r\n                        onClick={() => setDetails(upgrade)}\r\n                        className={state.Credits >= upgrade.cost ? \"power-selection\" : \"power-selection disabled\"}\r\n                        key={`add_dialog_x_stat_${upgrade.name}`}>\r\n                        <div key=\"power-name\">{upgrade.name}</div>\r\n                        <div key=\"power-details\" style={{ fontSize: \"0.8rem\" }}>\r\n                            Cost: {upgrade.cost}\r\n                        </div>\r\n                    </div>)}\r\n                </React.Fragment>;\r\n            case ShoppingCategories.AdvancedWeapons:\r\n                return <Carousel\r\n                    splitSize={12}\r\n                    inputDivs={getAdvancedWeapons().map((weapon) =>\r\n                        <div\r\n                            onClick={() => setDetails(weapon)}\r\n                            className={state.Credits >= weapon.cost ? \"power-selection\" : \"power-selection disabled\"}\r\n                            key={`add_dialog_x_stat_${weapon.name}`}>\r\n                            <div key=\"power-name\">{weapon.name}</div>\r\n                            <div key=\"power-details\" style={{ fontSize: \"0.8rem\" }}>\r\n                                Cost: {weapon.cost} / Gear Slots: {weapon.gearSlots}\r\n                            </div>\r\n                        </div>)}\r\n                />;\r\n            case ShoppingCategories.AdvancedTech1:\r\n                return <Carousel\r\n                    splitSize={12}\r\n                    inputDivs={getAdvancedTech().filter((tech) => tech.list === 1).map((tech) =>\r\n                        <div\r\n                            onClick={() => setDetails(tech)}\r\n                            className={state.Credits >= tech.cost ? \"power-selection\" : \"power-selection disabled\"}\r\n                            key={`add_dialog_x_stat_${tech.name}`}>\r\n                            <div key=\"power-name\">{tech.name}</div>\r\n                            <div key=\"power-details\" style={{ fontSize: \"0.8rem\" }}>\r\n                                Cost: {tech.cost} / Gear Slots: {tech.gearSlots}\r\n                            </div>\r\n                        </div>)}\r\n                />;\r\n            case ShoppingCategories.AdvancedTech2:\r\n                return <Carousel\r\n                    splitSize={12}\r\n                    inputDivs={getAdvancedTech().filter((tech) => tech.list === 2).map((tech) =>\r\n                        <div\r\n                            onClick={() => setDetails(tech)}\r\n                            className={state.Credits >= tech.cost ? \"power-selection\" : \"power-selection disabled\"}\r\n                            key={`add_dialog_x_stat_${tech.name}`}>\r\n                            <div key=\"power-name\">{tech.name}</div>\r\n                            <div key=\"power-details\" style={{ fontSize: \"0.8rem\" }}>\r\n                                Cost: {tech.cost} / Gear Slots: {tech.gearSlots}\r\n                            </div>\r\n                        </div>)}\r\n                />;\r\n            case ShoppingCategories.AlienArtefacts:\r\n                return <Carousel\r\n                    splitSize={12}\r\n                    inputDivs={getAlienArtefacts().map((artefact) =>\r\n                        <div\r\n                            onClick={() => setDetails(artefact)}\r\n                            className={state.Credits >= artefact.cost ? \"power-selection\" : \"power-selection disabled\"}\r\n                            key={`add_dialog_x_stat_${artefact.name}`}>\r\n                            <div key=\"power-name\">{artefact.name}</div>\r\n                            <div key=\"power-details\" style={{ fontSize: \"0.8rem\" }}>\r\n                                Cost: {artefact.cost} / Gear Slots: {artefact.gearSlots}\r\n                            </div>\r\n                        </div>)}\r\n                />;\r\n        }\r\n        return <React.Fragment />;\r\n    };\r\n    return <React.Fragment>\r\n        <div className=\"chapter-header\">What do you need?</div>\r\n        <TreasuryComponent externalStyles={{ marginLeft: \"9rem\" }} />\r\n        {!shoppingSection ? <SelectionTiles /> : details ? <Details /> : <ItemList />}\r\n    </React.Fragment>;\r\n};\r\n","import React, { useContext, useState } from \"react\";\r\nimport { ReactReduxContext, useDispatch } from \"react-redux\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { CustomBackButtonComponent } from \"../../components/common/CustomBackButton\";\r\nimport { GearDropDown } from \"../../components/dropdowns/GearDropdown\";\r\nimport { CharacterStatsHeader } from \"../../components/statusbar/CharacterStatsHeader\";\r\nimport { SET_CAPTAINS_GEAR, SET_CAPTAINS_POWERS, SET_FIRSTMATE_GEAR } from \"../../redux/actions\";\r\nimport { CharactersEnum, CrewState, ModifiedGear } from \"../../types\";\r\nimport { gearSortAlgorithm, getActualNotes, getDamageModifierString, getGearByType, getGeneralGearDetails } from \"../../Utils\";\r\n\r\nexport const CharacterSelectGearPage = () => {\r\n    const { store } = useContext(ReactReduxContext);\r\n    const state = store.getState() as CrewState;\r\n    const history = useHistory();\r\n    const dispatch = useDispatch();\r\n    const characterType = history.location.state as CharactersEnum;\r\n    const character = characterType === CharactersEnum.Captain ? state.Captain : state.FirstMate;\r\n    const defaultKnife = { name: getGeneralGearDetails(\"Knife\").name, gearSlots: getGeneralGearDetails(\"Knife\").gearSlots };\r\n    const defaultArmour = { name: getGeneralGearDetails(\"No Armour\").name, gearSlots: getGeneralGearDetails(\"No Armour\").gearSlots };\r\n    const [selectedGear, setSelectedGear] = useState<ModifiedGear[]>([defaultKnife, defaultArmour]);\r\n    const isGearSelected = (gear: string) => !!selectedGear.find((gr) => gr.name === gear);\r\n    const maxGear = () => selectedGear.reduce((acc, gear) => acc + gear.gearSlots, 0) >= (character.gearSlots);\r\n\r\n    const getSelectedArmour = () => getGearByType(\"Armour\")?.find((armour) => isGearSelected(armour.name));\r\n    const getSelectedMelee = () => getGearByType(\"Weapon\")?.filter((weapon) => weapon.maxRange === \"Melee\")?.find((melee) => isGearSelected(melee.name));\r\n    const getCSSClasses = (name: string, withMax?: boolean) => isGearSelected(name) ? \"gear-selection selected\" : itemTooLarge(name) || (withMax && maxGear()) ? \"gear-selection disabled\" : \"gear-selection\";\r\n    const itemTooLarge = (gearName: string) => selectedGear.reduce((acc, gearItem) => acc + gearItem.gearSlots, 0) + getGeneralGearDetails(gearName).gearSlots > (character.gearSlots);\r\n    const onClickHandler = (gearName: string) => {\r\n        if (isGearSelected(gearName)) {\r\n            if (gearName === \"Combat Armour\") {\r\n                setSelectedGear([...selectedGear.filter((gear) => gear.name !== gearName && gear.name !== \"Hand Weapon\" && gear.name !== \"Filter Mask\" && gear.name !== \"Pistol\"), defaultKnife]);\r\n                return;\r\n            }\r\n            setSelectedGear(selectedGear.filter((gear) => gear.name !== gearName));\r\n        } else {\r\n            const gearDetails = getGeneralGearDetails(gearName);\r\n            if (itemTooLarge(gearName) || (gearDetails.type === \"Weapon\" && maxGear())) {\r\n                return;\r\n            }\r\n            if (gearDetails.type === \"Armour\") {\r\n                if (gearDetails.name === \"Combat Armour\") {\r\n                    setSelectedGear(\r\n                        [\r\n                            ...selectedGear.filter((selGear) => getGeneralGearDetails(selGear.name).type !== \"Armour\").filter((selGear) => getGeneralGearDetails(selGear.name).maxRange !== \"Melee\"),\r\n                            { name: gearName, gearSlots: gearDetails.gearSlots },\r\n                            { name: \"Hand Weapon\", gearSlots: 0 },\r\n                            { name: \"Filter Mask\", gearSlots: 0 },\r\n                            { name: \"Pistol\", gearSlots: 0 }]);\r\n                    return;\r\n                }\r\n                if (getSelectedArmour()?.name === \"Combat Armour\") {\r\n                    setSelectedGear([\r\n                        ...selectedGear.filter((gear) => gear.name !== \"Combat Armour\" && gear.name !== \"Hand Weapon\" && gear.name !== \"Filter Mask\" && gear.name !== \"Pistol\"),\r\n                        defaultKnife,\r\n                        { name: gearName, gearSlots: gearDetails.gearSlots },\r\n                    ]);\r\n                } else {\r\n                    setSelectedGear([...selectedGear.filter((selGear) => getGeneralGearDetails(selGear.name).type !== gearDetails.type), { name: gearName, gearSlots: gearDetails.gearSlots }]);\r\n                }\r\n                return;\r\n            }\r\n            if ((gearDetails.type === \"Weapon\" && gearDetails.maxRange === \"Melee\")) {\r\n                setSelectedGear([\r\n                    ...selectedGear.filter((selGear) => getGeneralGearDetails(selGear.name).maxRange !== \"Melee\"),\r\n                    { name: gearName, gearSlots: gearDetails.gearSlots },\r\n                ]);\r\n                return;\r\n            }\r\n            setSelectedGear([...selectedGear, { name: gearName, gearSlots: gearDetails.gearSlots }]);\r\n        }\r\n    };\r\n\r\n    return <React.Fragment>\r\n        <CharacterStatsHeader characterType={characterType} gearSlots={selectedGear.reduce((acc, gearItem) => acc + gearItem.gearSlots, 0)} />\r\n        <div className=\"single-selection-gear\">\r\n            <div className=\"modal-header\">Armour</div>\r\n            <GearDropDown\r\n                dropdownOptions={{\r\n                    id: \"Armour\",\r\n                    placeholder: getSelectedArmour() || { ...defaultArmour, type: \"Armour\" },\r\n                }}\r\n                list={getGearByType(\"Armour\") || []}\r\n                callbackFn={onClickHandler}\r\n            />\r\n        </div>\r\n        <div className=\"single-selection-gear\">\r\n            <div className=\"modal-header\">Melee Weapons</div>\r\n            <GearDropDown\r\n                dropdownOptions={{\r\n                    id: \"Melee\",\r\n                    placeholder: getSelectedMelee() || { ...defaultKnife, type: \"Weapon\", maxRange: \"Melee\" },\r\n                }}\r\n                list={getGearByType(\"Weapon\")?.filter((weapon) => weapon.maxRange === \"Melee\") || []}\r\n                callbackFn={onClickHandler}\r\n            />\r\n        </div>\r\n        <div className=\"modal-header\">Equipment</div>\r\n        {getGearByType(\"Equipment\")?.map((equi) =>\r\n            <div className=\"single-selection-gear\">\r\n                <div className={getCSSClasses(equi.name)} onClick={() => onClickHandler(equi.name)}>\r\n                    <div className=\"emphasized\">{`${equi.name} ( ${isGearSelected(equi.name) ? (selectedGear.find((item) => item.name === equi.name) as ModifiedGear).gearSlots : equi.gearSlots} )`}</div>\r\n                    <div className=\"medium-text\">{equi.notes}</div>\r\n                </div>\r\n            </div>)}\r\n\r\n        <div className=\"modal-header\">Shooting Weapons</div>\r\n        {getGearByType(\"Weapon\")?.filter((weapon) => weapon.maxRange !== \"Melee\").sort((a, b) => gearSortAlgorithm(a) - gearSortAlgorithm(b)).map((weapon) =>\r\n            <div className=\"single-selection-gear\">\r\n                <div className={getCSSClasses(weapon.name, true)} onClick={() => onClickHandler(weapon.name)}>\r\n                    <div className=\"emphasized\">{`${weapon.name} ( ${isGearSelected(weapon.name) ? (selectedGear.find((item) => item.name === weapon.name) as ModifiedGear).gearSlots : weapon.gearSlots} )`}</div>\r\n                    <div className=\"medium-text\">{`Range: ${weapon.maxRange}`} / {`${getDamageModifierString(weapon)} dmg`}</div>\r\n                    {weapon.notes ? <div className=\"medium-text\">{getActualNotes(selectedGear, weapon)}</div> : null}\r\n                </div>\r\n            </div>)}\r\n        <button\r\n            onClick={() => {\r\n                dispatch({ type: characterType === CharactersEnum.Captain ? SET_CAPTAINS_GEAR : SET_FIRSTMATE_GEAR, payload: selectedGear.sort((a, b) => (a.name.localeCompare(b.name))) });\r\n                history.push(characterType === CharactersEnum.Captain ? \"/CharacterName\" : \"/SoldierSelection\", CharactersEnum.FirstMate);\r\n            }}\r\n            className={\"dialog-btn confirm-btn\"}\r\n        >{`${\"Confirm\"}`}</button>\r\n        <CustomBackButtonComponent\r\n            dispatchFunction={() => dispatch({ type: characterType === CharactersEnum.Captain ? SET_CAPTAINS_POWERS : SET_CAPTAINS_POWERS, payload: [] })}\r\n            customHistory={() => history.push(\"/CharacterPowerSelection\", characterType)}\r\n        />\r\n    </React.Fragment>;\r\n};\r\n","import React, { useLayoutEffect, useRef, useState } from \"react\";\r\n\r\nexport const InputComponent = ({ currentState, tooltip, cssClass, callback }: { currentState: string; tooltip: string; cssClass: string; callback(name: string): void }) => {\r\n    const [name, setName] = useState<string>(currentState);\r\n    const [inputVisible, setInputVisible] = useState<boolean>(false);\r\n    const inputRef = useRef<HTMLInputElement>(null);\r\n    useLayoutEffect(() => {\r\n        inputRef?.current?.focus();\r\n    }, [inputVisible]);\r\n\r\n    const checkEnter = (event: React.KeyboardEvent<HTMLInputElement>) => {\r\n        if (event.code === \"Enter\") {\r\n            callback(name);\r\n            setInputVisible(false);\r\n        }\r\n        if (event.code === \"Escape\") {\r\n            setName(currentState);\r\n            callback(currentState);\r\n            setInputVisible(false);\r\n        }\r\n    };\r\n\r\n    const checkInput = (event: React.FormEvent<HTMLInputElement>) => {\r\n        setName(event.currentTarget.value);\r\n        callback(event.currentTarget.value);\r\n    };\r\n\r\n    return inputVisible ?\r\n        <input\r\n            ref={inputRef}\r\n            className={cssClass}\r\n            id=\"NameInput\"\r\n            onChange={checkInput}\r\n            onKeyUp={checkEnter}\r\n            onBlur={() => {\r\n                callback(name);\r\n                setInputVisible(false);\r\n            }}\r\n            value={name}\r\n        /> :\r\n        <div\r\n            style={{ placeSelf: \"start\", padding: \"0.2rem 0.23rem\" }}\r\n            className={currentState ? \"input-text-div\" : \"input-text-div input-error\"}\r\n            onClick={() => setInputVisible(true)}>\r\n            {currentState || tooltip}\r\n        </div>;\r\n};\r\n","import { InputComponent } from \"./InputComponent\";\r\n\r\nexport const NameComponent = ({ currentStateValue, tooltip, inputCallback }: { currentStateValue: string; tooltip: string; inputCallback(name: string): void }) =>\r\n    <div className=\"statusbar-name\">\r\n        <InputComponent callback={inputCallback} currentState={currentStateValue} tooltip={tooltip} cssClass=\"input-field\" />\r\n    </div>;\r\n","import React, { useContext, useState } from \"react\";\r\nimport { ReactReduxContext, useDispatch } from \"react-redux\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { CustomBackButtonComponent } from \"../../components/common/CustomBackButton\";\r\nimport { NameComponent } from \"../../components/NameComponent\";\r\nimport { CharacterStatsHeader } from \"../../components/statusbar/CharacterStatsHeader\";\r\nimport { SET_CAPTAINS_NAME, SET_FIRSTMATE_NAME, SET_SHIPNAME } from \"../../redux/actions\";\r\nimport { CharactersEnum, CrewState } from \"../../types\";\r\nexport const CharacterNamePage = () => {\r\n    const { store } = useContext(ReactReduxContext);\r\n    const state = store.getState() as CrewState;\r\n    const history = useHistory();\r\n    const dispatch = useDispatch();\r\n    const characterType = history.location.state as CharactersEnum;\r\n    const [name, setName] = useState<string>(characterType === CharactersEnum.Captain ? state.Captain.name : state.FirstMate.name);\r\n\r\n    return <React.Fragment>\r\n        <CharacterStatsHeader characterType={characterType} />\r\n        <div className=\"modal-header\">\r\n            {`This is your ${characterType} base stat line. \\n\\nIn the following screens you will be able to select a background, improve some stats, select powers and equip your ${characterType} with some useful gear.`}\r\n        </div>\r\n        <div className=\"modal-header\">{`But first of all, your ${characterType} needs a name:`}</div>\r\n        <NameComponent inputCallback={setName} currentStateValue={name} tooltip={`${characterType}'s name`} />\r\n        <button\r\n            onClick={() => {\r\n                if (name) {\r\n                    dispatch({ type: characterType === CharactersEnum.Captain ? SET_CAPTAINS_NAME : SET_FIRSTMATE_NAME, payload: name });\r\n                    history.push(\"/CharacterBackground\", characterType);\r\n                }\r\n            }}\r\n            className={name ? \"dialog-btn confirm-btn\" : \"dialog-btn confirm-btn disabled\"}\r\n        >Confirm</button>\r\n        <CustomBackButtonComponent dispatchFunction={() => dispatch({ type: SET_SHIPNAME, payload: \"\" })} />\r\n    </React.Fragment>;\r\n};\r\n","import { useEffect, useState } from \"react\";\r\nimport ReactSwipe from \"react-swipe\";\r\n\r\nexport const Carousel = ({ inputDivs, splitSize, resetPage }: { inputDivs: JSX.Element[] | null; splitSize: number; resetPage?: number }) => {\r\n    let reactSwipeEl: ReactSwipe;\r\n    const cnt = inputDivs?.length || 0;\r\n    const sectionCnt = Math.ceil(cnt / splitSize);\r\n    const [currentSection, setCurrentSection] = useState<number>(resetPage || 1);\r\n    useEffect(() => {\r\n        reactSwipeEl.slide(currentSection - 1, 0);\r\n    });\r\n    const getContent = () => {\r\n        const sectionDivs: JSX.Element[] = [];\r\n        for (let i = 0; i < sectionCnt; i++) {\r\n            sectionDivs.push(<div>{inputDivs?.slice((i * splitSize), (i + 1) * splitSize)}</div>);\r\n        }\r\n        return sectionDivs;\r\n    };\r\n    return <div>\r\n        <ReactSwipe\r\n            className={\"carousel\"}\r\n            swipeOptions={{\r\n                continuous: false,\r\n            }}\r\n            ref={(el: ReactSwipe) => (reactSwipeEl = el)}\r\n            childCount={sectionCnt}\r\n        >\r\n            {getContent()}\r\n        </ReactSwipe>\r\n        <div style={{ display: \"inline-grid\", width: \"100%\" }}>\r\n            <button\r\n                className={currentSection === 1 ? \"carousel-btn disabled\" : \"carousel-btn\"}\r\n                onClick={() => {\r\n                    setCurrentSection(reactSwipeEl.getPos());\r\n                    reactSwipeEl.prev();\r\n                }}\r\n            >{\"<\"}</button>\r\n            <div style={{ gridArea: \"1\", placeSelf: \"center\" }}>{`${currentSection} / ${sectionCnt}`}</div>\r\n            <button\r\n                className={(currentSection === sectionCnt) ? \"carousel-btn disabled\" : \"carousel-btn\"}\r\n                onClick={() => {\r\n                    setCurrentSection(reactSwipeEl.getPos() + 2);\r\n                    reactSwipeEl.next();\r\n                }}\r\n            >{\">\"}</button>\r\n        </div>\r\n    </div >;\r\n};\r\n","import React, { useContext, useEffect, useState } from \"react\";\r\nimport { ReactReduxContext, useDispatch } from \"react-redux\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { Carousel } from \"../../components/common/Carousel\";\r\nimport { CustomBackButtonComponent } from \"../../components/common/CustomBackButton\";\r\nimport { SET_CAPTAINS_POWERS, SET_FIRSTMATE_POWERS } from \"../../redux/actions\";\r\nimport { BackgroundEnum, CharactersEnum, CrewState, Power } from \"../../types\";\r\nimport { getNonCorePowers, isCorePower } from \"../../Utils\";\r\n\r\nexport const CharacterNonCorePowerSelectionPage = () => {\r\n    const { store } = useContext(ReactReduxContext);\r\n    const state = store.getState() as CrewState;\r\n    const history = useHistory();\r\n    const dispatch = useDispatch();\r\n    const characterType = history.location.state as CharactersEnum;\r\n    const character = characterType === CharactersEnum.Captain ? state.Captain : state.FirstMate;\r\n    const [selectedPowers, setSelectedPowers] = useState<Power[]>([]);\r\n    const [previewPower, setPreviewPower] = useState<Power | undefined>(undefined);\r\n    const [lastPreviewPower, setLastPreviewPower] = useState<Power | undefined>(undefined);\r\n    useEffect(() => {\r\n        if (previewPower) {\r\n            setLastPreviewPower(previewPower);\r\n        }\r\n    }, [previewPower]);\r\n    const isPowerSelected = (power: Power) => !!selectedPowers.find((pwr) => pwr.name === power.name);\r\n    const maxCorePowersSelected = () => {\r\n        let powersRemaining2 = characterType === CharactersEnum.Captain ? 4 : 3;\r\n        if (selectedPowers.filter((power) => !isCorePower(power.name, character.background as BackgroundEnum)).length === 2) {\r\n            powersRemaining2 = characterType === CharactersEnum.Captain ? 3 : 2;\r\n        }\r\n        return selectedPowers.filter((power) => isCorePower(power.name, character.background as BackgroundEnum)).length >= powersRemaining2;\r\n    };\r\n    const powersRemaining = (characterType === CharactersEnum.Captain ? 5 : 4) - character.powers.length;\r\n\r\n    return <React.Fragment>\r\n        {previewPower ?\r\n            <React.Fragment>\r\n                <div className=\"modal-header\">\r\n                    {`View Details for Power \"${previewPower.name}\"`}\r\n                    <div className=\"modal-sub-header\">{\"Click the back to return to the selection menu.\"}</div>\r\n                </div>\r\n                <div className=\"power-preview-section\">\r\n                    <div className=\"power-preview-name\">{`${previewPower.name}`}</div>\r\n                    <div className=\"power-preview-infos\">\r\n                        {`Activation: ${previewPower.activation}`} / {`Strain: ${previewPower.strain}`} / {Array.isArray(previewPower.category) ? `Categories: ${previewPower.category.join(\", \")}` : `Category: ${previewPower.category}`}\r\n                    </div>\r\n                    <div className={previewPower.effect.length <= 200 ? \"large-text\" : previewPower.effect.length <= 400 ? \"power-preview-medium-text\" : \"power-preview-small-text\"}>{previewPower.effect}</div>\r\n                </div>\r\n                <button\r\n                    onClick={(event) => {\r\n                        setPreviewPower(undefined);\r\n                        event.preventDefault();\r\n                        event.stopPropagation();\r\n                    }}\r\n                    className={\"dialog-btn close-btn foreground\"}\r\n                >Close</button>\r\n            </React.Fragment> :\r\n            <React.Fragment>\r\n                <div className=\"modal-header\">\r\n                    {`Choose ${powersRemaining} additional ${powersRemaining === 1 ? \"Power\" : \"Powers\"}`}\r\n                    <div className=\"modal-sub-header\">{\"Swipe or use the page buttons to see more entries\"}</div>\r\n                </div>\r\n                <Carousel\r\n                    splitSize={8}\r\n                    resetPage={lastPreviewPower ? Math.ceil(getNonCorePowers(character.background as BackgroundEnum, characterType === CharactersEnum.Captain).findIndex((pwr) => pwr.name === lastPreviewPower?.name) / 8) : 1}\r\n                    inputDivs={getNonCorePowers(character.background as BackgroundEnum, characterType === CharactersEnum.Captain).map((power) =>\r\n                        <div\r\n                            onClick={() => {\r\n                                if (isPowerSelected(power)) {\r\n                                    const idx = selectedPowers.findIndex((pwr) => pwr.name === power.name);\r\n                                    if (idx !== -1) {\r\n                                        setSelectedPowers([...selectedPowers.slice(0, idx), ...selectedPowers.slice(idx + 1, selectedPowers.length)]);\r\n                                    }\r\n                                } else {\r\n                                    if (maxCorePowersSelected()) {\r\n                                        return;\r\n                                    }\r\n                                    setSelectedPowers([...selectedPowers, { ...power, activation: power.activation }]);\r\n                                }\r\n                            }}\r\n                            className={isPowerSelected(power) ? \"power-selection selected\" : maxCorePowersSelected() ? \"power-selection disabled\" : \"power-selection\"}\r\n                            key={`add_dialog_x_stat_${power.name}`}>\r\n\r\n                            <div className={isPowerSelected(power) ? \"info-corner inverted\" : \"info-corner\"} />\r\n                            <div className=\"info-corner-text\">i</div>\r\n                            <div>{power.name}</div>\r\n                            <div style={{ fontSize: \"0.8rem\" }}>{power.activation} / {power.strain} / {Array.isArray(power.category) ? `${power.category.join(\", \")}` : power.category}</div>\r\n                            <div className=\"info-click-area-non-core\"\r\n                                onClick={(event) => {\r\n                                    setPreviewPower(characterType === CharactersEnum.Captain ? power : { ...power, activation: power.activation + 2 });\r\n                                    event.preventDefault();\r\n                                    event.stopPropagation();\r\n                                }} />\r\n                        </div>\r\n\r\n                    )}\r\n\r\n                />\r\n                <button\r\n                    onClick={() => {\r\n                        if (selectedPowers.length === powersRemaining) {\r\n                            dispatch({ type: characterType === CharactersEnum.Captain ? SET_CAPTAINS_POWERS : SET_FIRSTMATE_POWERS, payload: [...selectedPowers, ...character.powers].sort((a, b) => (a.name.localeCompare(b.name))) });\r\n                            history.push(characterType === CharactersEnum.Captain ? \"/CharacterImprovePowers\" : \"/CharacterSelectGear\", characterType);\r\n                        }\r\n                    }}\r\n                    className={selectedPowers.length === powersRemaining ? \"dialog-btn confirm-btn\" : \"dialog-btn confirm-btn disabled\"}\r\n                >Confirm</button>\r\n                <CustomBackButtonComponent dispatchFunction={() => dispatch({ type: characterType === CharactersEnum.Captain ? SET_CAPTAINS_POWERS : SET_FIRSTMATE_POWERS, payload: [] })} />\r\n            </React.Fragment>}\r\n    </React.Fragment>;\r\n};\r\n","import React, { useContext, useState } from \"react\";\r\nimport { ReactReduxContext, useDispatch } from \"react-redux\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { CustomBackButtonComponent } from \"../../components/common/CustomBackButton\";\r\nimport { SET_CAPTAINS_POWERS, SET_FIRSTMATE_POWERS } from \"../../redux/actions\";\r\nimport { CharactersEnum, CrewState, ModifiedPower, Power } from \"../../types\";\r\nimport { getPower } from \"../../Utils\";\r\n\r\nexport const CharacterPowerImprovementsPage = () => {\r\n    const { store } = useContext(ReactReduxContext);\r\n    const state = store.getState() as CrewState;\r\n    const history = useHistory();\r\n    const dispatch = useDispatch();\r\n    const characterType = history.location.state as CharactersEnum;\r\n    const character = characterType === CharactersEnum.Captain ? state.Captain : state.FirstMate;\r\n    const [selectedPowers, setSelectedPowers] = useState<ModifiedPower[]>([]);\r\n    const [previewPower, setPreviewPower] = useState<Power | undefined>(undefined);\r\n    const updatedArray = () => character.powers.filter((pwr) => !selectedPowers.find((x) => x.name === pwr.name)).concat(selectedPowers).sort((a, b) => (a.name.localeCompare(b.name)));\r\n    const isPowerSelected = (power: ModifiedPower) => !!selectedPowers.find((pwr) => pwr.name === power.name);\r\n    return <React.Fragment >\r\n        {previewPower ?\r\n            <React.Fragment >\r\n                <div className=\"modal-header\">\r\n                    {`View Details for Power \"${previewPower.name}\"`}\r\n                    <div className=\"modal-sub-header\">{\"Click the back to return to the selection menu.\"}</div>\r\n                </div>\r\n                <div className=\"power-preview-section\">\r\n                    <div className=\"power-preview-name\">{`${previewPower.name}`}</div>\r\n                    <div className=\"power-preview-infos\">\r\n                        {`Activation: ${previewPower.activation}`} / {`Strain: ${previewPower.strain}`} / {Array.isArray(previewPower.category) ? `Categories: ${previewPower.category.join(\", \")}` : `Category: ${previewPower.category}`}\r\n                    </div>\r\n                    <div className={previewPower.effect.length <= 200 ? \"large-text\" : previewPower.effect.length <= 400 ? \"power-preview-medium-text\" : \"power-preview-small-text\"}>{previewPower.effect}</div>\r\n                </div>\r\n                <button\r\n                    onClick={(event) => {\r\n                        setPreviewPower(undefined);\r\n                        event.preventDefault();\r\n                        event.stopPropagation();\r\n                    }}\r\n                    className={\"dialog-btn close-btn foreground\"}\r\n                >Close</button>\r\n            </React.Fragment > :\r\n            <React.Fragment>\r\n                <div className=\"modal-header\">Select 2 of the following powers to lower their activation value by 1 each</div>\r\n                {character.powers.map((power) => {\r\n                    const actualPower = getPower(power.name);\r\n                    return <div style={{ display: \"inline-block\", width: \"100%\" }}>\r\n                        <div className={isPowerSelected(power) ? \"background-power-selection full-width selected\" : \"background-power-selection full-width\"}\r\n                            onClick={() => {\r\n                                if (selectedPowers.find((pwr) => pwr.name === power.name)) {\r\n                                    setSelectedPowers(selectedPowers.filter((pwr) => pwr.name !== power.name));\r\n                                } else {\r\n                                    if (selectedPowers.length >= 2) {\r\n                                        return;\r\n                                    }\r\n                                    setSelectedPowers([...selectedPowers, { ...power, activation: power.activation - 1 }]);\r\n                                }\r\n                            }}\r\n                            key={`add_dialog_x_stat_${power.name}`}>\r\n                            <div className={isPowerSelected(power) ? \"info-corner inverted\" : \"info-corner \"} />\r\n                            <div className=\"info-corner-text\">i</div>\r\n                            <div>{power.name}</div>\r\n                            <div style={{ fontSize: \"0.8rem\" }}>\r\n                                {isPowerSelected(power) ? power.activation - 1 : power.activation} / {actualPower.strain} / {Array.isArray(actualPower.category) ? `${actualPower.category.join(\", \")}` : actualPower.category}\r\n                            </div>\r\n\r\n                        </div>\r\n                        <div className=\"info-click-area\"\r\n                            onClick={(event) => {\r\n                                setPreviewPower(actualPower);\r\n                                event.preventDefault();\r\n                                event.stopPropagation();\r\n                            }} />\r\n                    </div>;\r\n                })}\r\n                <button\r\n                    onClick={() => {\r\n                        if (selectedPowers.length === 2) {\r\n                            dispatch({ type: characterType === CharactersEnum.Captain ? SET_CAPTAINS_POWERS : SET_FIRSTMATE_POWERS, payload: updatedArray() });\r\n                            history.push(\"/CharacterSelectGear\", characterType);\r\n                        }\r\n                    }}\r\n                    className={selectedPowers.length === 2 ? \"dialog-btn confirm-btn\" : \"dialog-btn confirm-btn disabled\"}\r\n                >Confirm</button>\r\n                <CustomBackButtonComponent\r\n                    dispatchFunction={() => dispatch({ type: characterType === CharactersEnum.Captain ? SET_CAPTAINS_POWERS : SET_CAPTAINS_POWERS, payload: [] })}\r\n                    customHistory={() => history.push(\"/CharacterPowerSelection\", characterType)}\r\n                />\r\n            </React.Fragment >\r\n        }\r\n\r\n    </React.Fragment >;\r\n};\r\n","import React, { useContext, useState } from \"react\";\r\nimport { ReactReduxContext, useDispatch } from \"react-redux\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { CustomBackButtonComponent } from \"../../components/common/CustomBackButton\";\r\nimport { CharacterStatsHeader } from \"../../components/statusbar/CharacterStatsHeader\";\r\nimport { SET_CAPTAINS_POWERS, SET_CAPTAINS_STATS, SET_FIRSTMATE_POWERS, SET_FIRSTMATE_STATS } from \"../../redux/actions\";\r\nimport { BackgroundEnum, CharactersEnum, CrewState, ModifiedPower, Power } from \"../../types\";\r\nimport { getBackgroundInfos, getBaseCaptain, getBaseFirstMate, getPowerInfos } from \"../../Utils\";\r\n\r\nexport const CharacterPowerSelectionPage = () => {\r\n    const { store } = useContext(ReactReduxContext);\r\n    const state = store.getState() as CrewState;\r\n    const history = useHistory();\r\n    const dispatch = useDispatch();\r\n    const characterType = history.location.state as CharactersEnum;\r\n    const character = characterType === CharactersEnum.Captain ? state.Captain : state.FirstMate;\r\n    const [selectedPowers, setSelectedPowers] = useState<Power[]>([]);\r\n    const [previewPower, setPreviewPower] = useState<Power>();\r\n    const isPowerSelected = (power: Power) => !!selectedPowers.find((pwr) => pwr.name === power.name);\r\n    const minPowersSelected = () => selectedPowers.length >= (characterType === CharactersEnum.Captain ? 3 : 2);\r\n    const maxPowersSelected = () => selectedPowers.length >= (characterType === CharactersEnum.Captain ? 4 : 3);\r\n    return <React.Fragment>\r\n        {previewPower ?\r\n            <React.Fragment>\r\n                <div className=\"modal-header\">\r\n                    {`View Details for Power \"${previewPower.name}\"`}\r\n                    <div className=\"modal-sub-header\">{\"Click the back to return to the selection menu.\"}</div>\r\n                </div>\r\n                <div className=\"power-preview-section\">\r\n                    <div className=\"power-preview-name\">{`${previewPower.name}`}</div>\r\n                    <div className=\"power-preview-infos\">\r\n                        {`Activation: ${previewPower.activation}`} / {`Strain: ${previewPower.strain}`} / {Array.isArray(previewPower.category) ? `Categories: ${previewPower.category.join(\", \")}` : `Category: ${previewPower.category}`}\r\n                    </div>\r\n                    <div className={previewPower.effect.length <= 200 ? \"large-text\" : previewPower.effect.length <= 400 ? \"power-preview-medium-text\" : \"power-preview-small-text\"}>{previewPower.effect}</div>\r\n                </div>\r\n                <button\r\n                    onClick={(event) => {\r\n                        setPreviewPower(undefined);\r\n                        event.preventDefault();\r\n                        event.stopPropagation();\r\n                    }}\r\n                    className={\"dialog-btn close-btn foreground\"}\r\n                >Close</button>\r\n            </React.Fragment> :\r\n            <React.Fragment>\r\n                <CharacterStatsHeader characterType={characterType} />\r\n                <div className=\"modal-header\">\r\n                    {`Choose ${characterType === CharactersEnum.Captain ? \"3 - 4\" : \"2 - 3\"} core Powers`}\r\n                    <div className=\"modal-sub-header\">{\"Click the info icon in the top right corner of a power to view its details\"}</div>\r\n                </div>\r\n                {getPowerInfos(getBackgroundInfos(character.background as BackgroundEnum).corePowers).map((power) => <div style={{ display: \"inline-block\", width: \"100%\" }}>\r\n                    <div\r\n                        onClick={() => {\r\n                            if (isPowerSelected(power)) {\r\n                                const idx = selectedPowers.findIndex((pwr) => pwr.name === power.name);\r\n                                if (idx !== -1) {\r\n                                    setSelectedPowers([...selectedPowers.slice(0, idx), ...selectedPowers.slice(idx + 1, selectedPowers.length)]);\r\n                                }\r\n                            } else {\r\n                                if (maxPowersSelected()) {\r\n                                    return;\r\n                                }\r\n                                setSelectedPowers([...selectedPowers, { ...power, activation: power.activation + (characterType === CharactersEnum.Captain ? 0 : 2) }]);\r\n                            }\r\n                        }}\r\n                        className={isPowerSelected(power) ? \"power-selection selected\" : maxPowersSelected() ? \"power-selection disabled\" : \"power-selection\"}\r\n                        key={`add_dialog_x_stat_${power.name}`}>\r\n\r\n                        <div key=\"power-info-corner\" className={isPowerSelected(power) ? \"info-corner inverted\" : \"info-corner \"} />\r\n                        <div key=\"power-info-corner-text\" className=\"info-corner-text\">i</div>\r\n                        <div key=\"power-name\">{power.name}</div>\r\n                        <div key=\"power-details\" style={{ fontSize: \"0.8rem\" }}>\r\n                            {power.activation + (characterType === CharactersEnum.Captain ? 0 : 2)} / {power.strain} / {Array.isArray(power.category) ? `${power.category.join(\", \")}` : power.category}\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"info-click-area\"\r\n                        onClick={(event) => {\r\n                            setPreviewPower(characterType === CharactersEnum.Captain ? power : { ...power, activation: power.activation + 2 });\r\n                            event.preventDefault();\r\n                            event.stopPropagation();\r\n                        }} />\r\n                </div>\r\n                )}\r\n                <button\r\n                    onClick={() => {\r\n                        if (minPowersSelected()) {\r\n                            dispatch({\r\n                                type: characterType === CharactersEnum.Captain ? SET_CAPTAINS_POWERS : SET_FIRSTMATE_POWERS,\r\n                                payload: selectedPowers.map((pow): ModifiedPower => ({ name: pow.name, activation: pow.activation })).sort((a, b) => (a.name.localeCompare(b.name))),\r\n                            });\r\n                            history.push(\"/CharacterNonCorePowerSelection\", characterType);\r\n                        }\r\n                    }}\r\n                    className={minPowersSelected() ? \"dialog-btn confirm-btn\" : \"dialog-btn confirm-btn disabled\"}\r\n                >Confirm</button>\r\n                <CustomBackButtonComponent\r\n                    dispatchFunction={() => characterType === CharactersEnum.Captain ? dispatch({ type: SET_CAPTAINS_STATS, payload: getBaseCaptain().stats }) : dispatch({ type: SET_FIRSTMATE_STATS, payload: getBaseFirstMate().stats })}\r\n                />\r\n            </React.Fragment>}\r\n    </React.Fragment>;\r\n};\r\n","import React, { useContext, useState } from \"react\";\r\nimport { ReactReduxContext, useDispatch } from \"react-redux\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { CustomBackButtonComponent } from \"../../components/common/CustomBackButton\";\r\nimport { CustomStatsHeader } from \"../../components/statusbar/CharacterStatsHeader\";\r\nimport { SET_CAPTAINS_BACKGROUND, SET_CAPTAINS_STATS, SET_FIRSTMATE_BACKGROUND, SET_FIRSTMATE_STATS } from \"../../redux/actions\";\r\nimport { BackgroundEnum, CharactersEnum, CrewState, Stats, StatsEnum } from \"../../types\";\r\nimport { getBackgroundInfos } from \"../../Utils\";\r\n\r\nexport const CharacterStatsSelectionPage = () => {\r\n    const { store } = useContext(ReactReduxContext);\r\n    const state = store.getState() as CrewState;\r\n    const history = useHistory();\r\n    const dispatch = useDispatch();\r\n    const characterType = history.location.state as CharactersEnum;\r\n    const character = characterType === CharactersEnum.Captain ? state.Captain : state.FirstMate;\r\n    const background = getBackgroundInfos(character.background as BackgroundEnum);\r\n    const [selections, setSelections] = useState<Partial<Stats>>({});\r\n    const isStatSelected = (statName: string) => selections[statName as StatsEnum] !== undefined;\r\n    const statModificationsForBackground = getBackgroundInfos(background.name).statModifications;\r\n    const maxStatsReached = () => Object.keys(selections).length === statModificationsForBackground.chooseOptionals;\r\n    const calcPayload = () => {\r\n        let stats = character.stats;\r\n        stats = Object.entries(selections).reduce((newStats, [key, value]) => ({ ...newStats, [key]: value ? newStats[key as StatsEnum] + value : newStats[key as StatsEnum] }), stats);\r\n        return Object.entries(statModificationsForBackground.mandatory).reduce((newStats, [key, value]) => ({ ...newStats, [key]: value ? newStats[key as StatsEnum] + value : newStats[key as StatsEnum] }), stats);\r\n    };\r\n    return <React.Fragment>\r\n        <CustomStatsHeader character={{ ...character, stats: calcPayload() }} />\r\n        <div style={{ marginTop: \"0.5rem\" }} className=\"modal-header\">Granted Stats Improvements</div>\r\n        {Object.entries(statModificationsForBackground.mandatory).map(([statName, statValue]) =>\r\n            <div className=\"background-stat-selection selected\" key={`add_captain_dialog_mand_stat_${statName}`}>+{statValue} {statName}</div>\r\n        )}\r\n        <div className=\"modal-header\">{`Optional Stats Improvements \\n (choose ${statModificationsForBackground.chooseOptionals} of the following)`}</div>\r\n        {Object.entries(statModificationsForBackground.optional).map(([statName, statValue]) =>\r\n            <div\r\n                onClick={() => {\r\n                    if (isStatSelected(statName)) {\r\n                        const { [statName as StatsEnum]: exclProp, ...rest } = selections;\r\n                        setSelections(rest);\r\n                    } else {\r\n                        if (maxStatsReached()) {\r\n                            return;\r\n                        }\r\n                        setSelections({ ...selections, [statName]: statValue });\r\n                    }\r\n                }}\r\n                className={isStatSelected(statName) ? \"background-stat-selection selected\" : maxStatsReached() ? \"background-stat-selection disabled\" : \"background-stat-selection\"}\r\n                key={`add_captain_dialog_opt_stat_${statName}`}>\r\n                +{statValue} {statName}\r\n            </div>\r\n        )}\r\n        <button\r\n            onClick={() => {\r\n                if (maxStatsReached()) {\r\n                    dispatch({ type: characterType === CharactersEnum.Captain ? SET_CAPTAINS_STATS : SET_FIRSTMATE_STATS, payload: calcPayload() });\r\n                    history.push(\"/CharacterPowerSelection\", characterType);\r\n                }\r\n            }}\r\n            className={maxStatsReached() ? \"dialog-btn confirm-btn\" : \"dialog-btn confirm-btn disabled\"}\r\n        >Confirm</button>\r\n        <CustomBackButtonComponent dispatchFunction={() => dispatch({ type: characterType === CharactersEnum.Captain ? SET_CAPTAINS_BACKGROUND : SET_FIRSTMATE_BACKGROUND, payload: undefined })} />\r\n    </React.Fragment>;\r\n};\r\n","import { useHistory } from \"react-router-dom\";\r\n\r\nexport const BackButtonComponent = () => {\r\n\r\n    const history = useHistory();\r\n    return <button\r\n        onClick={(event) => {\r\n            history.goBack();\r\n            event.preventDefault();\r\n            event.stopPropagation();\r\n        }}\r\n        className={\"dialog-btn back-btn\"}\r\n    >Back</button>;\r\n};\r\n","import React, { useState } from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { BackButtonComponent } from \"../../components/common/BackButton\";\r\nimport { NameComponent } from \"../../components/NameComponent\";\r\nimport { SET_SHIPNAME } from \"../../redux/actions\";\r\nimport { CharactersEnum } from \"../../types\";\r\n\r\nexport const ShipNamePage = () => {\r\n    const [name, setName] = useState<string>(\"\");\r\n    const dispatch = useDispatch();\r\n    const history = useHistory();\r\n    return <React.Fragment>\r\n        <div className=\"chapter-header\">Welcome to Stargarve - Science Fiction wargames in the ravaged galaxy</div>\r\n        {/* <div className=\"modal-header\">This nifty little tool is supposed to guide you through the process of creating your crew for a game or even a campaign of Stargrave.</div> */}\r\n        <div className=\"modal-header\">\r\n            In the following screens you will design yourself a captain that is leading your crew, configure a loyal first mate to assist your fearless leader and hire disposable bodies (crewmen) to help you to complete your objectives.\r\n            </div>\r\n        <div className=\"modal-header\">But first things first. Your crew needs a ship to get to their missions. What is the name of your ship?</div>\r\n        <NameComponent inputCallback={setName} currentStateValue={name} tooltip={\"Your ship needs a name\"} />\r\n        <button\r\n            onClick={() => {\r\n                dispatch({ type: SET_SHIPNAME, payload: name });\r\n                history.push(\"/CharacterName\", CharactersEnum.Captain);\r\n            }}\r\n            className={name ? \"dialog-btn confirm-btn\" : \"dialog-btn confirm-btn disabled\"}\r\n        >Confirm</button>\r\n        <BackButtonComponent />\r\n    </React.Fragment>;\r\n};\r\n","import React from \"react\";\r\nimport { Character, Gear, ModifiedGear, Soldier } from \"../types\";\r\nimport { getGeneralGearDetails } from \"../Utils\";\r\n\r\nconst renderGear = (gear: Gear[] | ModifiedGear[], renderSoldier?: boolean, isPdf?: boolean) => <table className=\"character-tile-table\" style={{ width: \"100%\" }}>\r\n    <colgroup>\r\n        <col style={{ width: \"25%\" }} />\r\n        <col style={{ width: \"75%\" }} />\r\n    </colgroup>\r\n    <tbody>\r\n        <tr className={isPdf ? \"medium-pdf-text\" : \"small-text\"}>\r\n            <td style={{ fontSize: \"1rem\", paddingRight: \"1rem\", fontWeight: \"bold\" }}>Gear</td>\r\n            <td>\r\n                {`${renderSoldier ?\r\n                    gear.map((gearItem: ModifiedGear) => gearItem.name).join(\", \") :\r\n                    gear.map((gearItem: ModifiedGear) => `${gearItem.name} (${gearItem.gearSlots})`).join(\", \")}`}</td>\r\n        </tr>\r\n    </tbody>\r\n</table>;\r\n\r\nexport const CharacterTileGearAndPowers = ({ character, isPdf }: { character: Character; isPdf?: boolean }) =>\r\n    <React.Fragment>\r\n        <table className=\"character-tile-table\" style={{ width: \"100%\", textAlign: \"left\" }}>\r\n            <colgroup>\r\n                <col style={{ width: \"25%\" }} />\r\n                <col style={{ width: \"75%\" }} />\r\n            </colgroup>\r\n            <tbody>\r\n                <tr className={isPdf ? \"medium-pdf-text\" : \"small-text\"}>\r\n                    <td style={{ fontSize: \"1rem\", paddingRight: \"1rem\", fontWeight: \"bold\" }}>Powers</td>\r\n                    <td>{`${character.powers?.map((power) => `${power.name} (${power.activation})`).join(\", \")}`}</td>\r\n                </tr>\r\n            </tbody>\r\n        </table>\r\n        {character.gear ? renderGear(character.gear, false, isPdf) : null}\r\n    </React.Fragment>;\r\n\r\nexport const SoldierTileGearAndPowers = ({ soldier, isPdf }: { soldier: Soldier; isPdf?: boolean }) =>\r\n    <React.Fragment>\r\n        {soldier.gear ? renderGear(soldier.gear.map(getGeneralGearDetails), true, isPdf) : null}\r\n    </React.Fragment>;\r\n","import { Character, Soldier } from \"../types\";\r\nimport { isCaptain } from \"../Utils\";\r\n\r\nexport const CharacterTileHeader = ({ character }: { character: Character }) =>\r\n    <table className=\"character-tile-table\" style={{ width: \"100%\" }}>\r\n        <tbody>\r\n            <tr>\r\n                <td>\r\n                    {`${isCaptain(character.type) ? \"Cpt.\" : \"Ltn.\"} ${character.name} (${character.background})`}\r\n                </td>\r\n                <td style={{ textAlign: \"end\" }}>{`Level ${character.level}`}</td>\r\n            </tr>\r\n        </tbody>\r\n    </table>;\r\n\r\nexport const SoldierTileHeader = ({ soldier }: { soldier: Soldier }) =>\r\n    <table className=\"character-tile-table\" style={{ width: \"100%\" }}>\r\n        <tbody>\r\n            <tr>\r\n                <td>\r\n                    {soldier.amount > 0 ? `${soldier.amount}x ${soldier.type}` : soldier.type}\r\n                </td>\r\n                <td style={{ textAlign: \"end\" }}>{`(${soldier.amount > 0 ? soldier.cost * soldier.amount : soldier.cost} \\xA5)`}</td>\r\n            </tr>\r\n        </tbody>\r\n    </table>;\r\n","import { Soldier } from \"../types\";\r\nimport { SoldierStatusBarTable } from \"./CharacterStatusBarTable\";\r\nimport { SoldierTileGearAndPowers } from \"./CharacterTileGearAndPowers\";\r\nimport { SoldierTileHeader } from \"./CharacterTileHeader\";\r\n\r\nexport const SoldierComponent = ({ soldier, isPdf }: { soldier: Soldier; isPdf?: boolean }) =>\r\n    <div key={`${soldier.type}_tile`} className={isPdf ? \"pdf-soldier-tile\" : \"character-tile\"}>\r\n        <SoldierTileHeader soldier={soldier} />\r\n        <SoldierStatusBarTable soldier={soldier} gearSlotsUsed={0} isTileTable={true} />\r\n        <SoldierTileGearAndPowers soldier={soldier} isPdf={isPdf} />\r\n    </div>;\r\n","import { CSSProperties } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { CrewIcon } from \"../../images\";\r\nimport { numberOfCrewMembers } from \"../../Utils\";\r\n\r\nexport const CrewSizeComponent = ({ externalStyles, virtualCrewSize }: { externalStyles?: CSSProperties; virtualCrewSize?: number }) => {\r\n    const history = useHistory();\r\n    return <div\r\n        style={externalStyles}\r\n        onClick={() => history.push(\"/SoldierSelection\")}\r\n        className=\"statusbar-tiles\"\r\n        title={\"Current size of your crew\"}>\r\n        <img\r\n            src={CrewIcon}\r\n            className={\"toolbar-compact-icon\"}\r\n            id={\"CrewIcon\"}\r\n            alt={\"CrewIcon\"}>\r\n        </img>\r\n        <div className={\"toolbar-compact-text\"}>{virtualCrewSize || numberOfCrewMembers()} / 7</div>\r\n    </div>;\r\n};\r\n","import { CSSProperties, useContext } from \"react\";\r\nimport { ReactReduxContext } from \"react-redux\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { TreasuryIcon } from \"../../images\";\r\nimport { CrewState } from \"../../types\";\r\n\r\nexport const TreasuryComponent = ({ externalStyles, virtualCredits }: { externalStyles?: CSSProperties; virtualCredits?: number }) => {\r\n    const { store } = useContext(ReactReduxContext);\r\n    const state = store.getState() as CrewState;\r\n    const history = useHistory();\r\n    return <div\r\n        style={externalStyles}\r\n        onClick={() => history.push(\"/TransactionHistory\")}\r\n        className=\"statusbar-tiles\"\r\n        title={\"Current amount of credits in your treasury\"}>\r\n        <img\r\n            src={TreasuryIcon}\r\n            className={\"toolbar-compact-icon\"}\r\n            id={\"TreasuryIcon\"}\r\n            alt={\"TreasuryIcon\"}>\r\n        </img>\r\n        <div className={\"toolbar-compact-text\"}>\r\n            {`${virtualCredits || state.Credits} \\xA5`}\r\n        </div>\r\n    </div>;\r\n};\r\n","import React, { useContext, useEffect, useState } from \"react\";\r\nimport { ReactReduxContext, useDispatch } from \"react-redux\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport * as SoldierList from \"../data/Soldiers.json\";\r\nimport { AddIcon, getSoldierImage, MinusIcon } from \"../images\";\r\nimport { ADD_SOLDIERS } from \"../redux/actions\";\r\nimport { CrewState, Soldier, SoldierGroups, SoldierMetadata } from \"../types\";\r\nimport { Carousel } from \"./common/Carousel\";\r\nimport { SoldierComponent } from \"./SoldierComponent\";\r\nimport { CrewSizeComponent } from \"./statusbar/CrewSizeComponent\";\r\nimport { TreasuryComponent } from \"./statusbar/TreasuryComponent\";\r\n\r\nconst listOfSoldiers = SoldierList.Soldiers as SoldierMetadata[];\r\n\r\nexport const SoldierSelectionComponent = () => {\r\n    const { store } = useContext(ReactReduxContext);\r\n    const state = store.getState() as CrewState;\r\n    const [soldiers, setSoldiers] = useState<Soldier[]>([]);\r\n    const [previewSoldier, setPreviewSoldier] = useState<SoldierMetadata>();\r\n    const [lastPreviewSoldier, setLastPreviewSoldier] = useState<SoldierMetadata | undefined>(undefined);\r\n    useEffect(() => {\r\n        if (previewSoldier) {\r\n            setLastPreviewSoldier(previewSoldier);\r\n        }\r\n    }, [previewSoldier]);\r\n    const dispatch = useDispatch();\r\n    const history = useHistory();\r\n    const getCurrentSoldierAmount = (soldierType: string) => soldiers.filter((soldier) => soldier.type === soldierType)?.length || 0;\r\n    const soldierCount = () => soldiers.reduce((acc, soldier) => soldier.amount + acc, 0);\r\n    const specialistCount = () => soldiers.filter((soldier) => soldier.group === SoldierGroups.Specialist).reduce((acc, specialist) => specialist.amount + acc, 0);\r\n    const hiringCost = () => soldiers.reduce((acc, soldier) => acc + (soldier.amount * soldier.cost), 0);\r\n    const canSubmit = () => soldierCount() <= 8 && specialistCount() <= 4 && hiringCost() <= state.Credits;\r\n\r\n    const renderSoldierTile = (soldier: SoldierMetadata) => <div\r\n        key={`add-character-${soldier.type}`}\r\n        className={getCurrentSoldierAmount(soldier.type) > 0 ? \"add-character-background selected\" : \"add-character-background\"}\r\n        onClick={() => setPreviewSoldier(soldier)}>\r\n        <img style={{ paddingTop: \"0.35rem\" }} className=\"add-character-background-icons\" src={getSoldierImage(soldier.type)} alt={`add-character-${soldier.type}-icon`} />\r\n        <div className=\"soldier-cost\">{`${soldier.cost} \\xA5`}</div>\r\n        <div style={{ paddingTop: \"0.35rem\" }} className=\"large-text\">{`${soldier.type}`}</div>\r\n        {soldier.group === SoldierGroups.Specialist ? <div className=\"medium-text\">Specialist</div> : null}\r\n        {getCurrentSoldierAmount(soldier.type) > 0 ? <div className=\"soldier-type\">{getCurrentSoldierAmount(soldier.type)}x</div> : null}\r\n    </div>;\r\n\r\n    return <React.Fragment>\r\n        <div key=\"statusbar\" id=\"statusbar\" className=\"statusbar\">\r\n            <div className=\"statusbar-tiles\" style={{ height: \"3rem\" }}>\r\n                <div className=\"toolbar-two-column-header-text\">Hire your crew</div>\r\n                <div className=\"small-text\">{\"You need to hire 8 Soldiers. \\n Only 4 may be Specialists\"}</div>\r\n            </div>\r\n            <CrewSizeComponent externalStyles={{ width: \"calc(35% - 1.1rem)\" }} virtualCrewSize={soldierCount() + state.Soldiers.reduce((sum, sol) => sum + sol.amount, 2)} />\r\n            <TreasuryComponent virtualCredits={state.Credits - hiringCost()} />\r\n        </div>\r\n        {previewSoldier ?\r\n            <React.Fragment>\r\n                <div className=\"modal-header\">Soldier details</div>\r\n                <SoldierComponent soldier={{ ...previewSoldier, amount: 0, gearSlots: 1, id: 1 }} />\r\n                <div className=\"modal-header\">Use the Plus/Minus buttons below to hire some of these soldiers if they suit your needs</div>\r\n                <div className=\"soldier-selection-amount\">\r\n                    <div\r\n                        className=\"btn\"\r\n                        onClick={() => {\r\n                            const soldiersOfType = soldiers.filter((sol) => sol.type === previewSoldier.type);\r\n                            if (soldiersOfType.length === 1) {\r\n                                setSoldiers(soldiers.filter((sol) => sol.type !== previewSoldier.type));\r\n                            } else {\r\n                                setSoldiers(soldiers.filter((sol) => sol.type !== previewSoldier.type || sol.id !== soldiersOfType.length));\r\n                            }\r\n                        }}><img alt=\"minusicon\" style={{ width: \"3rem\" }} src={MinusIcon} /></div>\r\n                    <div className=\"very-large-text\">{getCurrentSoldierAmount(previewSoldier.type)}</div>\r\n                    <div\r\n                        className=\"btn\"\r\n                        onClick={() => {\r\n                            const soldierIdx = soldiers.findIndex((sol) => sol.type === previewSoldier.type);\r\n                            if (soldierIdx !== -1) {\r\n                                setSoldiers([...soldiers, { ...previewSoldier, amount: 1, gearSlots: 1, id: soldiers.filter((sol) => sol.type === previewSoldier.type).length + 1 }]);\r\n                                // setSoldiers([...soldiers.slice(0, soldierIdx), { ...soldiers[soldierIdx], amount: soldiers[soldierIdx].amount + 1 }, ...soldiers.slice(soldierIdx + 1)]);\r\n                            } else {\r\n                                setSoldiers([...soldiers, { ...previewSoldier, amount: 1, gearSlots: 1, id: 1 }]);\r\n                            }\r\n                        }}><img alt=\"plusicon\" style={{ width: \"3rem\" }} src={AddIcon} /></div>\r\n                </div>\r\n            </React.Fragment> :\r\n            <Carousel splitSize={10} resetPage={lastPreviewSoldier ? Math.ceil(listOfSoldiers.findIndex((soldier) => soldier.type === lastPreviewSoldier?.type) / 10) : 1} inputDivs={listOfSoldiers.map(renderSoldierTile)} />}\r\n        {specialistCount() > 4 ?\r\n            <div>You are not allowed to have more than 4 'Specialist' Soldiers in your crew</div> :\r\n            null}\r\n        {soldierCount() > 8 ? <div>You are not allowed to have more than 8 Soldiers in total in your crew</div> : null}\r\n        {hiringCost() > state.Credits ? <div>{\"You don't have enough credits ( \\xA5 ) to hire all of these crew men\"} </div> : null}\r\n        {previewSoldier ? <button\r\n            onClick={(event) => {\r\n                setPreviewSoldier(undefined);\r\n                event.preventDefault();\r\n                event.stopPropagation();\r\n            }}\r\n            className={\"dialog-btn back-btn foreground\"}\r\n        >Back</button> :\r\n            <button\r\n                onClick={(e) => {\r\n                    if (canSubmit()) {\r\n                        dispatch({ type: ADD_SOLDIERS, payload: soldiers });\r\n                        history.push(\"/CrewOverview\");\r\n                    }\r\n                    e.preventDefault();\r\n                    e.stopPropagation();\r\n                }}\r\n                className={canSubmit() ? \"dialog-btn confirm-btn\" : \"dialog-btn confirm-btn disabled\"}>\r\n                Confirm Staffing</button>}\r\n    </React.Fragment>;\r\n};\r\n","import { SoldierSelectionComponent } from \"../../components/SoldierSelection\";\r\n\r\nexport const SoldierSelectionPage = () =>\r\n    <SoldierSelectionComponent />;\r\n","import React from \"react\";\r\nimport { Character } from \"../types\";\r\n\r\nexport const CharacterInjuries = ({ character }: { character: Character }) =>\r\n    <React.Fragment>\r\n        {character.missNextGame ?\r\n            <table className=\"character-tile-table\" style={{ width: \"100%\", textAlign: \"left\" }}>\r\n                <colgroup>\r\n                    <col style={{ width: \"25%\" }} />\r\n                    <col style={{ width: \"75%\" }} />\r\n                </colgroup>\r\n                <tbody>\r\n                    <tr className={\"small-text\"}>\r\n                        <td style={{ fontSize: \"1rem\", paddingRight: \"1rem\", fontWeight: \"bold\" }}>Injuries</td>\r\n                        <td>Barely Alive - Misses the upcoming mission</td>\r\n                    </tr>\r\n                </tbody>\r\n            </table> :\r\n            undefined\r\n        }\r\n    </React.Fragment>;\r\n","import { useContext } from \"react\";\r\nimport { ReactReduxContext } from \"react-redux\";\r\nimport { CrewState } from \"../types\";\r\nimport { CharacterInjuries } from \"./CharacterInjuries\";\r\nimport { CharacterStatusBarTable } from \"./CharacterStatusBarTable\";\r\nimport { CharacterTileGearAndPowers } from \"./CharacterTileGearAndPowers\";\r\nimport { CharacterTileHeader } from \"./CharacterTileHeader\";\r\n\r\nexport const CharacterComponent = ({ isCaptain, isPdf }: { isCaptain: boolean; isPdf?: boolean }) => {\r\n    const { store } = useContext(ReactReduxContext);\r\n    const state = store.getState() as CrewState;\r\n    const character = (isCaptain ? state.Captain : state.FirstMate);\r\n    const id = isCaptain ? \"captain\" : \"firstmate\";\r\n    return <div key={`${id}_tile`} className={isPdf ? \"pdf-tile\" : \"character-tile\"}>\r\n        <CharacterTileHeader character={character} />\r\n        <CharacterStatusBarTable character={character} gearSlotsUsed={character.gear?.reduce((acc, gearItem) => acc + gearItem.gearSlots, 0) || 0} isTileTable={true} />\r\n        <CharacterTileGearAndPowers character={character} isPdf={isPdf} />\r\n        <CharacterInjuries character={character} />\r\n    </div>;\r\n};\r\n","import { useContext } from \"react\";\r\nimport { ReactReduxContext } from \"react-redux\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { PostGameIcon } from \"../../images\";\r\nimport { CrewState } from \"../../types\";\r\n\r\nexport const AdvanceComponent = () => {\r\n    const { store } = useContext(ReactReduxContext);\r\n    const state = store.getState() as CrewState;\r\n    const history = useHistory();\r\n    return <div className=\"statusbar-tiles\" onClick={() => history.push(\"/PostGameSequence\")} title=\"Click to open the post game sequence\">\r\n        <img\r\n            src={PostGameIcon}\r\n            style={{ paddingLeft: \"0.2rem\" }}\r\n            className=\"toolbar-compact-icon\"\r\n            id={\"PostGameIcon\"}\r\n            alt={\"Post Game Sequence\"}>\r\n        </img>\r\n        <div className={\"toolbar-compact-text\"}>\r\n            {`${state.Experience}`}\r\n        </div>\r\n    </div>;\r\n};\r\n","import { useHistory } from \"react-router-dom\";\r\nimport { SaveIcon } from \"../../images\";\r\n\r\nexport const FileComponent = () => {\r\n    const history = useHistory();\r\n    return <div className=\"statusbar-tiles\" onClick={() => history.push(\"/FileOperations\")} title=\"Click to open dialog to save/load a crew\">\r\n        <img\r\n            src={SaveIcon}\r\n            style={{ paddingLeft: \"0.2rem\", placeSelf: \"center\" }}\r\n            className=\"toolbar-icon\"\r\n            id={\"SaveIcon\"}\r\n            alt={\"SaveIcon\"}>\r\n        </img>\r\n    </div>;\r\n};\r\n","import { useContext } from \"react\";\r\nimport { ReactReduxContext, useDispatch } from \"react-redux\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { LeaveIcon, StarshipIcon } from \"../../images\";\r\nimport { SET_CREW, SET_SHIPNAME } from \"../../redux/actions\";\r\nimport { CrewState, InitialCrewState } from \"../../types\";\r\nimport { InputComponent } from \"../InputComponent\";\r\n\r\nexport const ShipnameComponent = () => {\r\n    const { store } = useContext(ReactReduxContext);\r\n    const dispatch = useDispatch();\r\n    const history = useHistory();\r\n    const state = store.getState() as CrewState;\r\n\r\n    return <div className=\"shipname\">\r\n        <img alt=\"shipname icon\" style={{ paddingLeft: \"0.6rem\" }} className=\"shipname-icon\" src={StarshipIcon} onClick={() => history.push(\"/ShipsCargo\")}></img>\r\n        <InputComponent\r\n            callback={(name: string) => dispatch({ type: SET_SHIPNAME, payload: name })}\r\n            currentState={state.ShipName}\r\n            tooltip={state.ShipName} cssClass=\"input-field\" />\r\n        <img\r\n            alt=\"leave icon\"\r\n            className=\"shipname-icon\"\r\n            src={LeaveIcon}\r\n            onClick={() => {\r\n                dispatch({ type: SET_CREW, payload: InitialCrewState });\r\n                history.push(\"/\");\r\n            }}></img>\r\n    </div>;\r\n};\r\n","export default \"data:image/png;base64,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\"","import { AdvanceComponent } from \"./AdvanceComponent\";\r\nimport { CrewSizeComponent } from \"./CrewSizeComponent\";\r\nimport { FileComponent } from \"./FileComponent\";\r\nimport { ShipnameComponent } from \"./Shipname\";\r\nimport { TreasuryComponent } from \"./TreasuryComponent\";\r\n\r\nexport const StatusbarComponent = () =>\r\n    <div key=\"statusbar\" id=\"statusbar\" className=\"statusbar\">\r\n        <ShipnameComponent />\r\n        <div style={{ float: \"left\", flex: \"1 1 auto\", display: \"flex\" }}><FileComponent />\r\n\r\n            <TreasuryComponent />\r\n            <CrewSizeComponent />\r\n            <AdvanceComponent />\r\n        </div>\r\n    </div>;\r\n","import React, { useContext } from \"react\";\r\nimport { ReactReduxContext } from \"react-redux\";\r\nimport { CharacterComponent } from \"../../components/CharacterComponent\";\r\nimport { Carousel } from \"../../components/common/Carousel\";\r\nimport { SoldierComponent } from \"../../components/SoldierComponent\";\r\nimport { StatusbarComponent } from \"../../components/statusbar/StatusBarComponent\";\r\nimport { CrewState, Soldier } from \"../../types\";\r\n\r\nexport const CrewPage = () => {\r\n    const { store } = useContext(ReactReduxContext);\r\n    const state = store.getState() as CrewState;\r\n    const myStorage = localStorage;\r\n    const areEqual = (list: Soldier[]) => {\r\n        const { id: renamed, ...restFirstItem } = list[0];\r\n        return list.every((val) => {\r\n            const { id, ...restVal } = val;\r\n            return JSON.stringify(restVal) === JSON.stringify(restFirstItem);\r\n        });\r\n    };\r\n\r\n    myStorage.setItem(`${state.ShipName}_${state.Captain.name}_${state.Captain.level}_${state.FirstMate.level}_${state.Credits}`, JSON.stringify(state));\r\n    return <React.Fragment>\r\n        {state.Captain && state.FirstMate && state.Soldiers ?\r\n            <React.Fragment>\r\n                <StatusbarComponent key=\"statusbarComponent\" />\r\n                <div key=\"crewRoster\" id=\"crewRoster\" style={{ paddingTop: \"0.5rem\" }}>\r\n                    <Carousel\r\n                        splitSize={4}\r\n                        inputDivs={[\r\n                            <CharacterComponent key=\"captainComponent\" isCaptain={true} />,\r\n                            <CharacterComponent key=\"firstMateComponent\" isCaptain={false} />,\r\n                            ...state.Soldiers.reduce((acc, sol) => {\r\n                                const x = state.Soldiers.filter((sold) => sold.type === sol.type);\r\n                                if (areEqual(x) && acc.filter((sold) => sold.type === sol.type).length === 0) {\r\n                                    return [...acc, { ...sol, amount: x.reduce((sum, y) => sum + y.amount, 0) }];\r\n                                }\r\n                                if (!areEqual(x)) {\r\n                                    return [...acc, sol];\r\n                                }\r\n                                return acc;\r\n                                // return areEqual(x) && acc.filter((sold) => sold.type === sol.type).length > 0 ? acc : [...acc, { ...sol, amount: x.length }];\r\n                            }, [] as Soldier[]\r\n                            ).map((soldier) => <SoldierComponent key={`crew_member_${soldier.type}`} soldier={soldier} />),\r\n                        ]}\r\n                    />\r\n                </div>\r\n            </React.Fragment> : null\r\n        }\r\n    </React.Fragment>;\r\n};\r\n","import React, { useContext, useState } from \"react\";\r\nimport { ReactReduxContext } from \"react-redux\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { BackButtonComponent } from \"../../components/common/BackButton\";\r\nimport { ImportCrewIcon, PdfIcon, SaveIcon } from \"../../images\";\r\nimport { CrewState } from \"../../types\";\r\n\r\nexport const FileOperationsPage = () => {\r\n    const { store } = useContext(ReactReduxContext);\r\n    const state = store.getState() as CrewState;\r\n    const [fileName, setFileName] = useState<string>(`${state.ShipName} ${state.Captain.name}  (lvl ${state.Captain.level || 15})`);\r\n\r\n    const history = useHistory();\r\n\r\n    const saveToFileNew = (e: React.MouseEvent<HTMLElement, MouseEvent>) => {\r\n        const anchor = document.createElement(\"a\");\r\n        document.body.appendChild(anchor);\r\n        const json = JSON.stringify(state);\r\n        const blob = new Blob([json], { type: \"octet/stream\" });\r\n        const url = window.URL.createObjectURL(blob);\r\n        anchor.href = url;\r\n        anchor.download = `${fileName}.sg`;\r\n        anchor.id = \"ClickableDownloadAnchor\";\r\n        anchor.click();\r\n        window.URL.revokeObjectURL(url);\r\n        document.body.removeChild(document.getElementById(\"ClickableDownloadAnchor\") as Node);\r\n\r\n        if (state.ShipName && state.Captain.name && state.Captain.level) {\r\n            const myStorage = localStorage;\r\n            myStorage.setItem(`${state.ShipName}_${state.Captain.name}_${state.Captain.level}_${state.FirstMate.level}_${state.Credits}`, json);\r\n        }\r\n        history.push(\"/CrewOverview\");\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n    };\r\n    return <React.Fragment>\r\n        <div className=\"vertical-splitter\">\r\n            <div className=\"chapter-header\">Tap to load another warband from file or local storage</div>\r\n            <div style={{ display: \"grid\" }}>\r\n                <img\r\n                    alt=\"file upload\"\r\n                    className=\"file-ops-icon\"\r\n                    src={ImportCrewIcon}\r\n                    onClick={(event) => {\r\n                        history.push(\"/FileSystem\");\r\n                        event.preventDefault();\r\n                        event.stopPropagation();\r\n                    }}\r\n                />\r\n            </div>\r\n        </div>\r\n\r\n        <div className=\"vertical-splitter\">\r\n            <div style={{ borderTop: \"0.15rem solid\" }} className=\"chapter-header\">Tap to save your warband to file</div>\r\n            <div style={{ display: \"grid\" }}>\r\n                <img alt=\"save to file\" className=\"file-ops-icon\" src={SaveIcon} onClick={saveToFileNew} />\r\n            </div>\r\n        </div>\r\n        <div className=\"vertical-splitter\">\r\n            {/* <div className=\"pdf-container\"><PdfRenderer crewMembers={[state.Captain, state.FirstMate, ...state.Soldiers]} /></div> */}\r\n            <div style={{ borderTop: \"0.15rem solid\" }} className=\"chapter-header\">Export your warband to pdf</div>\r\n            <div style={{ display: \"grid\", paddingTop: \"2rem\", paddingBottom: \"2rem\" }}>\r\n                <img alt=\"file upload\" className=\"file-ops-icon\" src={PdfIcon} onClick={(event) => {\r\n                    history.push(\"/PdfExport\");\r\n                    event.preventDefault();\r\n                    event.stopPropagation();\r\n                }} />\r\n            </div>\r\n        </div>\r\n        <BackButtonComponent />\r\n    </React.Fragment>;\r\n};\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { SET_CREW } from \"../../redux/actions\";\r\nimport { CrewState, InitialCrewState } from \"../../types\";\r\n\r\nexport const FileSystemPage = () => {\r\n    const [selectedStorage, setSelectedStorage] = useState<CrewState>();\r\n    useEffect(() => undefined, [selectedStorage]);\r\n    const isStorageSelected = (state: CrewState) =>\r\n        state.Credits === selectedStorage?.Credits &&\r\n        state.ShipName === selectedStorage.ShipName &&\r\n        state.Captain.name === selectedStorage.Captain.name &&\r\n        state.Captain.level === selectedStorage.Captain.level &&\r\n        state.FirstMate.level === selectedStorage.FirstMate.level;\r\n\r\n    const history = useHistory();\r\n    const dispatch = useDispatch();\r\n    const getStorageTable = () => {\r\n        const myStorage: string[] = Object.values(localStorage);\r\n        return <table className=\"storage-table\">\r\n            <caption>Local storage</caption>\r\n            <thead>\r\n                <tr><td>Ship name</td><td>Captains name</td><td>Captains level</td><td>Credits</td></tr>\r\n            </thead>\r\n            <tbody>\r\n                {myStorage.length > 0 ?\r\n                    myStorage.map((stateString) => {\r\n                        const state: CrewState = JSON.parse(stateString);\r\n                        return <tr className={isStorageSelected(state) ? \"selected\" : \"\"} onClick={() => setSelectedStorage(state)}>\r\n                            <td>{state.ShipName}</td>\r\n                            <td>{state.Captain.name}</td>\r\n                            <td>{state.Captain.level} / {state.FirstMate.level}</td>\r\n                            <td>{state.Credits}</td>\r\n                        </tr>;\r\n                    }) :\r\n                    <tr><td colSpan={4}>Nothing has been stored yet or you have cleared your cache recently</td></tr>\r\n                }\r\n            </tbody>\r\n        </table>;\r\n    };\r\n    return <React.Fragment>\r\n        <label htmlFor=\"file-uploader\" style={{ float: \"left\", width: \"100%\", marginBottom: \"1rem\", display: \"grid\" }}>\r\n            <input\r\n                id=\"file-uploader\"\r\n                type=\"file\"\r\n                accept=\".sg\"\r\n                style={{ display: \"none\" }}\r\n                onChange={() => {\r\n                    const reader = new FileReader();\r\n                    reader.onload = (ev: ProgressEvent<FileReader>) => {\r\n                        dispatch({ type: SET_CREW, payload: JSON.parse(ev.target?.result as string) });\r\n                        history.push(\"/CrewOverview\");\r\n                    };\r\n                    reader.readAsText((document.querySelector(\"#file-uploader\") as HTMLInputElement)?.files?.item(0) as File);\r\n                }}\r\n            />\r\n            <button className=\"dialog-btn\" onClick={() => document.getElementById(\"file-uploader\")?.click()}>Load crew from file</button>\r\n        </label>\r\n        <div>Click on any entry in the local storage list and confirm your choice with the button below. </div>\r\n        {getStorageTable()}\r\n        <button\r\n            onClick={(event) => {\r\n                dispatch({ type: SET_CREW, payload: selectedStorage });\r\n                history.push(\"/CrewOverview\");\r\n                event.preventDefault();\r\n                event.stopPropagation();\r\n            }}\r\n            className={selectedStorage !== undefined ? \"dialog-btn\" : \"dialog-btn disabled\"}\r\n            style={{ float: \"left\", width: \"45%\" }}\r\n        >Load crew</button>\r\n        <button\r\n            onClick={(event) => {\r\n                event.preventDefault();\r\n                event.stopPropagation();\r\n                if (selectedStorage) {\r\n                    const key = `${selectedStorage.ShipName}_${selectedStorage.Captain.name}_${selectedStorage.Captain.level}_${selectedStorage.FirstMate.level}_${selectedStorage.Credits}`;\r\n                    localStorage.removeItem(key);\r\n                    setSelectedStorage(undefined);\r\n                }\r\n            }}\r\n            className={selectedStorage !== undefined ? \"dialog-btn dialog-btn-danger\" : \"dialog-btn disabled\"}\r\n            style={{ float: \"right\", width: \"45%\" }}\r\n        >Remove crew</button>\r\n        <button\r\n            onClick={(event) => {\r\n                dispatch({ type: SET_CREW, payload: InitialCrewState });\r\n                history.goBack();\r\n                event.preventDefault();\r\n                event.stopPropagation();\r\n            }}\r\n            className={\"dialog-btn back-btn\"}\r\n            style={{ float: \"left\", width: \"25%\" }}\r\n        >Back</button>\r\n    </React.Fragment>;\r\n};\r\n","import { useDispatch } from \"react-redux\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport * as Crew from \"../../data/Samples/Serenity.json\";\r\nimport { CreateCrewIcon, ImportCrewIcon, UseSampleIcon } from \"../../images\";\r\nimport { SET_CREW } from \"../../redux/actions\";\r\nimport { CrewState, InitialCrewState } from \"../../types\";\r\n\r\nexport const LandingPage = () => {\r\n\r\n    const history = useHistory();\r\n    const dispatch = useDispatch();\r\n\r\n    return <div className=\"landing-page \">\r\n        <div className=\"chapter-header\">Stargrave Crew Configuration</div>\r\n        <div\r\n            className=\"landing-page-tile\"\r\n            onClick={() => {\r\n                dispatch({ type: SET_CREW, payload: InitialCrewState });\r\n                history.push(\"/ShipName\");\r\n            }}>\r\n\r\n            <img alt=\"CreateWarband\" className=\"landing-page-icon\" src={CreateCrewIcon} />\r\n            <div className=\"landing-page-header\">Create new crew</div>\r\n        </div>\r\n        <div\r\n            className=\"landing-page-tile\"\r\n            onClick={() => {\r\n                history.push(\"/FileSystem\");\r\n            }}>\r\n\r\n            <img alt=\"SampleWarband\" className=\"landing-page-icon\" src={ImportCrewIcon} />\r\n            <div className=\"landing-page-header\">Load existing crew from file or local storage</div>\r\n        </div>\r\n        <div\r\n            className=\"landing-page-tile\"\r\n            onClick={() => {\r\n                dispatch({ type: SET_CREW, payload: (Crew as any).default as CrewState });\r\n                history.push(\"/CrewOverview\");\r\n            }}>\r\n\r\n            <img alt=\"SampleWarband\" className=\"landing-page-icon\" src={UseSampleIcon} />\r\n            <div className=\"landing-page-header\">Load the sample crew of the Serenity</div>\r\n        </div>\r\n    </div >;\r\n};\r\n","import React, { useContext } from \"react\";\r\nimport { ReactReduxContext } from \"react-redux\";\r\nimport { CrewState, ModifiedPower } from \"../../types\";\r\nimport { getPower } from \"../../Utils\";\r\n\r\nexport const PrintablePowerCards = ({ printAll }: { printAll: boolean }) => {\r\n    const { store } = useContext(ReactReduxContext);\r\n    const state = store.getState() as CrewState;\r\n    let printablePowers: ModifiedPower[] = [];\r\n    const powers = [...state.Captain.powers, ...state.FirstMate.powers];\r\n    if (!printAll) {\r\n        for (const power of powers) {\r\n            if (getPower(power.name).activation !== power.activation) {\r\n                printablePowers.push(power);\r\n            }\r\n        }\r\n    } else {\r\n        printablePowers = [...powers];\r\n    }\r\n\r\n    return <React.Fragment>\r\n        <div id=\"printable-power-cards\" className=\"pdf-container-clone\">\r\n            {printablePowers.map((power) => ({ ...getPower(power.name), activation: power.activation })).map((power) =>\r\n                <div id={`power-card-${power.name}`} key={`power-card-${power.name}`} className=\"power-card\">\r\n                    <div className=\"power-card-header\">{power.name} ({power.activation})</div>\r\n                    <div className=\"power-card-second-header\">{power.category} / {power.strain}</div>\r\n                    <div style={{ fontSize: `${power.effect.length > 700 ? 0.65 : power.effect.length > 600 ? 0.7 : 0.78}rem` }} className=\"power-card-text\">{power.effect}</div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    </React.Fragment>;\r\n};\r\n","import React, { useContext } from \"react\";\r\nimport { ReactReduxContext } from \"react-redux\";\r\nimport { Character, CrewState, Soldier, StatsEnum } from \"../../types\";\r\nimport { getBaseCaptain, getBaseFirstMate, getCurrentStatStrings, getPower, getStatsWithGear, isCaptain, isCharacter } from \"../../Utils\";\r\n\r\nconst renderHeader = (character: Character) => <React.Fragment>\r\n    <div style={{ border: \"2px solid black\", padding: \"0.5rem\", margin: \"0rem 0.1rem\", fontSize: \"1.5rem\", fontWeight: \"bold\" }}>\r\n        {`${isCaptain(character.type) ? \"Cpt.\" : \"Ltn.\"} ${character.name} (${character.background})`}\r\n        <div style={{ float: \"right\" }}>\r\n            <div style={{ float: \"left\" }}>Level</div>\r\n            <div style={{ float: \"right\", border: \"2px solid\", padding: \"0rem 0.5rem\", marginLeft: \"0.5rem\", fontWeight: \"bold\" }}>{character.level}</div>\r\n        </div>\r\n        {character.missNextGame ? <div style={{ fontSize: \"0.9rem\" }}>Barely Alive - Misses next mission</div> : undefined}\r\n    </div>\r\n</React.Fragment>;\r\n\r\nconst renderCrewmanHeader = (crewman: Soldier) => <React.Fragment>\r\n    <div style={{ border: \"2px solid black\", padding: \"0.2rem\", margin: \"0rem 0.1rem\", fontSize: \"1.2rem\", fontWeight: \"bold\" }}>\r\n        {`${crewman.type} (#${crewman.id})`}\r\n    </div>\r\n</React.Fragment>;\r\n\r\nconst renderPowers = (character: Character) => <div style={{ display: \"grid\", gridTemplateColumns: \"80% 20%\", clear: \"both\" }}>\r\n    <table style={{ fontSize: \"1.1rem\" }}>\r\n        <colgroup>\r\n            <col style={{ width: \"50%\" }} />\r\n            <col style={{ width: \"25%\" }} />\r\n            <col style={{ width: \"25%\" }} />\r\n        </colgroup>\r\n        <tbody>\r\n            <tr>\r\n                <td style={{ border: \"2px solid black\", padding: \"0.5rem\", margin: \"0rem 0.1rem\", fontWeight: \"bold\" }}>Power</td>\r\n                <td style={{ border: \"2px solid black\", padding: \"0.5rem\", margin: \"0rem 0.1rem\", fontWeight: \"bold\" }}>Activation</td>\r\n                <td style={{ border: \"2px solid black\", padding: \"0.5rem\", margin: \"0rem 0.1rem\", fontWeight: \"bold\" }}>Strain</td>\r\n            </tr>\r\n            {character.powers.map((power) => <tr >\r\n                <td style={{ border: \"2px solid black\", padding: \"0rem 0.5rem\", margin: \"0rem 0.1rem\" }}\r\n                    key={`add_dialog_${character.name}_${character.type}_power_${power.name}`\r\n                    }>{power.name}</td>\r\n                <td style={{ border: \"2px solid black\", padding: \"0rem 0.5rem\", margin: \"0rem 0.1rem\" }}\r\n                    key={`add_dialog_${character.name}_${character.type}_power_${power.activation}`\r\n                    }>{power.activation}</td>\r\n                <td style={{ border: \"2px solid black\", padding: \"0rem 0.5rem\", margin: \"0rem 0.1rem\" }}\r\n                    key={`add_dialog_${character.name}_${character.type}_power_${getPower(power.name).strain}`\r\n                    }>{getPower(power.name).strain}</td>\r\n            </tr>)}\r\n        </tbody>\r\n    </table>\r\n    <div style={{ grid: \"1/2\", border: \"2px solid black\", padding: \"0.5rem\", margin: \"0.15rem 0.1rem\", fontSize: \"1.5rem\", fontWeight: \"bold\", textAlign: \"center\" }}>\r\n        <div style={{ fontSize: \"1rem\" }}>Current Health</div>\r\n        <div style={{ paddingTop: \"0.5rem\" }}>{character.currentHealth || character.stats.Health}</div>\r\n    </div>\r\n</div>;\r\n\r\nconst renderGear = (member: Character | Soldier) => <React.Fragment>\r\n    <div style={{ border: \"2px solid black\", padding: \"0.5rem\", margin: isCharacter(member) ? \"0rem 0.1rem 0.5rem\" : \"0rem 0.1rem 0.15rem\", fontSize: \"0.9rem\" }}>\r\n        <div style={{ fontSize: \"1.1rem\", fontWeight: \"bold\" }}>Gear</div>\r\n        {isCharacter(member) ? member.gear?.map((gear) => `${gear.name}`).join(\", \") : member.gear.join(\", \")}\r\n    </div>\r\n</React.Fragment>;\r\n\r\nconst renderCharacterStats = (member: Character) => {\r\n    const stats = getStatsWithGear(member.stats, {}, member.gear);\r\n    const currentStats = Object.entries(getCurrentStatStrings(stats, member.currentHealth));\r\n    const cells: JSX.Element[] = [];\r\n    for (const [key, value] of currentStats) {\r\n        if (key !== StatsEnum.Health) {\r\n            cells.push(<div style={{ fontSize: \"1rem\", fontWeight: \"bold\", float: \"left\", textAlign: \"center\", padding: \"0.5rem 0rem\", minWidth: \"20%\" }}>\r\n                <div\r\n                    style={{ border: \"2px solid black\", padding: \"0.5rem\", margin: \"0rem 0.1rem\", fontSize: \"1.5rem\" }}\r\n                    className={\r\n                        isCharacter(member) && stats[key as StatsEnum] !== (isCaptain(member.type) ?\r\n                            getBaseCaptain() : getBaseFirstMate()).stats[key as StatsEnum] ? \"improved-stat\" : \"\"\r\n                    }\r\n                    key={`add_dialog_${member.name}_stat_${key}`\r\n                    }>\r\n                    {value}\r\n                </div>\r\n                <div key={`add_dialog__stat_header_${key}`}>{key}</div>\r\n            </div>);\r\n        }\r\n    }\r\n    return <React.Fragment>{cells}</React.Fragment>;\r\n};\r\n\r\nconst renderCrewStats = (member: Soldier) => {\r\n    const currentStats = Object.entries(getCurrentStatStrings(member.stats, member.currentHealth));\r\n    const cells: JSX.Element[] = [];\r\n    for (const [key, value] of currentStats) {\r\n        if (key !== StatsEnum.Health) {\r\n            cells.push(<div style={{ fontSize: \"1rem\", fontWeight: \"bold\", float: \"left\", textAlign: \"center\", paddingTop: \"0.15rem\", minWidth: \"20%\" }}>\r\n                <div\r\n                    style={{ border: \"2px solid black\", padding: \"0.2rem\", margin: \"0rem 0.1rem\", fontSize: \"1.1rem\" }}\r\n                    key={`add_dialog_${member.type}_stat_${key}`\r\n                    }>\r\n                    {value}\r\n                </div>\r\n                <div key={`add_dialog__stat_header_${key}`}>{key}</div>\r\n            </div>);\r\n        }\r\n    }\r\n    return <React.Fragment>\r\n        <div style={{ display: \"grid\", gridTemplateColumns: \"80% 20%\" }}>\r\n            <div style={{ display: \"flex\" }}>{cells}</div>\r\n            <div style={{ border: \"2px solid black\", padding: \"0.2rem\", margin: \"0.15rem 0.1rem\", fontSize: \"1.1rem\", fontWeight: \"bold\", textAlign: \"center\", gridArea: \"1/2/3/2\" }}>\r\n                <div style={{ fontSize: \"1rem\" }}>Current Health</div>\r\n                <div style={{ paddingTop: \"0.5rem\" }}>{member.currentHealth || member.stats.Health}</div>\r\n            </div>\r\n            {renderGear(member)}\r\n        </div>\r\n    </React.Fragment >;\r\n};\r\n\r\nconst PdfCharacter = (character: Character) => <React.Fragment>\r\n    {renderHeader(character)}\r\n    {renderCharacterStats(character)}\r\n    {renderPowers(character)}\r\n    {renderGear(character)}\r\n</React.Fragment>;\r\n\r\nconst PdfSoldier = (crewman: Soldier) => <React.Fragment>\r\n    {renderCrewmanHeader(crewman)}\r\n    {renderCrewStats(crewman)}\r\n</React.Fragment>;\r\n\r\nexport const PdfCharacters = () => {\r\n    const { store } = useContext(ReactReduxContext);\r\n    const state = store.getState() as CrewState;\r\n    return <div className={\"pdf-divider\"}>\r\n        {PdfCharacter(state.Captain)}\r\n        {PdfCharacter(state.FirstMate)}\r\n    </div>;\r\n};\r\nexport const PdfSoldiers = () => {\r\n    const { store } = useContext(ReactReduxContext);\r\n    const state = store.getState() as CrewState;\r\n    return <div className={\"pdf-divider\"}>\r\n        {state.Soldiers.map(PdfSoldier)}\r\n    </div>;\r\n};\r\n","import { PdfCharacters, PdfSoldiers } from \"./PdfRosterComponents\";\r\n\r\nexport const PdfRenderer = () =>\r\n    <div className=\"pdf-container\">\r\n        <PdfCharacters />\r\n        <PdfSoldiers />\r\n    </div>;\r\n","import html2canvas from \"html2canvas\";\r\nimport { jsPDF } from \"jspdf\";\r\nimport React, { useContext, useState } from \"react\";\r\nimport { ReactReduxContext } from \"react-redux\";\r\nimport { BackButtonComponent } from \"../../components/common/BackButton\";\r\nimport { PrintablePowerCards } from \"../../components/pdf/PdfPowerCards\";\r\nimport { PdfRenderer } from \"../../components/pdf/PdfRenderer\";\r\nimport { PdfIcon } from \"../../images\";\r\nimport { CrewState } from \"../../types\";\r\n\r\nexport const PdfExportPage = () => {\r\n    const { store } = useContext(ReactReduxContext);\r\n    const state = store.getState() as CrewState;\r\n    const [printPowerCards, setPrintPowerCards] = useState<boolean | undefined>(undefined);\r\n    const exportPdf = async () => {\r\n        const jsPdf = new jsPDF(\"landscape\", \"mm\", \"a4\", true);\r\n        let canvas: HTMLCanvasElement;\r\n        const container = Array.from(document.querySelectorAll(\".pdf-container\"));\r\n        for (let i = 0; i < container.length; i++) {\r\n            if (i > 0) {\r\n                jsPdf.addPage();\r\n            }\r\n            canvas = await html2canvas(container[i] as unknown as HTMLElement, { scale: 4, letterRendering: true });\r\n            jsPdf.addImage(canvas.toDataURL(\"image/png\"), \"JPEG\", 0, 0, jsPdf.internal.pageSize.getWidth(), jsPdf.internal.pageSize.getHeight());\r\n        }\r\n        if (printPowerCards) {\r\n            jsPdf.addPage();\r\n            canvas = await html2canvas(document.querySelector(\"#printable-power-cards\") as HTMLElement, { scale: 2, letterRendering: true });\r\n            jsPdf.addImage(canvas.toDataURL(\"image/png\"), \"JPEG\", 0, 0, jsPdf.internal.pageSize.getWidth(), jsPdf.internal.pageSize.getHeight());\r\n        }\r\n        jsPdf.save(`${state.ShipName} (${state.Captain.level}/${state.FirstMate.level}/${state.Credits}).pdf`);\r\n    };\r\n    return <React.Fragment>\r\n        <div style={{ borderTop: \"0.15rem solid\" }} className=\"chapter-header\">Export your warband to pdf</div>\r\n        <div style={{ display: \"grid\", paddingTop: \"2rem\", paddingBottom: \"2rem\" }}>\r\n            <img alt=\"file upload\" className=\"file-ops-icon\" src={PdfIcon} onClick={exportPdf} />\r\n        </div>\r\n        <div className={\"pdf-threeway-switch\"}>\r\n            <div onClick={() => setPrintPowerCards(true)} className={printPowerCards ? \"selected pdf-sub-switch\" : \"pdf-sub-switch\"}>All power cards</div>\r\n            <div onClick={() => setPrintPowerCards(false)} style={{ borderLeft: \"1px solid\" }} className={printPowerCards === false ? \"selected pdf-sub-switch\" : \"pdf-sub-switch\"}>Improved powers</div>\r\n            <div onClick={() => setPrintPowerCards(undefined)} style={{ borderLeft: \"1px solid\" }} className={printPowerCards === undefined ? \"selected  pdf-sub-switch\" : \"pdf-sub-switch\"}>No, thank you</div>\r\n        </div>\r\n        <PdfRenderer />\r\n        {printPowerCards !== undefined ? <PrintablePowerCards printAll={printPowerCards} /> : undefined}\r\n        <BackButtonComponent />\r\n    </React.Fragment>;\r\n};\r\n","import React, { useContext, useState } from \"react\";\r\nimport { ReactReduxContext, useDispatch } from \"react-redux\";\r\nimport { BackButtonComponent } from \"../../components/common/BackButton\";\r\nimport { AdvancedTech1Icon, AdvancedWeaponsIcon, AlienArtefactsIcon, InformationIcon, SecretIcon, TradeGoodsIcon } from \"../../images\";\r\nimport { CONVERT_INFORMATION, SELL_LOOT } from \"../../redux/actions\";\r\nimport { CrewState, Information, LootCategories, LootItem, TradeGoods } from \"../../types\";\r\nimport { getAdvancedTech, getAdvancedWeapons, getAlienArtefacts } from \"../../Utils\";\r\n\r\nexport const ShipsCargoPage = () => {\r\n    const { store } = useContext(ReactReduxContext);\r\n    const state = store.getState() as CrewState;\r\n    const [cargo, setCargo] = useState<LootItem[]>(state.ShipsHold);\r\n    const [confirmation, setConfirmation] = useState<LootItem | undefined>(undefined);\r\n    const dispatch = useDispatch();\r\n    const getTradeGoodsValue = (name: string) => {\r\n        switch (name) {\r\n            case TradeGoods.TradeGoods75: return 75;\r\n            case TradeGoods.TradeGoods150: return 150;\r\n            case TradeGoods.TradeGoods200: return 200;\r\n            case TradeGoods.TradeGoods250: return 250;\r\n            case TradeGoods.TradeGoods300: return 300;\r\n            case TradeGoods.TradeGoods400: return 400;\r\n            default: return 0;\r\n        }\r\n    };\r\n\r\n    const getInformationValue = (name: string) => {\r\n        switch (name) {\r\n            case Information.Information75: return 75;\r\n            case Information.Information150: return 150;\r\n            case Information.Information200: return 200;\r\n            case Information.Information125: return 125;\r\n            case Information.Information100: return 100;\r\n            default: return 0;\r\n        }\r\n    };\r\n    const renderDialogTile = (item: LootItem) => {\r\n        switch (item.type) {\r\n            case LootCategories.TradeGoods:\r\n                return <div>\r\n                    <div className=\"cargo-tile\">\r\n                        <img className=\"add-character-background-icons\" src={TradeGoodsIcon} alt={\"tradegoods\"} />\r\n                        <div style={{ paddingBottom: \"2rem\", borderBottom: \"2px solid\" }} className=\"large-text\">{item.name}</div>\r\n                        <div style={{ fontWeight: \"bold\", float: \"right\", margin: \"0.2rem\", padding: \"1rem\" }} className=\"cargo-item-btn selected\"\r\n                            onClick={() => {\r\n                                dispatch({ type: SELL_LOOT, payload: { loot: item, credits: getTradeGoodsValue(item.name) } });\r\n                                setConfirmation(undefined);\r\n                            }}>\r\n                            {`Sell for ${getTradeGoodsValue(item.name)} \\xA5`}</div>\r\n                    </div>\r\n                </div>;\r\n            case LootCategories.Secret:\r\n                return <div>\r\n                    <div className=\"cargo-tile\">\r\n                        <img className=\"add-character-background-icons\" src={SecretIcon} alt={\"tradegoods\"} />\r\n                        <div style={{ paddingBottom: \"2rem\", borderBottom: \"2px solid\" }} className=\"large-text\">{item.name}</div>\r\n                        <div style={{ fontWeight: \"bold\", float: \"right\", margin: \"0.2rem\", padding: \"1rem\" }} className=\"cargo-item-btn selected\"\r\n                            onClick={() => dispatch({ type: SELL_LOOT, payload: { loot: item, credits: 200 } })}>\r\n                            {\"Sell for 200 \\xA5\"}</div>\r\n                        <div style={{ fontWeight: \"bold\", float: \"left\", margin: \"0.2rem\", padding: \"1rem\" }} className=\"cargo-item-btn selected\"\r\n                            onClick={() => {\r\n                                dispatch({ type: SELL_LOOT, payload: { loot: item, credits: 0 } });\r\n                                setConfirmation(undefined);\r\n                            }}>\r\n                            {\"Use to unlock item\"}</div>\r\n                    </div>\r\n                </div>;\r\n            case LootCategories.Information:\r\n                return <div>\r\n                    <div className=\"cargo-tile\">\r\n                        <img className=\"add-character-background-icons\" src={InformationIcon} alt={\"information\"} />\r\n                        <div style={{ paddingBottom: \"2rem\", borderBottom: \"2px solid\" }} className=\"large-text\">{item.name}</div>\r\n                        <div style={{ fontWeight: \"bold\", float: \"right\", margin: \"0.2rem\", padding: \"1rem\" }} className=\"cargo-item-btn selected\"\r\n                            onClick={() => dispatch({ type: SELL_LOOT, payload: { loot: item, credits: getInformationValue(item.name) } })}>\r\n                            {`Sell for ${getInformationValue(item.name)} \\xA5`}</div>\r\n                        <div style={{ fontWeight: \"bold\", float: \"left\", margin: \"0.2rem\", padding: \"1rem\" }} className=\"cargo-item-btn selected\"\r\n                            onClick={() => {\r\n                                dispatch({ type: CONVERT_INFORMATION, payload: { loot: item } });\r\n                                setConfirmation(undefined);\r\n                            }}>\r\n                            {\"Use to gain 20xp\"}</div>\r\n                    </div>\r\n                </div>;\r\n            case LootCategories.AdvancedTechnology:\r\n                const technology = getAdvancedTech().find((tech) => tech.name === item.name);\r\n                if (technology) {\r\n                    return <div>\r\n                        <div className=\"cargo-tile\">\r\n                            <img className=\"add-character-background-icons\" src={AdvancedTech1Icon} alt={\"alien\"} />\r\n                            <div className=\"large-text\">{item.name}</div>\r\n                            <div className=\"medium-text\">{technology.type}</div>\r\n                            <div className=\"medium-text\">{technology.gearSlots > 1 ? `${technology.gearSlots} Gear Slots` : `${technology.gearSlots} Gear Slot`}</div>\r\n                            {technology.armourModifier ? <div className=\"large-text\" >{`${technology.armourModifier} Armour Modifier`}</div> : undefined}\r\n                            <div className=\"large-text\" style={{ padding: \"2rem\", borderBottom: \"2px solid\" }}>{technology.notes}</div>\r\n                            <div style={{ fontWeight: \"bold\", float: \"right\", margin: \"0.2rem\", padding: \"1rem\" }} className=\"cargo-item-btn selected\"\r\n                                onClick={() => {\r\n                                    dispatch({ type: SELL_LOOT, payload: { loot: item, credits: technology.sell } });\r\n                                    setConfirmation(undefined);\r\n                                }}>\r\n                                {`Sell for ${technology.sell} \\xA5`}</div>\r\n                            <div style={{ fontWeight: \"bold\", float: \"left\", margin: \"0.2rem\", padding: \"1rem\" }} className=\"cargo-item-btn selected\"\r\n                                onClick={() => {\r\n                                    // dispatch({ type: CONVERT_INFORMATION, payload: { loot: item } });\r\n                                    // setConfirmation(undefined);\r\n                                }}>\r\n                                {\"Attach to crew member\"}</div>\r\n                        </div>\r\n                    </div>;\r\n                }\r\n                return <React.Fragment></React.Fragment>;\r\n            case LootCategories.AdvancedWeapons:\r\n                const advWeapon = getAdvancedWeapons().find((weapon) => weapon.name === item.name);\r\n                if (advWeapon) {\r\n                    const str: string[] = [];\r\n                    if (advWeapon.maxRange) {\r\n                        str.push(typeof (advWeapon.maxRange) === \"number\" ? `Range ${advWeapon.maxRange}\"` : `${advWeapon.maxRange}`);\r\n                    }\r\n                    if (advWeapon.damageModifier) {\r\n                        str.push(`+${advWeapon.damageModifier} Damage Modifier`);\r\n                    }\r\n                    return <div>\r\n                        <div className=\"cargo-tile\">\r\n                            <img className=\"add-character-background-icons\" src={AdvancedWeaponsIcon} alt={\"alien\"} />\r\n                            <div className=\"large-text\">{item.name}</div>\r\n                            <div className=\"medium-text\">{advWeapon.type}</div>\r\n                            <div className=\"medium-text\">{advWeapon.gearSlots > 1 ? `${advWeapon.gearSlots} Gear Slots` : `${advWeapon.gearSlots} Gear Slot`}</div>\r\n                            <div className=\"large-text\" style={{ paddingTop: \"1rem\" }}>{advWeapon.notes}</div>\r\n                            {str ? <div className=\"large-text\" >{str.join(\" / \")}</div> : undefined}\r\n                            <div style={{ paddingBottom: \"2rem\", borderBottom: \"2px solid\" }}></div>\r\n                            <div style={{ fontWeight: \"bold\", float: \"right\", margin: \"0.2rem\", padding: \"1rem\" }} className=\"cargo-item-btn selected\"\r\n                                onClick={() => {\r\n                                    dispatch({ type: SELL_LOOT, payload: { loot: item, credits: advWeapon.sell } });\r\n                                    setConfirmation(undefined);\r\n                                }}>\r\n                                {`Sell for ${advWeapon.sell} \\xA5`}</div>\r\n                            <div style={{ fontWeight: \"bold\", float: \"left\", margin: \"0.2rem\", padding: \"1rem\" }} className=\"cargo-item-btn selected\"\r\n                                onClick={() => {\r\n                                    // dispatch({ type: CONVERT_INFORMATION, payload: { loot: item } });\r\n                                    // setConfirmation(undefined);\r\n                                }}>\r\n                                {\"Attach to crew member\"}</div>\r\n                        </div>\r\n                    </div>;\r\n                }\r\n                return <React.Fragment></React.Fragment>;\r\n            case LootCategories.AlienTech:\r\n                const artefact = getAlienArtefacts().find((art) => art.name === item.name);\r\n                if (artefact) {\r\n                    return <div>\r\n                        <div className=\"cargo-tile\">\r\n                            <img className=\"add-character-background-icons\" src={AlienArtefactsIcon} alt={\"alien\"} />\r\n                            <div className=\"large-text\">{item.name}</div>\r\n                            <div className=\"medium-text\">{artefact.type} / {artefact.gearSlots} Slot</div>\r\n                            <div className=\"large-text\" style={{ padding: \"2rem\", borderBottom: \"2px solid\" }}>{artefact.notes}</div>\r\n                            <div style={{ fontWeight: \"bold\", float: \"right\", margin: \"0.2rem\", padding: \"1rem\" }} className=\"cargo-item-btn selected\"\r\n                                onClick={() => {\r\n                                    dispatch({ type: SELL_LOOT, payload: { loot: item, credits: artefact.sell } });\r\n                                    setConfirmation(undefined);\r\n                                }}>\r\n                                {`Sell for ${artefact.sell} \\xA5`}</div>\r\n                            <div style={{ fontWeight: \"bold\", float: \"left\", margin: \"0.2rem\", padding: \"1rem\" }} className=\"cargo-item-btn selected\"\r\n                                onClick={() => {\r\n                                    // dispatch({ type: CONVERT_INFORMATION, payload: { loot: item } });\r\n                                    // setConfirmation(undefined);\r\n                                }}>\r\n                                {\"Attach to crew member\"}</div>\r\n                        </div>\r\n                    </div>;\r\n                }\r\n                return <React.Fragment></React.Fragment>;\r\n        }\r\n    };\r\n    const SellConfirmationDialog = () => <React.Fragment>\r\n        {confirmation ? <div style={{ position: \"absolute\", marginTop: \"12.5%\", height: \"75%\", marginLeft: \"5%\", width: \"90%\", background: \"white\", borderRadius: \"\", border: \"2px solid\" }}>\r\n            <div className=\"modal-header\">What do you want to do with this?</div>\r\n            {renderDialogTile(confirmation)}\r\n            <div className=\"cargo-item-btn\" onClick={() => setConfirmation(undefined)}>Back</div>\r\n        </div> : undefined}\r\n    </React.Fragment>;\r\n\r\n    const ItemDetails = ({ item }: { item: LootItem }) => <div className=\"cargo-item\">\r\n        {item.name}\r\n        <div>\r\n            <div className=\"cargo-item-btn selected\"\r\n                onClick={() => setConfirmation(item)}>\r\n                Details</div>\r\n        </div>\r\n    </div>;\r\n\r\n    const CargoTable = () => <React.Fragment>\r\n        {confirmation ? <SellConfirmationDialog /> : undefined}\r\n        <div className=\"chapter-header\">Ships Cargo Bay</div>\r\n        {cargo.map((item) => <ItemDetails item={item} />)}\r\n    </React.Fragment>;\r\n    return <React.Fragment> <CargoTable /><BackButtonComponent /></React.Fragment>;\r\n};\r\n","import React, { useContext, useState } from \"react\";\r\nimport { ReactReduxContext, useDispatch } from \"react-redux\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { BackButtonComponent } from \"../../components/common/BackButton\";\r\nimport { XPDropDown } from \"../../components/dropdowns/XPDropdown\";\r\nimport { MODIFY_SOLDIER, REMOVE_SOLDIERS, SET_CAPTAIN, SET_FIRST_MATE } from \"../../redux/actions\";\r\nimport { Character, CharactersEnum, CrewState, Soldier } from \"../../types\";\r\ninterface CrewUpdates {\r\n    member: Soldier | Character;\r\n    change: CrewInjuries | CharacterInjuries;\r\n}\r\nenum CrewInjuries {\r\n    DEAD = \"Dead (1-4)\",\r\n    WOUNDED = \"Badly Wounded (5-8)\",\r\n    RECOVERY = \"Full Recovery (9-20)\",\r\n}\r\nenum CharacterInjuries {\r\n    BARELY_ALIVE = \"Barely Alive (1-2)\",\r\n    WOUNDED = \"Badly Wounded (3-6)\",\r\n    CLOSE_CALL = \"Close Call (7-8)\",\r\n    RECOVERY = \"Full Recovery (9-20)\",\r\n}\r\nexport const PostGameSequencePage = () => {\r\n    const { store } = useContext(ReactReduxContext);\r\n    const state = store.getState() as CrewState;\r\n    const history = useHistory();\r\n    const dispatch = useDispatch();\r\n    const [crewUpdates, setCrewUpdates] = useState<CrewUpdates[]>([]);\r\n    const updateCrewMan = (crewman: Soldier, value: string) => {\r\n        const filteredList = crewUpdates.filter((member) => {\r\n            if (member.member.hasOwnProperty(\"amount\")) {\r\n                const crewmember = (member.member as Soldier);\r\n                return !(crewmember.id === crewman.id && crewmember.type === crewman.type);\r\n            }\r\n            return true;\r\n        });\r\n        setCrewUpdates([...filteredList, { member: crewman, change: value as CrewInjuries }]);\r\n    };\r\n    const updateCharacter = (char: Character, value: string) => {\r\n        const filteredList = crewUpdates.filter((ch) => {\r\n            if (ch.member.hasOwnProperty(\"name\")) {\r\n                const crewmember = (ch.member as Character);\r\n                return !(crewmember.name === char.name);\r\n            }\r\n            return true;\r\n        });\r\n        setCrewUpdates([...filteredList, { member: char, change: value as CharacterInjuries }]);\r\n    };\r\n    const aftermath = () => {\r\n        const deadSoldiers: Soldier[] = [];\r\n        crewUpdates.forEach((update) => {\r\n            const crewman = state.Soldiers.find((sol) => sol.id === (update.member as Soldier).id && sol.type === update.member.type);\r\n            switch (update.change) {\r\n                case CrewInjuries.DEAD:\r\n                    if (crewman) {\r\n                        deadSoldiers.push(crewman);\r\n                    }\r\n                    break;\r\n                case CharacterInjuries.BARELY_ALIVE:\r\n                    dispatch({\r\n                        type: update.member.type === CharactersEnum.Captain ? SET_CAPTAIN : SET_FIRST_MATE,\r\n                        payload: update.member.type === CharactersEnum.Captain ? { ...state.Captain, missNextGame: true } : { ...state.FirstMate, missNextGame: true },\r\n                    });\r\n                    break;\r\n                case CharacterInjuries.WOUNDED:\r\n                    dispatch({\r\n                        type: update.member.type === CharactersEnum.Captain ? SET_CAPTAIN : SET_FIRST_MATE,\r\n                        payload: update.member.type === CharactersEnum.Captain ?\r\n                            { ...state.Captain, currentHealth: Math.floor(state.Captain.stats.Health / 2) } :\r\n                            { ...state.FirstMate, currentHealth: Math.floor(state.FirstMate.stats.Health / 2) },\r\n                    });\r\n                    break;\r\n                case CrewInjuries.WOUNDED:\r\n                    if (crewman) {\r\n                        dispatch({\r\n                            type: MODIFY_SOLDIER,\r\n                            payload: { ...crewman, currentHealth: Math.floor(state.FirstMate.stats.Health / 2) },\r\n                        });\r\n                    }\r\n                    break;\r\n                case CharacterInjuries.CLOSE_CALL:\r\n                case CrewInjuries.RECOVERY:\r\n            }\r\n        });\r\n        dispatch({\r\n            type: REMOVE_SOLDIERS,\r\n            payload: deadSoldiers,\r\n        });\r\n    };\r\n    const renderInjuryAndDeathCrew = (crewman: Soldier) => <React.Fragment>\r\n        <div className=\"injuries-btn\">\r\n            <div>{crewman.type} #{crewman.id}</div>\r\n            <XPDropDown list={Object.values(CrewInjuries)} dropdownOptions={{ id: `${crewman.type}#${crewman.id}`, placeholder: CrewInjuries.RECOVERY }} callbackFn={(val) => updateCrewMan(crewman, val)} />\r\n        </div>\r\n    </React.Fragment>;\r\n    const renderInjuryAndDeathCharacter = (char: Character) => <React.Fragment>\r\n        <div className=\"injuries-btn\">\r\n            <div>{char.name} ({char.level})</div>\r\n            <XPDropDown list={Object.values(CharacterInjuries)} dropdownOptions={{ id: `${char.name}`, placeholder: CharacterInjuries.RECOVERY }} callbackFn={(val) => updateCharacter(char, val)} />\r\n        </div>\r\n    </React.Fragment>;\r\n    return <React.Fragment>\r\n        <div className=\"chapter-header\">Congratulation on completing the last mission</div>\r\n        <div className=\"modal-header\">\r\n            Now you need to distribute the spoils of war and tend to your crew.\r\n            </div>\r\n        <div className=\"modal-header\">But first things first. How is your crew?</div>\r\n        {renderInjuryAndDeathCharacter(state.Captain)}\r\n        {renderInjuryAndDeathCharacter(state.FirstMate)}\r\n        {state.Soldiers.map(renderInjuryAndDeathCrew)}\r\n        <button\r\n            onClick={() => {\r\n                aftermath();\r\n                history.push(\"/Experience\");\r\n            }}\r\n            className={\"dialog-btn confirm-btn\"}\r\n        >Confirm</button>\r\n        <BackButtonComponent />\r\n    </React.Fragment>;\r\n};\r\n","import React, { useState } from \"react\";\r\nimport { DropdownOptions } from \"../../types\";\r\nimport { useComponentVisible } from \"../../UseComponentVisible\";\r\n\r\nexport const XPDropDown = ({ list, dropdownOptions, callbackFn }: { list: string[]; dropdownOptions: DropdownOptions; callbackFn(item: string): void }) => {\r\n    const [selectedItem, setSelectedItem] = useState<string>(dropdownOptions.placeholder as string);\r\n    const getCssProps = () => {\r\n        const position = document.getElementById(`dropdown-container-${dropdownOptions.id}`)?.getBoundingClientRect();\r\n        return { top: (position?.top || 0) + 42, left: (position?.left || 0), width: (position?.width || 0) };\r\n    };\r\n    const renderList = () => list.filter((item: string) => (item !== selectedItem)).map((listItem) =>\r\n        <div key={`dropdown-list-item-${dropdownOptions.id}-${listItem}`}\r\n            className=\"gear-selection dropdown-input dropdown-input-list\"\r\n            onMouseDown={() => {\r\n                setSelectedItem(listItem);\r\n                callbackFn(listItem);\r\n                setIsComponentVisible(false);\r\n            }}\r\n        >\r\n            <div>{listItem}</div>\r\n        </div>\r\n    );\r\n    const { ref, isComponentVisible, setIsComponentVisible, openMenu } = useComponentVisible(false);\r\n    return <React.Fragment>\r\n        <div\r\n            className=\"gear-selection selected dropdown-input\"\r\n            onClick={openMenu}\r\n            id={`dropdown-container-${dropdownOptions.id}`}>\r\n            <div>{selectedItem}</div>\r\n        </div>\r\n        <div ref={ref}>\r\n            {isComponentVisible ?\r\n                <div style={getCssProps()} className=\"dropdown-portal\">\r\n                    {list.length > 0 ? renderList() : <div key={`dropdown-list-item-${dropdownOptions.id}-empty-list`} className=\"dropdown-empty-list\">No match found for search string. Please refine your search.</div>}\r\n                </div> : null}\r\n        </div>\r\n    </React.Fragment>;\r\n\r\n};\r\n","import React, { useContext, useEffect, useState } from \"react\";\r\nimport { ReactReduxContext, useDispatch } from \"react-redux\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { CustomBackButtonComponent } from \"../../components/common/CustomBackButton\";\r\nimport { XPDropDown } from \"../../components/dropdowns/XPDropdown\";\r\nimport { REWIND_XP, SPEND_XP } from \"../../redux/actions\";\r\nimport { CrewState, LevelImprovements } from \"../../types\";\r\nimport { getAdvancePerLevel } from \"../../Utils\";\r\nexport const LevelUpPage = () => {\r\n    const { store } = useContext(ReactReduxContext);\r\n    const state = store.getState() as CrewState;\r\n    const dispatch = useDispatch();\r\n    const history = useHistory();\r\n    const [captainLevels, setCaptainLevels] = useState<number>(0);\r\n    const [firstMateLevels, setfirstMateLevels] = useState<number>(0);\r\n    const [deciChoice, setDeciChoice] = useState<boolean>(true);\r\n    const [x, setX] = useState<string[]>([]);\r\n    const [y, setY] = useState<string[]>([]);\r\n    useEffect(() => {\r\n        setX(getCaptainLevels());\r\n        setY(getFirstMateLevels());\r\n    }, [captainLevels, firstMateLevels, deciChoice]);\r\n    const getCaptainLevels = () => {\r\n        const difference = state.Captain && state.FirstMate ? (state.Captain.level + captainLevels) - (state.FirstMate.level + firstMateLevels) : 0;\r\n        const experienceAvailable = Math.min(3, 20 - difference, Math.floor(state.Experience / 100) - firstMateLevels);\r\n        return [...Array(experienceAvailable + 1).keys()].map((nr) => `${nr}`);\r\n    };\r\n    const getFirstMateLevels = () => {\r\n        const difference = state.Captain && state.FirstMate ? (state.Captain.level + captainLevels) - (state.FirstMate.level + firstMateLevels) : 0;\r\n        const experienceAvailable = Math.min(3, difference - 5, Math.floor(state.Experience / 100) - captainLevels);\r\n        return [...Array(experienceAvailable + 1).keys()].map((nr) => `${nr}`);\r\n    };\r\n    const renderImprovements = (isCaptain: boolean) => {\r\n        const lvl = isCaptain ? (state.Captain).level : (state.FirstMate).level;\r\n        if (isCaptain ? captainLevels === 0 : firstMateLevels === 0) {\r\n            return [<div className=\"improvement-token\">No level up for this guy, so no improvements</div>];\r\n        }\r\n        const nodes: JSX.Element[] = [];\r\n        for (let i = 1; i < (isCaptain ? captainLevels + 1 : firstMateLevels + 1); i++) {\r\n            switch (getAdvancePerLevel(lvl + i)) {\r\n                case LevelImprovements.LowerActivation:\r\n                    nodes.push(<div className=\"improvement-token selected\">{LevelImprovements.LowerActivation}</div>);\r\n                    break;\r\n                case LevelImprovements.ImproveStat:\r\n                    nodes.push(<div className=\"improvement-token selected\">{LevelImprovements.ImproveStat}</div>);\r\n                    break;\r\n                case LevelImprovements.NewPower:\r\n                    nodes.push(<div className=\"improvement-token selected\">{LevelImprovements.NewPower}</div>);\r\n                    break;\r\n                case LevelImprovements.NewPowerOrImproveStat:\r\n                    nodes.push(<div style={{ display: \"grid\", gridTemplateColumns: \"40% 20% 40%\" }}>\r\n                        <div onClick={() => deciChoice ? undefined : setDeciChoice(true)} className={deciChoice ? \"improvement-token selected\" : \"improvement-token\"}>{LevelImprovements.NewPower}</div>\r\n                        <div style={{ textAlign: \"center\", fontWeight: \"bold\", paddingTop: \"1rem\" }}> OR </div >\r\n                        <div onClick={() => deciChoice ? setDeciChoice(false) : undefined} className={!deciChoice ? \"improvement-token selected\" : \"improvement-token\"}>{LevelImprovements.ImproveStat}</div>\r\n                    </div>);\r\n                    break;\r\n                default:\r\n            }\r\n        }\r\n        return nodes;\r\n    };\r\n    return <React.Fragment>\r\n        <div className=\"chapter-header\">You have {state.Experience} xp left.\r\n            <div className=\"modal-sub-header\">For 100 xp you may buy a level for any character</div>\r\n            <div className=\"modal-sub-header\">Choose how many levels each character should advance by using the drop down menus</div>\r\n        </div>\r\n\r\n        <div className=\"xp-btn\">\r\n            <div>Level up {state.Captain.name} ({state.Captain.level})</div>\r\n            <XPDropDown list={x} dropdownOptions={{ id: \"captainLevels\", placeholder: \"0\" }} callbackFn={(nr) => setCaptainLevels(parseInt(nr, 10))} />\r\n        </div>\r\n        <div style={{ display: \"flex\", flexDirection: \"column\" }}>\r\n            {renderImprovements(true)}\r\n        </div>\r\n        <div className=\"xp-btn\">\r\n            <div>Level up {state.FirstMate.name} ({state.FirstMate.level})</div>\r\n            <XPDropDown list={y} dropdownOptions={{ id: \"firstMateLevels\", placeholder: \"0\" }} callbackFn={(nr) => setfirstMateLevels(parseInt(nr, 10))} />\r\n        </div>\r\n        <div style={{ display: \"flex\", flexDirection: \"column\" }}>\r\n            {renderImprovements(false)}\r\n        </div>\r\n        <button\r\n            onClick={() => {\r\n                dispatch({ type: SPEND_XP, payload: ((captainLevels + firstMateLevels) * 100) });\r\n                history.push(captainLevels > 0 ? \"/LevelUpCaptain\" :\r\n                    firstMateLevels > 0 ? \"/LevelUpFirstMate\" :\r\n                        \"/PhysicalLootDeclaration\", { captainLevels, firstMateLevels, choice: deciChoice ? LevelImprovements.NewPower : LevelImprovements.ImproveStat });\r\n            }}\r\n            className={\"dialog-btn confirm-btn\"}\r\n        >Confirm</button>\r\n        <CustomBackButtonComponent dispatchFunction={() => dispatch({ type: REWIND_XP })} />\r\n    </React.Fragment>;\r\n};\r\n","import React, { useState } from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { BackButtonComponent } from \"../../components/common/BackButton\";\r\nimport { Carousel } from \"../../components/common/Carousel\";\r\nimport { XPDropDown } from \"../../components/dropdowns/XPDropdown\";\r\nimport { ADD_CREDITS, ADD_LOOT } from \"../../redux/actions\";\r\nimport { DataCategories, Information, LootCategories, LootItem, LootType, PhysicalCategories, SelectedCategory, TradeGoods } from \"../../types\";\r\nimport { getAdvancedTech, getAdvancedWeapons, getAlienArtefacts } from \"../../Utils\";\r\n\r\ninterface SelectedItems {\r\n    lootId: number;\r\n    selectedItem: LootItem;\r\n}\r\nconst credits = [10, 15, 20, 30, 40, 45, 50, 60, 70, 75, 80, 90, 100, 105, 110, 120, 130, 135, 140, 150, 160, 165, 170, 180, 190, 195, 200, 220, 225, 240, 250, 255, 260, 270, 280, 285, 300, 320, 340, 360, 380, 400];\r\n\r\nexport const LootPage = ({ lootType }: { lootType: LootType }) => {\r\n    const [lootTokensCollected, setLootTokensCollected] = useState<number>(0);\r\n    const [selectedItems, setSelectedItems] = useState<SelectedItems[] | undefined>(undefined);\r\n    const [selectedCategory, setSelectedCategory] = useState<SelectedCategory[] | undefined>(undefined);\r\n    const history = useHistory();\r\n    const dispatch = useDispatch();\r\n    const advTech = getAdvancedTech();\r\n    const alienTech = getAlienArtefacts();\r\n    const advWeapons = getAdvancedWeapons();\r\n    const isCategorySelected = (idx: number, name: PhysicalCategories | DataCategories) => selectedCategory?.find((item) => item.lootId === idx && item.selectedCategory === name);\r\n    const isCategoryIdSelected = (idx: number) => selectedCategory?.find((item) => item.lootId === idx);\r\n    const isItemSelected = (idx: number, name: string) => selectedItems?.find((item) => item.lootId === idx && item.selectedItem.name === name);\r\n    const isIdSelected = (idx: number) => selectedItems?.find((item) => item.lootId === idx);\r\n    const updateSelectedItems = (idx: number, item: LootItem) => {\r\n        if (isItemSelected(idx, item.name)) {\r\n            setSelectedItems(selectedItems?.filter((selIt) => selIt.lootId !== idx || selIt.selectedItem.name !== item.name));\r\n        } else if (isIdSelected(idx)) {\r\n            setSelectedItems([...selectedItems?.filter((selIt) => selIt.lootId !== idx) || [], { lootId: idx, selectedItem: item }]);\r\n        } else {\r\n            setSelectedItems([...selectedItems || [], { lootId: idx, selectedItem: item }]);\r\n        }\r\n    };\r\n    const updateSelectedCategory = (idx: number, name: PhysicalCategories | DataCategories) => {\r\n        if (isCategorySelected(idx, name)) {\r\n            setSelectedCategory(selectedCategory?.filter((item) => item.lootId !== idx || item.selectedCategory !== name));\r\n        } else if (isCategoryIdSelected(idx)) {\r\n            setSelectedCategory([...selectedCategory?.filter((item) => item.lootId !== idx) || [], { lootId: idx, selectedCategory: name }]);\r\n        } else {\r\n            setSelectedCategory([...selectedCategory || [], { lootId: idx, selectedCategory: name }]);\r\n        }\r\n    };\r\n    const getTradeGoods = (idx: number) =>\r\n        Object.values(TradeGoods).map((value) =>\r\n            <div style={{ padding: \"1rem\" }}\r\n                className={isItemSelected(idx, value) ? \"gear-selection selected\" : \"gear-selection\"}\r\n                onClick={() => updateSelectedItems(idx, { name: value, type: LootCategories.TradeGoods })}\r\n                key={value}>\r\n                {value}\r\n            </div>\r\n        );\r\n    const getInformation = (idx: number) =>\r\n        Object.values(Information).map((value) =>\r\n            <div style={{ padding: \"1rem\" }}\r\n                className={isItemSelected(idx, value) ? \"gear-selection selected\" : \"gear-selection\"}\r\n                onClick={() => updateSelectedItems(idx, { name: value, type: LootCategories.Information })}\r\n                key={value}>\r\n                {value}\r\n            </div>\r\n        );\r\n    const CategorySelection = ({ idx }: { idx: number }) => {\r\n        if (lootType === LootType.Data) {\r\n            return <div style={{ display: \"flex\", flexWrap: \"wrap\" }}>{Object.values(DataCategories).map((value) => <div className={isCategorySelected(idx, value) ? \"loot-selection selected\" : \"loot-selection\"}\r\n                onClick={() => updateSelectedCategory(idx, value)}\r\n            >\r\n                {value}\r\n            </div>)}</div>;\r\n        }\r\n        if (lootType === LootType.Physical) {\r\n            return <div style={{ display: \"flex\", flexWrap: \"wrap\" }}>{Object.values(PhysicalCategories).map((value) => <div className={isCategorySelected(idx, value) ? \"loot-selection selected\" : \"loot-selection\"}\r\n                onClick={() => updateSelectedCategory(idx, value)}\r\n            >\r\n                {value}\r\n            </div>)}</div>;\r\n        }\r\n        return <React.Fragment></React.Fragment>;\r\n    };\r\n    const LootSelection = ({ idx }: { idx: number }) => {\r\n        const category = selectedCategory?.find((cat) => cat.lootId === idx)?.selectedCategory;\r\n        switch (category) {\r\n            case PhysicalCategories.TradeGoods:\r\n                return <div style={{ display: \"flex\", flexWrap: \"wrap\" }}>{getTradeGoods(idx)}</div>;\r\n            case PhysicalCategories.AdvancedTechnology:\r\n                return <Carousel\r\n                    splitSize={10}\r\n                    inputDivs={advTech.map((tech) => <div\r\n                        className={isItemSelected(idx, tech.name) ? \"gear-selection selected\" : \"gear-selection\"}\r\n                        onClick={() => updateSelectedItems(idx, { name: tech.name, type: LootCategories.AdvancedTechnology })}\r\n                    >\r\n                        {tech.name}\r\n                    </div>)}\r\n                />;\r\n            case PhysicalCategories.AdvancedWeapons:\r\n                return <Carousel\r\n                    splitSize={10}\r\n                    inputDivs={advWeapons.map((weapon) => <div\r\n                        className={isItemSelected(idx, weapon.name) ? \"gear-selection selected\" : \"gear-selection\"}\r\n                        onClick={() => updateSelectedItems(idx, { name: weapon.name, type: LootCategories.AdvancedWeapons })}\r\n                    >\r\n                        {weapon.name}\r\n                    </div>)}\r\n                />;\r\n            case PhysicalCategories.AlienTech:\r\n                return <Carousel\r\n                    splitSize={10}\r\n                    inputDivs={alienTech.map((artefact) => <div\r\n                        className={isItemSelected(idx, artefact.name) ? \"gear-selection selected\" : \"gear-selection\"}\r\n                        onClick={() => updateSelectedItems(idx, { name: artefact.name, type: LootCategories.AlienTech })}\r\n                    >\r\n                        {artefact.name}\r\n                    </div>)}\r\n                />;\r\n            case DataCategories.Credits:\r\n                return <React.Fragment>{credits.map((choice) => <div\r\n                    className={isItemSelected(idx, choice.toString()) ? \"credits-selection selected\" : \"credits-selection\"}\r\n                    onClick={() => updateSelectedItems(idx, { name: choice.toString(), type: LootCategories.Credits })}\r\n                >\r\n                    {`${choice} \\xA5`}\r\n                </div>)}\r\n                </React.Fragment>;\r\n            case DataCategories.Information:\r\n                return <div style={{ display: \"flex\", flexWrap: \"wrap\" }}>{getInformation(idx)}</div>;\r\n            case DataCategories.AdvancedTechnology:\r\n                return <Carousel\r\n                    splitSize={12}\r\n                    inputDivs={advTech.map((tech) => <div\r\n                        className={isItemSelected(idx, tech.name) ? \"gear-selection selected\" : \"gear-selection\"}\r\n                        onClick={() => updateSelectedItems(idx, { name: tech.name, type: LootCategories.AdvancedTechnology })}\r\n                    >\r\n                        {tech.name}\r\n                    </div>)}\r\n                />;\r\n            case DataCategories.AdvancedWeapons:\r\n                return <Carousel\r\n                    splitSize={12}\r\n                    inputDivs={advWeapons.map((weapon) => <div\r\n                        className={isItemSelected(idx, weapon.name) ? \"gear-selection selected\" : \"gear-selection\"}\r\n                        onClick={() => updateSelectedItems(idx, { name: weapon.name, type: LootCategories.AdvancedWeapons })}>{weapon.name}</div>)}\r\n                />;\r\n            case DataCategories.Secret:\r\n                return <div\r\n                    className={isItemSelected(idx, DataCategories.Secret) ? \"gear-selection selected\" : \"gear-selection\"}\r\n                    onClick={() => updateSelectedItems(idx, { name: \"Secret\", type: LootCategories.Secret })}>{DataCategories.Secret}</div>;\r\n            default:\r\n                return <React.Fragment></React.Fragment>;\r\n        }\r\n    };\r\n    const RenderSection = ({ idx }: { idx: number }) => <React.Fragment>\r\n        <div style={{ textAlign: \"left\" }} className=\"modal-header\">Token # {idx} Category</div>\r\n        <CategorySelection idx={idx} />\r\n        {selectedCategory ? <div style={{ textAlign: \"left\" }} className=\"modal-header\">Select item # {idx}</div> : undefined}\r\n        <LootSelection idx={idx} /></React.Fragment>;\r\n    return <React.Fragment>\r\n        <div className=\"chapter-header\">{lootType === LootType.Data ? \"Select Data Loot\" : \"Select Physical Loot\"}</div>\r\n        <div className=\"xp-btn\">\r\n            <div>{lootType === LootType.Data ? \"Data Loot collected\" : \"Physical Loot collected\"}</div>\r\n            <XPDropDown list={[\"0\", \"1\", \"2\", \"3\", \"4\"]} dropdownOptions={{ id: \"lootUnlocked\", placeholder: \"0\" }} callbackFn={(nr) => setLootTokensCollected(parseInt(nr, 10))} />\r\n        </div>\r\n        {\r\n            lootTokensCollected ?\r\n                lootTokensCollected > 1 ?\r\n                    <Carousel inputDivs={Array.from({ length: lootTokensCollected }).map((_val, idx) => <RenderSection idx={idx + 1} />)} splitSize={1} /> :\r\n                    <RenderSection idx={1} /> :\r\n                undefined}\r\n        <button\r\n            onClick={() => {\r\n                selectedItems?.forEach((item) => {\r\n                    if (item.selectedItem.type === LootCategories.Credits) {\r\n                        dispatch({\r\n                            type: ADD_CREDITS,\r\n                            payload: {\r\n                                credits: parseInt(item.selectedItem.name, 10),\r\n                                sign: true,\r\n                                record: `Looted ${item.selectedItem.name} credits`,\r\n                            },\r\n                        });\r\n                    } else {\r\n                        dispatch({\r\n                            type: ADD_LOOT,\r\n                            payload: item.selectedItem,\r\n                        });\r\n                    }\r\n                });\r\n                lootType === LootType.Physical ? history.push(\"/DataLootDeclaration\", LootType.Data) : history.push(\"/CrewOverview\");\r\n            }}\r\n            className={\"dialog-btn confirm-btn\"}\r\n        >Confirm</button>\r\n        <BackButtonComponent />\r\n    </React.Fragment>;\r\n};\r\n","import { LootType } from \"../../types\";\r\nimport { LootPage } from \"./Loot\";\r\n\r\nexport const DataLootPage = () => <LootPage lootType={LootType.Data} />;\r\n","import React, { useState } from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { BackButtonComponent } from \"../../components/common/BackButton\";\r\nimport { XPDropDown } from \"../../components/dropdowns/XPDropdown\";\r\nimport { ADD_XP } from \"../../redux/actions\";\r\nexport const ExperiencePage = () => {\r\n    const dispatch = useDispatch();\r\n    const history = useHistory();\r\n    const [crewMemberDied, setCrewMemberDied] = useState<boolean>(false);\r\n    const [lootUnlocked, setLootUnlocked] = useState<number>(0);\r\n    const [powerActivations, setPowerActivations] = useState<number>(0);\r\n    const [rivalsKilled, setRivalsKilled] = useState<number>(0);\r\n    const [npcsKilled, setNPCsKilled] = useState<number>(0);\r\n    const [scenarioSpecific, setScenarioSpecific] = useState<number>(0);\r\n    const getTotalXp = () => Math.min(300, (crewMemberDied ? 30 : 0) + (lootUnlocked * 20) + (powerActivations * 10) + (rivalsKilled * 10) + (npcsKilled * 5) + scenarioSpecific + 30);\r\n    return <React.Fragment>\r\n        <div className=\"chapter-header\">How much Experience did you gain?</div>\r\n        <div className=\"xp-btn\">\r\n\r\n            <div>Game Played</div>\r\n            <div style={{ margin: \"0rem\", opacity: 1 }} className=\"gear-selection disabled\">30 xp</div>\r\n        </div>\r\n        <div className={\"xp-btn\"}>\r\n            <div>At Least one own crew member killed (30xp)</div>\r\n            <XPDropDown list={[\"Yes\", \"No\"]} dropdownOptions={{ id: \"deadCrewman\", placeholder: \"No\" }} callbackFn={(answer) => answer === \"Yes\" ? setCrewMemberDied(true) : setCrewMemberDied(false)} />\r\n        </div>\r\n        <div className=\"xp-btn\">\r\n            <div>Loot tokens unlocked <br />(+20 xp)</div>\r\n            <XPDropDown list={[\"0\", \"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\"]} dropdownOptions={{ id: \"lootUnlocked\", placeholder: \"0\" }} callbackFn={(nr) => setLootUnlocked(parseInt(nr, 10))} />\r\n        </div>\r\n        <div className=\"xp-btn\">\r\n            <div>Successful power casts <br />(+10 xp / Max 100 xp)</div>\r\n            <XPDropDown list={[\"0\", \"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"10\"]} dropdownOptions={{ id: \"powerActivated\", placeholder: \"0\" }} callbackFn={(nr) => setPowerActivations(parseInt(nr, 10))} />\r\n        </div>\r\n        <div className=\"xp-btn\">\r\n            <div>Rival crew members killed <br />(+10 xp / Max 40 xp)</div>\r\n            <XPDropDown list={[\"0\", \"1\", \"2\", \"3\", \"4\"]} dropdownOptions={{ id: \"rivalsKilled\", placeholder: \"0\" }} callbackFn={(nr) => setRivalsKilled(parseInt(nr, 10))} />\r\n        </div>\r\n        <div className=\"xp-btn\">\r\n            <div>NPCs killed <br />(+5 xp / Max 20 xp)</div>\r\n            <XPDropDown list={[\"0\", \"1\", \"2\", \"3\", \"4\"]} dropdownOptions={{ id: \"NPCsKilled\", placeholder: \"0\" }} callbackFn={(nr) => setNPCsKilled(parseInt(nr, 10))} />\r\n        </div>\r\n        <div></div>\r\n        <div className=\"xp-btn\">\r\n            <div>Scenario specific xp gained</div>\r\n            <XPDropDown list={[\"0\", \"5\", \"10\", \"15\", \"20\", \"25\", \"30\", \"35\", \"40\", \"45\", \"50\"]} dropdownOptions={{ id: \"scenarioXP\", placeholder: \"0\" }} callbackFn={(nr) => setScenarioSpecific(parseInt(nr, 10))} />\r\n        </div>\r\n        <div className=\"xp-btn selected\">\r\n\r\n            <div>Total Experience Gained <br />(Max 300 xp)</div>\r\n            <div style={{ margin: \"0rem\", opacity: 1, fontSize: \"1.2rem\" }} className=\"gear-selection disabled\">{getTotalXp()} XP</div>\r\n        </div>\r\n        <button\r\n            onClick={() => {\r\n                dispatch({\r\n                    type: ADD_XP,\r\n                    payload: getTotalXp(),\r\n                });\r\n                history.push(\"/LevelUp\");\r\n            }}\r\n            className={\"dialog-btn confirm-btn\"}\r\n        >Confirm</button>\r\n        <BackButtonComponent />\r\n    </React.Fragment>;\r\n};\r\n","import React, { useState } from \"react\";\r\nimport { BackgroundEnum, ModifiedPower, Power } from \"../types\";\r\nimport { getUnselectedPowers, isCorePower } from \"../Utils\";\r\nimport { Carousel } from \"./common/Carousel\";\r\n\r\nexport const SelectNewPowers = (\r\n    { currentPowers, background, updatePowers }:\r\n        { currentPowers: ModifiedPower[]; background: BackgroundEnum; updatePowers(value: ModifiedPower | undefined): void }\r\n) => {\r\n    const [selectedPower, setSelectedPower] = useState<ModifiedPower>();\r\n    const isPowerSelected = (power: Power) => selectedPower && selectedPower.name === power.name;\r\n    return <React.Fragment>\r\n        <div className=\"modal-header\">\r\n            {\"Choose 1 additional Power\"}\r\n            <div className=\"modal-sub-header\">{\"Swipe or use the page buttons to see more entries\"}</div>\r\n        </div>\r\n        <Carousel\r\n            splitSize={8}\r\n            inputDivs={getUnselectedPowers(currentPowers).map((power) =>\r\n                <div\r\n                    onClick={() => {\r\n                        if (selectedPower) {\r\n                            setSelectedPower(undefined);\r\n                            updatePowers(undefined);\r\n                        } else {\r\n                            setSelectedPower(power);\r\n                            updatePowers({ name: power.name, activation: isCorePower(power.name, background) ? power.activation : power.activation + 2 });\r\n                        }\r\n                    }}\r\n                    className={isPowerSelected(power) ? \"power-selection emphasized selected\" : selectedPower ? \"power-selection disabled\" : \"power-selection\"}\r\n                    key={`add_dialog_x_stat_${power.name}`}>\r\n\r\n                    <div>{power.name}</div>\r\n                    <div style={{\r\n                        fontSize: \"0.8rem\",\r\n                        fontWeight: \"normal\",\r\n                    }}>\r\n                        {isCorePower(power.name, background) ? power.activation : power.activation + 2} / {power.strain} / {Array.isArray(power.category) ? `${power.category.join(\", \")}` : power.category}\r\n                    </div>\r\n                </div>\r\n            )}\r\n        />\r\n    </React.Fragment>;\r\n};\r\n","import React, { useContext, useState } from \"react\";\r\nimport { ReactReduxContext, useDispatch } from \"react-redux\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { Carousel } from \"../../components/common/Carousel\";\r\nimport { CustomBackButtonComponent } from \"../../components/common/CustomBackButton\";\r\nimport { SelectNewPowers } from \"../../components/SelectNewPowers\";\r\nimport { REWIND_XP, SET_CAPTAIN, SET_FIRST_MATE } from \"../../redux/actions\";\r\nimport { BackgroundEnum, CrewState, LevelImprovements, LevelUpState, ModifiedPower, Power, Stats, StatsEnum } from \"../../types\";\r\nimport { getAdvancePerLevel, getPower } from \"../../Utils\";\r\ninterface LvlImprov {\r\n    LevelImprovement: LevelImprovements;\r\n    amount: number;\r\n}\r\nexport const LevelUpCharacterPage = ({ isCaptainCharacter, pageState }: { isCaptainCharacter: boolean; pageState: LevelUpState }) => {\r\n    const { store } = useContext(ReactReduxContext);\r\n    const state = store.getState() as CrewState;\r\n    const character = isCaptainCharacter ? state.Captain : state.FirstMate;\r\n    const dispatch = useDispatch();\r\n    const history = useHistory();\r\n    const levelsGained = isCaptainCharacter ? pageState.captainLevels : pageState.firstMateLevels;\r\n    const [selectedPowers, setSelectedPowers] = useState<ModifiedPower[]>([]);\r\n    const [newPower, setNewPower] = useState<ModifiedPower | undefined>(undefined);\r\n    const [selections, setSelections] = useState<Array<Partial<Stats>>>([]);\r\n    const isPowerSelected = (power: ModifiedPower) => !!selectedPowers.find((pwr) => pwr.name === power.name);\r\n    const isStatSelected = (statName: string) => selections.find((stat) => stat[statName as StatsEnum] !== undefined);\r\n    const improvedStats = () => {\r\n        const captainStats = character.stats;\r\n        let newStats: Stats = { ...captainStats };\r\n        selections.forEach((sel) => newStats = { ...newStats, ...sel });\r\n        return newStats;\r\n    };\r\n    const actualAdvances = () => {\r\n        const currentLevel = character.level;\r\n        const advances: LvlImprov[] = [];\r\n        for (let i = currentLevel + 1; i < currentLevel + 1 + levelsGained; i++) {\r\n            const advance = getAdvancePerLevel(i);\r\n            if (advance) {\r\n                const foundAdvance = advances.find((adv) => adv.LevelImprovement === advance);\r\n                if (foundAdvance) {\r\n                    const foundIdx = advances.findIndex((adv) => adv.LevelImprovement === advance);\r\n                    advances[foundIdx] = { LevelImprovement: advance, amount: foundAdvance.amount + 1 };\r\n                } else {\r\n                    advances.push({ LevelImprovement: advance, amount: 1 });\r\n                }\r\n            }\r\n        }\r\n        return advances;\r\n    };\r\n    const allDoneFn = () => {\r\n        const advances = actualAdvances();\r\n        let allDone = true;\r\n        for (const advance of advances) {\r\n            switch (advance.LevelImprovement) {\r\n                case LevelImprovements.LowerActivation:\r\n                    allDone = (advance.amount <= selectedPowers.length);\r\n                    break;\r\n                case LevelImprovements.ImproveStat:\r\n                    allDone = (advance.amount <= selections.length);\r\n                    break;\r\n                case LevelImprovements.NewPower:\r\n                    allDone = !!newPower;\r\n                    break;\r\n                case LevelImprovements.NewPowerOrImproveStat:\r\n                    if (pageState.choice === LevelImprovements.NewPower) {\r\n                        allDone = !!newPower;\r\n                    } else if (pageState.choice === LevelImprovements.ImproveStat) {\r\n                        allDone = (advance.amount <= selections.length);\r\n                    }\r\n            }\r\n        }\r\n        return allDone;\r\n    };\r\n    const statMaxed = (statName: StatsEnum) => {\r\n        switch (statName) {\r\n            case StatsEnum.Move:\r\n                return character.stats[StatsEnum.Move] >= 7;\r\n            case StatsEnum.Fight:\r\n                return character.stats[StatsEnum.Fight] >= 6;\r\n            case StatsEnum.Shoot:\r\n                return character.stats[StatsEnum.Shoot] >= 6;\r\n            case StatsEnum.Will:\r\n                return character.stats[StatsEnum.Will] >= 8;\r\n            case StatsEnum.Health:\r\n                return character.stats[StatsEnum.Health] >= 25;\r\n            default:\r\n                return true;\r\n        }\r\n    };\r\n    const renderPowerChoice = (advance: LvlImprov) => <React.Fragment>\r\n        <div className=\"modal-header\">{LevelImprovements.LowerActivation}\r\n            <div className=\"modal-sub-header\">Choose {advance.amount} {advance.amount > 1 ? \"different Powers\" : \"Power\"} </div>\r\n        </div>\r\n        {character.powers?.map((power) =>\r\n            <div\r\n                style={{ fontWeight: \"bold\" }}\r\n                className={isPowerSelected(power) ? \"background-power-selection full-width selected\" : selectedPowers.length >= advance.amount ? \"background-power-selection full-width disabled\" : \"background-power-selection full-width\"}\r\n                onClick={() => {\r\n                    if (selectedPowers.find((pwr) => pwr.name === power.name)) {\r\n                        setSelectedPowers(selectedPowers.filter((pwr) => pwr.name !== power.name));\r\n                    } else {\r\n                        if (selectedPowers.length >= advance.amount) {\r\n                            return;\r\n                        }\r\n                        setSelectedPowers([...selectedPowers, { ...power, activation: power.activation - 1 }]);\r\n                    }\r\n                }}\r\n                key={`add_dialog_x_stat_${power.name}`}\r\n            >\r\n                <div>{power.name} ({isPowerSelected(power) ? power.activation - 1 : power.activation})</div>\r\n                <div\r\n                    style={{ fontSize: \"0.8rem\", fontWeight: \"normal\" }}>\r\n                    {isPowerSelected(power) ?\r\n                        power.activation - 1 : power.activation} / {getPower(power.name).strain} / {Array.isArray(getPower(power.name).category) ? `${(getPower(power.name).category as string[]).join(\", \")}` :\r\n                            getPower(power.name).category}\r\n                </div>\r\n            </div>)}\r\n    </React.Fragment>;\r\n    const renderStatsChoice = (advance: LvlImprov) => <React.Fragment>\r\n        <div className=\"modal-header\">{LevelImprovements.ImproveStat}\r\n            <div className=\"modal-sub-header\">Only stats that are not maxed can be selected</div>\r\n        </div>\r\n        {[StatsEnum.Move, StatsEnum.Fight, StatsEnum.Shoot, StatsEnum.Will, StatsEnum.Health].map((statName) =>\r\n            !statMaxed(statName) ?\r\n                <div\r\n                    onClick={() => {\r\n                        if (isStatSelected(statName)) {\r\n                            setSelections(selections.filter((stat) => stat[statName] === undefined));\r\n                        } else {\r\n                            if (selections.length >= advance.amount) {\r\n                                return;\r\n                            }\r\n                            setSelections([...selections, { [statName]: character.stats[statName] + 1 }]);\r\n                        }\r\n                    }}\r\n                    className={isStatSelected(statName) ? \"background-stat-selection selected\" : selections.length >= advance.amount || statMaxed(statName) ? \"background-stat-selection disabled\" : \"background-stat-selection\"}\r\n                    key={`add_captain_dialog_opt_stat_${statName}`}>\r\n                    {statName} ({isStatSelected(statName) ? character.stats[statName] + 1 : character.stats[statName]})\r\n            </div> : undefined)}\r\n    </React.Fragment>;\r\n    const renderNewPowerChoice = (_advance: LvlImprov) => <React.Fragment>\r\n        <SelectNewPowers currentPowers={character.powers} background={character.background as BackgroundEnum} updatePowers={setNewPower} />\r\n    </React.Fragment>;\r\n\r\n    const renderLevelImprovements = (advance: LvlImprov, renderNodes: JSX.Element[]) => {\r\n        switch (advance.LevelImprovement) {\r\n            case LevelImprovements.LowerActivation:\r\n                renderNodes.push(renderPowerChoice(advance));\r\n                break;\r\n            case LevelImprovements.ImproveStat:\r\n                renderNodes.push(renderStatsChoice(advance));\r\n                break;\r\n            case LevelImprovements.NewPower:\r\n                renderNodes.push(renderNewPowerChoice(advance));\r\n                break;\r\n            case LevelImprovements.NewPowerOrImproveStat:\r\n                if (pageState.choice) {\r\n                    renderLevelImprovements({ LevelImprovement: pageState.choice, amount: 1 }, renderNodes);\r\n                }\r\n        }\r\n    };\r\n    const improvedPowers = () => (newPower ? [...character.powers as Power[], newPower] : character.powers as Power[]).map((power) => selectedPowers.find((pwr) => power.name === pwr.name) || power);\r\n    const renderAdvances = () => {\r\n        const renderNodes: JSX.Element[] = [];\r\n        const advances: LvlImprov[] = actualAdvances();\r\n        for (const advance of advances) {\r\n            renderLevelImprovements(advance, renderNodes);\r\n        }\r\n        return <Carousel\r\n            splitSize={1}\r\n            inputDivs={renderNodes}\r\n        />;\r\n    };\r\n\r\n    return <React.Fragment>\r\n        <div className=\"chapter-header\">{character.name}</div>\r\n        {renderAdvances()}\r\n        <button\r\n            onClick={() => {\r\n                dispatch({\r\n                    type: isCaptainCharacter ? SET_CAPTAIN : SET_FIRST_MATE,\r\n                    payload: { ...character, level: character.level + levelsGained, powers: improvedPowers(), stats: improvedStats() },\r\n                });\r\n                if (isCaptainCharacter && pageState.firstMateLevels) {\r\n                    history.push(\"/LevelUpFirstMate\", pageState);\r\n                } else {\r\n                    history.push(\"/PhysicalLootDeclaration\");\r\n                }\r\n            }}\r\n            className={allDoneFn() ? \"dialog-btn confirm-btn\" : \"dialog-btn confirm-btn disabled\"}\r\n        >Confirm</button>\r\n        <CustomBackButtonComponent dispatchFunction={() => isCaptainCharacter ? dispatch({ type: REWIND_XP }) : undefined} />\r\n    </React.Fragment>;\r\n};\r\n","import { useHistory } from \"react-router-dom\";\r\nimport { LevelUpState } from \"../../types\";\r\nimport { LevelUpCharacterPage } from \"./LevelUpPage\";\r\nexport const LevelUpCaptainPage = () => {\r\n    const history = useHistory();\r\n    return <LevelUpCharacterPage isCaptainCharacter={true} pageState={history.location.state as LevelUpState} />;\r\n};\r\n","import { useHistory } from \"react-router-dom\";\r\nimport { LevelUpState } from \"../../types\";\r\nimport { LevelUpCharacterPage } from \"./LevelUpPage\";\r\nexport const LevelUpFirstMatePage = () => {\r\n    const history = useHistory();\r\n    return <LevelUpCharacterPage isCaptainCharacter={false} pageState={history.location.state as LevelUpState} />;\r\n};\r\n","import { LootType } from \"../../types\";\r\nimport { LootPage } from \"./Loot\";\r\n\r\nexport const PhysicalLootPage = () => <LootPage lootType={LootType.Physical} />;\r\n","import React, { useContext } from \"react\";\r\nimport { ReactReduxContext } from \"react-redux\";\r\nimport { BackButtonComponent } from \"../../components/common/BackButton\";\r\nimport { TreasuryIcon } from \"../../images\";\r\nimport { CrewState } from \"../../types\";\r\nexport const TransactionHistoryPage = () => {\r\n    const { store } = useContext(ReactReduxContext);\r\n    const state = store.getState() as CrewState;\r\n    return <React.Fragment>\r\n        <div className=\"chapter-header\">Your transaction log</div>\r\n        {state.CreditRecords.map((record) => <div className=\"transaction-list\">\r\n            <div>{record.record}</div>\r\n            <div style={{ textAlign: \"center\" }}>{record.sign ? \"+\" : \"-\"} {`${record.credits} \\xA5`}</div>\r\n        </div>)}\r\n        <div\r\n            className=\"transaction-sum\"\r\n            title={\"Current amount of credits in your treasury\"}>\r\n            <div className={\"toolbar-compact-icon\"}>Current Treasury</div>\r\n            <img\r\n                style={{ placeSelf: \"normal\" }}\r\n                src={TreasuryIcon}\r\n                className={\"toolbar-compact-icon\"}\r\n                id={\"TreasuryIcon\"}\r\n                alt={\"TreasuryIcon\"}>\r\n            </img>\r\n            <div style={{ fontSize: \"1.5rem\" }}>\r\n                {`${state.Credits} \\xA5`}\r\n            </div>\r\n        </div>\r\n        <BackButtonComponent />\r\n    </React.Fragment>;\r\n};\r\n","import React from \"react\";\nimport * as ReactDOM from \"react-dom\";\nimport { connect, Provider } from \"react-redux\";\nimport { BrowserRouter, Route, Switch } from \"react-router-dom\";\nimport { compose, createStore } from \"redux\";\nimport \"./App.css\";\nimport {\n  CharacterBackgroundPage, CharacterNamePage, CharacterNonCorePowerSelectionPage, CharacterPowerImprovementsPage,\n  CharacterPowerSelectionPage, CharacterSelectGearPage, CharacterStatsSelectionPage,\n  CrewPage, DataLootPage, ExperiencePage, FileOperationsPage,\n  FileSystemPage, LandingPage, LevelUpCaptainPage,\n  LevelUpFirstMatePage, LevelUpPage, PdfExportPage, PhysicalLootPage, PostGameSequencePage,\n  ShipNamePage, ShipsCargoPage, SoldierSelectionPage\n} from \"./pages\";\nimport { TransactionHistoryPage } from \"./pages/Overview/TransactionHistoryPage\";\nimport { stateReducer } from \"./redux/reducer\";\n\nconst App = () =>\n  <BrowserRouter>\n    <div className=\"app-body\">\n      <Switch>\n        <Route path=\"/ShipName\" component={ShipNamePage} />\n        <Route path=\"/CharacterName\" component={CharacterNamePage} />\n        <Route path=\"/CharacterBackground\" component={CharacterBackgroundPage} />\n        <Route path=\"/CharacterStatsSelection\" component={CharacterStatsSelectionPage} />\n        <Route path=\"/CharacterPowerSelection\" component={CharacterPowerSelectionPage} />\n        <Route path=\"/CharacterNonCorePowerSelection\" component={CharacterNonCorePowerSelectionPage} />\n        <Route path=\"/CharacterImprovePowers\" component={CharacterPowerImprovementsPage} />\n        <Route path=\"/CharacterSelectGear\" component={CharacterSelectGearPage} />\n        <Route path=\"/SoldierSelection\" component={SoldierSelectionPage} />\n        <Route path=\"/CrewOverview\" component={CrewPage} />\n        <Route path=\"/FileOperations\" component={FileOperationsPage} />\n        <Route path=\"/FileSystem\" component={FileSystemPage} />\n        <Route path=\"/Experience\" component={ExperiencePage} />\n        <Route path=\"/LevelUp\" component={LevelUpPage} />\n        <Route path=\"/LevelUpCaptain\" component={LevelUpCaptainPage} />\n        <Route path=\"/LevelUpFirstMate\" component={LevelUpFirstMatePage} />\n        <Route path=\"/PhysicalLootDeclaration\" component={PhysicalLootPage} />\n        <Route path=\"/DataLootDeclaration\" component={DataLootPage} />\n        <Route path=\"/PostGameSequence\" component={PostGameSequencePage} />\n        <Route path=\"/TransactionHistory\" component={TransactionHistoryPage} />\n        <Route path=\"/PdfExport\" component={PdfExportPage} />\n        <Route path=\"/ShipsCargo\" component={ShipsCargoPage} />\n        <Route path=\"/\" component={LandingPage} />\n      </Switch>\n    </div>\n  </BrowserRouter>;\n\nexport const AppContainer = connect()(App);\nexport const store = createStore(stateReducer, compose(typeof window === \"object\" &&\n  typeof (window as any).devToolsExtension !== \"undefined\" ?\n  (window as any).devToolsExtension() :\n  (f: any) => f\n));\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <AppContainer />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n","import { CrewState, InitialCrewState } from \"../types\";\r\nimport * as ReduxActions from \"./actions\";\r\n\r\n// tslint:disable-next-line: cyclomatic-complexity\r\nexport function stateReducer(state: CrewState = InitialCrewState, action: ReduxActions.Actions): CrewState {\r\n    const xpRecords = state.ExperienceRecords;\r\n    switch (action.type) {\r\n        case ReduxActions.ADD_XP:\r\n            return { ...state, Experience: state.Experience + action.payload, ExperienceRecords: [...xpRecords, state.Experience + action.payload] };\r\n        case ReduxActions.SPEND_XP:\r\n            return { ...state, Experience: state.Experience - action.payload, ExperienceRecords: [...xpRecords, state.Experience - action.payload] };\r\n        case ReduxActions.REWIND_XP:\r\n            return { ...state, Experience: xpRecords.length > 1 ? xpRecords[xpRecords.length - 2] : xpRecords[0], ExperienceRecords: xpRecords.length > 1 ? xpRecords.slice(0, xpRecords.length - 1) : xpRecords };\r\n        case ReduxActions.ADD_LOOT:\r\n            return { ...state, ShipsHold: [...state.ShipsHold, action.payload] };\r\n        case ReduxActions.SELL_LOOT:\r\n            const inventoryId = state.ShipsHold.findIndex((item) => item.name === action.payload.loot.name);\r\n            if (inventoryId > -1) {\r\n                const hold = state.ShipsHold;\r\n                hold.splice(inventoryId, 1);\r\n                return action.payload.credits ?\r\n                    {\r\n                        ...state,\r\n                        ShipsHold: hold,\r\n                        Credits: state.Credits + action.payload.credits,\r\n                        CreditRecords: [...state.CreditRecords, { credits: action.payload.credits, sign: true, record: `Sold ${action.payload.loot.name}` }],\r\n                    } : {\r\n                        ...state,\r\n                        ShipsHold: hold,\r\n                    };\r\n            }\r\n            return state;\r\n        case ReduxActions.SET_CREW:\r\n            return action.payload;\r\n        case ReduxActions.SET_SHIPNAME:\r\n            return { ...state, ShipName: action.payload };\r\n        case ReduxActions.SET_CAPTAINS_NAME:\r\n            return { ...state, Captain: { ...state.Captain, name: action.payload } };\r\n        case ReduxActions.SET_CAPTAINS_BACKGROUND:\r\n            return { ...state, Captain: { ...state.Captain, background: action.payload } };\r\n        case ReduxActions.SET_CAPTAINS_GEAR:\r\n            return { ...state, Captain: { ...state.Captain, gear: action.payload } };\r\n        case ReduxActions.SET_CAPTAINS_POWERS:\r\n            return { ...state, Captain: { ...state.Captain, powers: action.payload } };\r\n        case ReduxActions.SET_CAPTAINS_STATS:\r\n            return { ...state, Captain: { ...state.Captain, stats: action.payload } };\r\n        case ReduxActions.SET_FIRSTMATE_NAME:\r\n            return { ...state, FirstMate: { ...state.FirstMate, name: action.payload } };\r\n        case ReduxActions.SET_FIRSTMATE_BACKGROUND:\r\n            return { ...state, FirstMate: { ...state.FirstMate, background: action.payload } };\r\n        case ReduxActions.SET_FIRSTMATE_GEAR:\r\n            return { ...state, FirstMate: { ...state.FirstMate, gear: action.payload } };\r\n        case ReduxActions.SET_FIRSTMATE_POWERS:\r\n            return { ...state, FirstMate: { ...state.FirstMate, powers: action.payload } };\r\n        case ReduxActions.SET_FIRSTMATE_STATS:\r\n            return { ...state, FirstMate: { ...state.FirstMate, stats: action.payload } };\r\n        case ReduxActions.SET_CAPTAIN:\r\n            return { ...state, Captain: action.payload };\r\n        case ReduxActions.SET_FIRST_MATE:\r\n            return { ...state, FirstMate: action.payload };\r\n        case ReduxActions.ADD_SOLDIERS:\r\n            const transactionList = action.payload.map((soldier) => ({ credits: soldier.amount * soldier.cost, sign: false, record: `Hired ${soldier.amount} ${soldier.type}` }));\r\n            return {\r\n                ...state,\r\n                Soldiers: state.Soldiers ? [...state.Soldiers, ...action.payload] : action.payload,\r\n                Credits: state.Credits - action.payload.reduce((acc, soldier) => acc + (soldier.amount * soldier.cost), 0),\r\n                CreditRecords: [...state.CreditRecords, ...transactionList],\r\n            };\r\n        case ReduxActions.ADD_CREDITS:\r\n            return {\r\n                ...state,\r\n                Credits: state.Credits + action.payload.credits,\r\n                CreditRecords: [...state.CreditRecords, action.payload],\r\n            };\r\n        case ReduxActions.MODIFY_SOLDIER:\r\n            const idx = state.Soldiers.findIndex((sol) => sol.id === action.payload.id && sol.type === action.payload.type);\r\n            state.Soldiers[idx] = action.payload;\r\n            return state;\r\n        case ReduxActions.REMOVE_SOLDIERS:\r\n            const removalIdxs: number[] = [];\r\n            const currentSoldiers = state.Soldiers;\r\n            action.payload.forEach((soldier) => {\r\n                removalIdxs.push(currentSoldiers.findIndex((sold) => sold.id === soldier.id && sold.type === soldier.type));\r\n            });\r\n            for (const index of removalIdxs) {\r\n                currentSoldiers.splice(index, 1);\r\n            }\r\n            return {\r\n                ...state, Soldiers: currentSoldiers.map((sol) => {\r\n                    const typeAmount = currentSoldiers.filter((fil) => fil.type === sol.type).length;\r\n                    return sol.id > typeAmount ? { ...sol, id: typeAmount } : sol;\r\n                }),\r\n            };\r\n        case ReduxActions.CONVERT_INFORMATION:\r\n            const invId = state.ShipsHold.findIndex((item) => item.name === action.payload.loot.name);\r\n            if (invId > -1) {\r\n                const hold = state.ShipsHold;\r\n                hold.splice(invId, 1);\r\n                return {\r\n                    ...state, ShipsHold: hold, Experience: state.Experience + 20, ExperienceRecords: [...xpRecords, state.Experience + 20],\r\n                };\r\n            }\r\n            return state;\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n"],"sourceRoot":""}